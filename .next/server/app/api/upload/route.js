(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},46517:e=>{"use strict";e.exports=require("lodash")},59283:e=>{"use strict";e.exports=require("lodash/at")},20770:e=>{"use strict";e.exports=require("lodash/clone")},39131:e=>{"use strict";e.exports=require("lodash/compact")},48390:e=>{"use strict";e.exports=require("lodash/extend")},9368:e=>{"use strict";e.exports=require("lodash/filter")},22265:e=>{"use strict";e.exports=require("lodash/first")},41238:e=>{"use strict";e.exports=require("lodash/includes")},35599:e=>{"use strict";e.exports=require("lodash/isArray")},89699:e=>{"use strict";e.exports=require("lodash/isEmpty")},25716:e=>{"use strict";e.exports=require("lodash/isFunction")},27078:e=>{"use strict";e.exports=require("lodash/isNumber")},75795:e=>{"use strict";e.exports=require("lodash/isObject")},15452:e=>{"use strict";e.exports=require("lodash/isPlainObject")},97026:e=>{"use strict";e.exports=require("lodash/isString")},22133:e=>{"use strict";e.exports=require("lodash/isUndefined")},83824:e=>{"use strict";e.exports=require("lodash/last")},53707:e=>{"use strict";e.exports=require("lodash/map")},11516:e=>{"use strict";e.exports=require("lodash/take")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},76369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{headerHooks:()=>b,originalPathname:()=>x,patchFetch:()=>A,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>v});var n={};r.r(n),r.d(n,{DELETE:()=>f,POST:()=>d});var o=r(95419),i=r(69108),a=r(99678),s=r(78070),u=r(81355),l=r(82002),c=r(76386);async function p(e,t="karim-traders"){try{let r=await c.v2.uploader.upload(e,{folder:t,resource_type:"image",transformation:[{width:1e3,height:1e3,crop:"limit"},{quality:"auto"},{fetch_format:"auto"}]});return{public_id:r.public_id,secure_url:r.secure_url,width:r.width,height:r.height,format:r.format,bytes:r.bytes}}catch(e){throw console.error("Cloudinary upload error:",e),Error("Failed to upload image")}}async function _(e){try{let t=await c.v2.uploader.destroy(e);return"ok"===t.result}catch(e){return console.error("Cloudinary delete error:",e),!1}}async function d(e){try{let t=await (0,u.getServerSession)(l.L);if(!t?.user?.id)return s.Z.json({error:"Unauthorized"},{status:401});let{searchParams:r}=new URL(e.url),n=r.get("folder")||"general";if("products"===n&&"ADMIN"!==t.user.role)return s.Z.json({error:"Admin access required"},{status:403});let{image:o}=await e.json();if(!o)return s.Z.json({error:"No image provided"},{status:400});if(!o.startsWith("data:image/"))return s.Z.json({error:"Invalid image format. Must be base64 encoded."},{status:400});let i=o.split(",")[1];if(Buffer.from(i,"base64").length>5242880)return s.Z.json({error:"Image too large. Maximum size is 5MB."},{status:400});let a=await p(o,`karim-traders/${n}`);return s.Z.json({url:a.secure_url,publicId:a.public_id,width:a.width,height:a.height},{status:201})}catch(e){return console.error("Upload error:",e),s.Z.json({error:"Failed to upload image"},{status:500})}}async function f(e){try{let t=await (0,u.getServerSession)(l.L);if(!t?.user?.id)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==t.user.role)return s.Z.json({error:"Admin access required"},{status:403});let{searchParams:r}=new URL(e.url),n=r.get("publicId");if(!n)return s.Z.json({error:"No public ID provided"},{status:400});if(await _(n))return s.Z.json({message:"Image deleted successfully"});return s.Z.json({error:"Failed to delete image"},{status:500})}catch(e){return console.error("Delete error:",e),s.Z.json({error:"Failed to delete image"},{status:500})}}c.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\api\\upload\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:y,headerHooks:b,staticGenerationBailout:v}=m,x="/api/upload/route";function A(){return(0,a.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},76386:(e,t,r)=>{e.exports=r(33892)},86314:(e,t,r)=>{r(34625);let{call_analysis_api:n}=r(37031);e.exports={analyze_uri:function(e,t,r={},o){let i={uri:e,analysis_type:t};if("custom"===t){if(!("model_name"in r)||!("model_version"in r))throw Error('Setting analysis_type to "custom" requires additional params: "model_name" and "model_version"');i.parameters={custom:{model_name:r.model_name,model_version:r.model_version}}}return n("POST",["analysis","analyze","uri"],i,o,r)}}},42621:(e,t,r)=>{let n=r(34625),o=r(98691),{extend:i,pickOnlyExistingValues:a}=n,s="transformations";function u(e,t={}){return i(t,a(e,"keep_original","invalidate","next_cursor","transformations"))}function l(e){return a(e,"exif","cinemagraph_analysis","colors","derived_next_cursor","faces","image_metadata","media_metadata","pages","phash","coordinates","max_results","versions","accessibility_analysis","related","related_next_cursor")}t.ping=function(e,t={}){return o("get",["ping"],{},e,t)},t.usage=function(e,t={}){let r=["usage"];return t.date&&r.push(t.date),o("get",r,{},e,t)},t.resource_types=function(e,t={}){return o("get",["resources"],{},e,t)},t.resources=function(e,t={}){let r,n,i;return r=t.resource_type||"image",n=t.type,i=["resources",r],null!=n&&i.push(n),null!=t.start_at&&"[object Date]"===Object.prototype.toString.call(t.start_at)&&(t.start_at=t.start_at.toUTCString()),o("get",i,a(t,"next_cursor","max_results","prefix","tags","context","direction","moderations","start_at","metadata","fields"),e,t)},t.resources_by_tag=function(e,t,r={}){return o("get",["resources",r.resource_type||"image","tags",e],a(r,"next_cursor","max_results","tags","context","direction","moderations","metadata","fields"),t,r)},t.resources_by_context=function(e,t,r,n={}){let i,s;return s=n.resource_type||"image",(i=a(n,"next_cursor","max_results","tags","context","direction","moderations","metadata","fields")).key=e,null!=t&&(i.value=t),o("get",["resources",s,"context"],i,r,n)},t.resources_by_moderation=function(e,t,r,n={}){return o("get",["resources",n.resource_type||"image","moderations",e,t],a(n,"next_cursor","max_results","tags","context","direction","moderations","metadata","fields"),r,n)},t.resource_by_asset_id=function(e,t,r={}){return o("get",["resources",e],l(r),t,r)},t.resources_by_asset_folder=function(e,t,r={}){let n;return(n=a(r,"next_cursor","max_results","tags","context","moderations","fields")).asset_folder=e,o("get",["resources","by_asset_folder"],n,t,r)},t.resources_by_asset_ids=function(e,t,r={}){let n;return(n=a(r,"tags","context","moderations","fields"))["asset_ids[]"]=e,o("get",["resources","by_asset_ids"],n,t,r)},t.resources_by_ids=function(e,t,r={}){let n,i,s;return i=r.resource_type||"image",s=r.type||"upload",(n=a(r,"tags","context","moderations","fields"))["public_ids[]"]=e,o("get",["resources",i,s],n,t,r)},t.resource=function(e,t,r={}){return o("get",["resources",r.resource_type||"image",r.type||"upload",e],l(r),t,r)},t.restore=function(e,t,r={}){return r.content_type="json",o("post",["resources",r.resource_type||"image",r.type||"upload","restore"],{public_ids:e,versions:r.versions},t,r)},t.restore_by_asset_ids=function(e,t,r={}){return r.content_type="json",Array.isArray(e)||(e=[e]),o("post",["resources","restore"],{asset_ids:e,versions:r.versions},t,r)},t.update=function(e,t,r={}){let i,a,s;return a=r.resource_type||"image",s=r.type||"upload",i=n.updateable_resource_params(r),null!=r.moderation_status&&(i.moderation_status=r.moderation_status),null!=r.clear_invalid&&(i.clear_invalid=r.clear_invalid),o("post",["resources",a,s,e],i,t,r)},t.delete_resources=function(e,t,r={}){return o("delete",["resources",r.resource_type||"image",r.type||"upload"],u(r,{"public_ids[]":e}),t,r)},t.delete_resources_by_asset_ids=function(e,t,r={}){return o("delete",["resources"],u(r,{"asset_ids[]":e}),t,r)},t.delete_resources_by_prefix=function(e,t,r={}){return o("delete",["resources",r.resource_type||"image",r.type||"upload"],u(r,{prefix:e}),t,r)},t.delete_resources_by_tag=function(e,t,r={}){return o("delete",["resources",r.resource_type||"image","tags",e],u(r),t,r)},t.delete_all_resources=function(e,t={}){return o("delete",["resources",t.resource_type||"image",t.type||"upload"],u(t,{all:!0}),e,t)},t.delete_backed_up_assets=(e,t,r,n={})=>o("delete",["resources","backup",e],c(t),r,n);let c=(e=[])=>({"version_ids[]":Array.isArray(e)?e:[e]}),p=(e=[])=>({assets_to_relate:Array.isArray(e)?e:[e]}),_=(e=[])=>({assets_to_unrelate:Array.isArray(e)?e:[e]});function d(e,t,r,n={}){let s,u;return(s=a(n,"type","invalidate","overwrite"))[e]=t,o("post",["resources",u=n.resource_type||"image","publish_resources"],s,r,n=i({resource_type:u},n))}function f(e,t,r,n,i={}){let a,s,u;return s=i.resource_type||"image",u=i.type||"upload",(a={access_mode:e})[t]=r,o("post","resources/"+s+"/"+u+"/update_access_mode",a,n,i)}t.add_related_assets=(e,t,r,n={})=>{let i=p(t),a=n.resource_type||"image",s=n.type||"upload";return n.content_type="json",o("post",["resources","related_assets",a,s,e],i,r,n)},t.add_related_assets_by_asset_id=(e,t,r,n={})=>{let i=p(t);return n.content_type="json",o("post",["resources","related_assets",e],i,r,n)},t.delete_related_assets=(e,t,r,n={})=>{let i=_(t),a=n.resource_type||"image",s=n.type||"upload";return n.content_type="json",o("delete",["resources","related_assets",a,s,e],i,r,n)},t.delete_related_assets_by_asset_id=(e,t,r,n={})=>{let i=_(t);return n.content_type="json",o("delete",["resources","related_assets",e],i,r,n)},t.delete_derived_resources=function(e,t,r={}){return o("delete",["derived_resources"],{"derived_resource_ids[]":e},t,r)},t.delete_derived_by_transformation=function(e,t,r,s={}){let u,l,c;return l=s.resource_type||"image",c=s.type||"upload",(u=i({"public_ids[]":e},a(s,"invalidate"))).keep_original=!0,u.transformations=n.build_eager(t),o("delete","resources/"+l+"/"+c,u,r,s)},t.tags=function(e,t={}){return o("get",["tags",t.resource_type||"image"],a(t,"next_cursor","max_results","prefix"),e,t)},t.transformations=function(e,t={}){return o("get",s,a(t,"next_cursor","max_results","named"),e,t)},t.transformation=function(e,t,r={}){let i=a(r,"next_cursor","max_results");return i.transformation=n.build_eager(e),o("get",s,i,t,r)},t.delete_transformation=function(e,t,r={}){let i={};return i.transformation=n.build_eager(e),o("delete",s,i,t,r)},t.update_transformation=function(e,t,r,i={}){let u=a(t,"allowed_for_strict");return u.transformation=n.build_eager(e),null!=t.unsafe_update&&(u.unsafe_update=n.build_eager(t.unsafe_update)),o("put",s,u,r,i)},t.create_transformation=function(e,t,r,i={}){let a={name:e};return a.transformation=n.build_eager(t),o("post",s,a,r,i)},t.upload_presets=function(e,t={}){return o("get",["upload_presets"],a(t,"next_cursor","max_results"),e,t)},t.upload_preset=function(e,t,r={}){return o("get",["upload_presets",e],{},t,r)},t.delete_upload_preset=function(e,t,r={}){return o("delete",["upload_presets",e],{},t,r)},t.update_upload_preset=function(e,t,r={}){return o("put",["upload_presets",e],n.merge(n.clear_blank(n.build_upload_params(r)),a(r,"unsigned","disallow_public_id","live")),t,r)},t.create_upload_preset=function(e,t={}){return o("post",["upload_presets"],n.merge(n.clear_blank(n.build_upload_params(t)),a(t,"name","unsigned","disallow_public_id","live")),e,t)},t.root_folders=function(e,t={}){return o("get",["folders"],a(t,"next_cursor","max_results"),e,t)},t.sub_folders=function(e,t,r={}){return o("get",["folders",e],a(r,"next_cursor","max_results"),t,r)},t.create_folder=function(e,t,r={}){return o("post",["folders",e],{},t,r)},t.delete_folder=function(e,t,r={}){return o("delete",["folders",e],{},t,r)},t.rename_folder=function(e,t,r,n={}){return n.content_type="json",o("put",["folders",e],{to_folder:t},r,n)},t.upload_mappings=function(e,t={}){return o("get","upload_mappings",a(t,"next_cursor","max_results"),e,t)},t.upload_mapping=function(e,t,r={}){return null==e&&(e=null),o("get","upload_mappings",{folder:e},t,r)},t.delete_upload_mapping=function(e,t,r={}){return o("delete","upload_mappings",{folder:e},t,r)},t.update_upload_mapping=function(e,t,r={}){let n;return(n=a(r,"template")).folder=e,o("put","upload_mappings",n,t,r)},t.create_upload_mapping=function(e,t,r={}){let n;return(n=a(r,"template")).folder=e,o("post","upload_mappings",n,t,r)},t.publish_by_prefix=function(e,t,r={}){return d("prefix",e,t,r)},t.publish_by_tag=function(e,t,r={}){return d("tag",e,t,r)},t.publish_by_ids=function(e,t,r={}){return d("public_ids",e,t,r)},t.list_streaming_profiles=function(e,t={}){return o("get","streaming_profiles",{},e,t)},t.get_streaming_profile=function(e,t,r={}){return o("get","streaming_profiles/"+e,{},t,r)},t.delete_streaming_profile=function(e,t,r={}){return o("delete","streaming_profiles/"+e,{},t,r)},t.update_streaming_profile=function(e,t,r={}){return o("put","streaming_profiles/"+e,n.build_streaming_profiles_param(r),t,r)},t.create_streaming_profile=function(e,t,r={}){let i;return(i=n.build_streaming_profiles_param(r)).name=e,o("post","streaming_profiles",i,t,r)},t.search=function(e,t,r={}){return r.content_type="json",o("post","resources/search",e,t,r)},t.visual_search=function(e,t,r={}){return o("get",["resources","visual_search"],a(e,"image_url","image_asset_id","text"),t,r)},t.search_folders=function(e,t,r={}){return r.content_type="json",o("post","folders/search",e,t,r)},t.update_resources_access_mode_by_prefix=function(e,t,r,n={}){return f(e,"prefix",t,r,n)},t.update_resources_access_mode_by_tag=function(e,t,r,n={}){return f(e,"tag",t,r,n)},t.update_resources_access_mode_by_ids=function(e,t,r,n={}){return f(e,"public_ids[]",t,r,n)},t.add_metadata_field=function(e,t,r={}){let n=a(e,"external_id","type","label","mandatory","default_value","validation","datasource","restrictions");return r.content_type="json",o("post",["metadata_fields"],n,t,r)},t.list_metadata_fields=function(e,t={}){return o("get",["metadata_fields"],{},e,t)},t.delete_metadata_field=function(e,t,r={}){return o("delete",["metadata_fields",e],{},t,r)},t.metadata_field_by_field_id=function(e,t,r={}){return o("get",["metadata_fields",e],{},t,r)},t.update_metadata_field=function(e,t,r,n={}){let i=a(t,"external_id","type","label","mandatory","default_value","validation","datasource","restrictions","default_disabled");return n.content_type="json",o("put",["metadata_fields",e],i,r,n)},t.update_metadata_field_datasource=function(e,t,r,n={}){let i=a(t,"values");return n.content_type="json",o("put",["metadata_fields",e,"datasource"],i,r,n)},t.delete_datasource_entries=function(e,t,r,n={}){return n.content_type="json",o("delete",["metadata_fields",e,"datasource"],{external_ids:t},r,n)},t.restore_metadata_field_datasource=function(e,t,r,n={}){return n.content_type="json",o("post",["metadata_fields",e,"datasource_restore"],{external_ids:t},r,n)},t.order_metadata_field_datasource=function(e,t,r,n,i={}){return i.content_type="json",o("post",["metadata_fields",e,"datasource","order"],{order_by:t,direction:r},n,i)},t.reorder_metadata_fields=function(e,t,r,n={}){return n.content_type="json",o("put",["metadata_fields","order"],{order_by:e,direction:t},r,n)},t.list_metadata_rules=function(e,t={}){return o("get",["metadata_rules"],{},e,t)},t.add_metadata_rule=function(e,t,r={}){return r.content_type="json",o("post",["metadata_rules"],a(e,"metadata_field_id","condition","result","name"),t,r)},t.update_metadata_rule=function(e,t,r,n={}){return n.content_type="json",o("put",["metadata_rules",e],a(t,"metadata_field_id","condition","result","name","state"),r,n)},t.delete_metadata_rule=function(e,t,r={}){return o("delete",["metadata_rules",e],{},t,r)},t.config=function(e,t={}){return o("get",["config"],a(t,"settings"),e,t)}},31394:(e,t,r)=>{let n=r(7099),o=r(34625),i=r(48520).defaults(n()),a=r(93972),{ensurePresenceOf:s}=o;e.exports=function(e,t,r,n,o){s({method:e,uri:t});let u=[i(o,"upload_prefix","https://api.cloudinary.com"),"v1_1","provisioning","accounts",i(o,"account_id")].concat(t).join("/");return a(e,r,{key:i(o,"provisioning_api_key"),secret:i(o,"provisioning_api_secret")},u,n,o)}},37031:(e,t,r)=>{let n=r(34625),o=r(7099),i=r(48520).defaults(o()),a=r(93972),{ensurePresenceOf:s}=n;e.exports={call_analysis_api:function(e,t,r,u,l){s({method:e,uri:t});let c=n.base_api_url_v2()(t,l),p={};return p=l.oauth_token||o().oauth_token?{oauth_token:i(l,"oauth_token")}:{key:i(l,"api_key"),secret:i(l,"api_secret")},l.content_type="json",a(e,r,p,c,u,l)}}},98691:(e,t,r)=>{let n=r(7099),o=r(34625),i=r(48520).defaults(n()),a=r(93972),{ensurePresenceOf:s}=o;e.exports=function(e,t,r,u,l){s({method:e,uri:t});let c=o.base_api_url_v1()(t,l);return a(e,r,l.oauth_token||n().oauth_token?{oauth_token:i(l,"oauth_token")}:{key:i(l,"api_key"),secret:i(l,"api_secret")},c,u,l)}},93972:(e,t,r)=>{let n=r(7099),o=r(/^http:/.test(n().upload_prefix)?13685:95687),i=r(63477),a=r(88454),s=r(57310),u=r(34625),l=r(48520).defaults(n()),{extend:c,includes:p,isEmpty:_}=u,d=n.api_proxy?new o.Agent(n.api_proxy):null;e.exports=function(e,t,r,f,m,h={}){let g;e=e.toUpperCase();let y=a.defer(),b=r.key,v=r.secret,x=r.oauth_token,A="application/x-www-form-urlencoded";"json"===h.content_type?(g=JSON.stringify(t),A="application/json"):g=i.stringify(t),"GET"===e&&(f+="?"+g);let E=s.parse(f);E=c(E,{method:e,headers:{"Content-Type":A,"User-Agent":u.getUserAgent()}}),x?E.headers.Authorization=`Bearer ${x}`:E.auth=b+":"+v,null!=h.agent&&(E.agent=h.agent);let w=h.api_proxy||n().api_proxy;_(w)||(!E.agent&&d?E.agent=d:E.agent?console.warn("Proxy is set, but request uses a custom agent, proxy is ignored."):E.agent=new o.Agent(w)),"GET"!==e&&(E.headers["Content-Length"]=Buffer.byteLength(g));let D=o.request(E,function(e){let{hide_sensitive:t=!1}=n(),r={...E};if(!0===t&&("auth"in r&&delete r.auth,"Authorization"in r.headers&&delete r.headers.Authorization),p([200,400,401,403,404,409,420,500],e.statusCode)){let t="",n=!1;e.on("data",function(e){return t+=e}),e.on("end",function(){let o;if(!n){try{o=JSON.parse(t)}catch(t){o={error:{message:"Server return invalid JSON response. Status Code "+e.statusCode}}}o.error?o.error.http_code=e.statusCode:(e.headers["x-featureratelimit-limit"]&&(o.rate_limit_allowed=parseInt(e.headers["x-featureratelimit-limit"])),e.headers["x-featureratelimit-reset"]&&(o.rate_limit_reset_at=new Date(e.headers["x-featureratelimit-reset"])),e.headers["x-featureratelimit-remaining"]&&(o.rate_limit_remaining=parseInt(e.headers["x-featureratelimit-remaining"]))),o.error?y.reject(Object.assign({request_options:r,query_params:g},o)):y.resolve(o),"function"==typeof m&&m(o)}}),e.on("error",function(t){n=!0;let o={error:{message:t,http_code:e.statusCode,request_options:r,query_params:g}};y.reject(o.error),"function"==typeof m&&m(o)})}else{let t={error:{message:"Server returned unexpected status code - "+e.statusCode,http_code:e.statusCode,request_options:r,query_params:g}};y.reject(t.error),"function"==typeof m&&m(t)}});return D.on("error",function(e){return y.reject(e),"function"==typeof m?m({error:e}):void 0}),D.setTimeout(l(h,"timeout",6e4)),"GET"!==e&&D.write(g),D.end(),y.promise}},97390:(e,t,r)=>{let n=r(6113),o=r(65387),i=/([ "#%&'/:;<=>?@[\]^`{|}~]+)/g;function a(e){return o(e,i).replace(/%../g,function(e){return e.toLowerCase()})}e.exports=function(e){var t,r;let o=e.token_name?e.token_name:"__cld_token__";if(null==e.expiration){if(null!=e.duration){let t=null!=e.start_time?e.start_time:Math.round(Date.now()/1e3);e.expiration=t+e.duration}else throw Error("Must provide either expiration or duration")}let i=[];null!=e.ip&&i.push(`ip=${e.ip}`),null!=e.start_time&&i.push(`st=${e.start_time}`),i.push(`exp=${e.expiration}`),null!=e.acl&&(!0===Array.isArray(e.acl)&&(e.acl=e.acl.join("!")),i.push(`acl=${a(e.acl)}`));let s=[...i];if(null!=e.url&&null==e.acl){let t=a(e.url);s.push(`url=${t}`)}let u=(t=s.join("~"),r=e.key,n.createHmac("sha256",Buffer.from(r,"hex")).update(t).digest("hex"));if(i.push(`hmac=${u}`),!e.url&&!e.acl)throw"authToken must contain either an acl or a url property";return`${o}=${i.join("~")}`}},40818:(e,t,r)=>{let n=Symbol.for("com.cloudinary.cache"),o=Symbol.for("com.cloudinary.cacheAdapter"),{ensurePresenceOf:i,generate_transformation_string:a}=r(34625);class s{get(e,t,r,n,o){}set(e,t,r,n,o,i){}flushAll(){}}let u={CacheAdapter:s,setAdapter(e){this.adapter&&console.warn("Overriding existing cache adapter"),this.adapter=e},getAdapter(){return this.adapter},get(e,t){if(!this.adapter)return;i({publicId:e});let r=a({...t});return this.adapter.get(e,t.type||"upload",t.resource_type||"image",r,t.format)},set(e,t,r){if(!this.adapter)return;i({publicId:e,value:r});let n=a({...t});return this.adapter.set(e,t.type||"upload",t.resource_type||"image",n,t.format,r)},flushAll(){if(this.adapter)return this.adapter.flushAll()}};Object.defineProperty(u,"instance",{get:()=>global[n]}),Object.defineProperty(u,"adapter",{get:()=>global[o],set(e){global[o]=e}}),Object.freeze(u),0>Object.getOwnPropertySymbols(global).indexOf(n)&&(global[n]=u),e.exports=u},33892:(e,t,r)=>{let n=r(46517);t.config=r(7099),t.utils=r(34625),t.uploader=r(47554),t.api=r(42621),t.analysis=r(86314);let o=r(31302);t.provisioning={account:o},t.PreloadedFile=r(7402),t.Cache=r(40818);let i=e.exports,a=i.utils.option_consume;t.url=function(e,t){return t=n.extend({},t),i.utils.url(e,t)};let{generateImageResponsiveAttributes:s,generateMediaAttr:u}=r(44876);t.image=function(e,t){let r=n.extend({},t),o=a(r,"srcset"),u=a(r,"attributes",{}),l=i.utils.url(e,r);"html_width"in r&&(r.width=a(r,"html_width")),"html_height"in r&&(r.height=a(r,"html_height"));let c=a(r,"client_hints",i.config().client_hints),p=a(r,"responsive"),_=a(r,"hidpi");if((p||_)&&!c){r["data-src"]=l;let e=[p?"cld-responsive":"cld-hidpi"],t=a(r,"class");t&&e.push(t),r.class=e.join(" "),"blank"===(l=a(r,"responsive_placeholder",i.config().responsive_placeholder))&&(l=i.BLANK)}let d="<img ";l&&(d+="src='"+l+"' ");let f={};return i.utils.isString(o)?f.srcset=o:f=s(e,u,o,t),i.utils.isEmpty(f)||(delete r.width,delete r.height),d+=i.utils.html_attrs(n.extend(r,f,u))+"/>"},t.video=function(e,t){t=n.extend({},t),e=e.replace(/\.(mp4|ogv|webm)$/,"");let r=a(t,"source_types",[]),o=a(t,"source_transformation",{}),s=a(t,"sources",[]),u=a(t,"fallback_content","");0===r.length&&(r=i.utils.DEFAULT_VIDEO_SOURCE_TYPES);let l=n.cloneDeep(t);l.hasOwnProperty("poster")?n.isPlainObject(l.poster)&&(l.poster.hasOwnProperty("public_id")?l.poster=i.utils.url(l.poster.public_id,l.poster):l.poster=i.utils.url(e,n.extend({},i.utils.DEFAULT_POSTER_OPTIONS,l.poster))):l.poster=i.utils.url(e,n.extend({},i.utils.DEFAULT_POSTER_OPTIONS,t)),l.poster||delete l.poster;let c="<video ";l.hasOwnProperty("resource_type")||(l.resource_type="video");let p=n.isArray(r)&&r.length>1,_=n.isArray(s)&&s.length>0,d=e;p||_||(d=d+"."+i.utils.build_array(r)[0]);let f=i.utils.url(d,l);return p||_||(l.src=f),l.hasOwnProperty("html_width")&&(l.width=a(l,"html_width")),l.hasOwnProperty("html_height")&&(l.height=a(l,"html_height")),c=c+i.utils.html_attrs(l)+">",p&&!_&&(s=r.map(e=>({type:e,transformations:o[e]||{}}))),n.isArray(s)&&s.length>0&&(c+=s.map(e=>{let r=e.type,o=e.codecs,a=e.transformations||{};return f=i.utils.url(d+"."+r,n.extend({resource_type:"video"},n.cloneDeep(t),n.cloneDeep(a))),i.utils.create_source_tag(f,r,o)}).join("")),`${c}${u}</video>`},t.source=function(e,t={}){let r=i.utils.extend({},t.srcset,i.config().srcset),n=t.attributes||{};return i.utils.extend(n,s(e,n,r,t)),n.srcset||(n.srcset=i.url(e,t)),!n.media&&t.media&&(n.media=u(t.media)),`<source ${i.utils.html_attrs(n)}>`},t.picture=function(e,t={}){let r=t.sources||[];return t=i.utils.clone(t),delete t.sources,i.utils.patchFetchFormat(t),"<picture>"+r.map(r=>{let n=function(e,t=[]){let r=i.utils.extractUrlParams(e),n=i.utils.extractTransformationParams(e);return t=i.utils.build_array(t),r.transformation=[n,...t],r}(t,r.transformation);return n.media=r,i.source(e,n)}).join("")+i.image(e,t)+"</picture>"},t.cloudinary_js_config=i.utils.cloudinary_js_config,t.CF_SHARED_CDN=i.utils.CF_SHARED_CDN,t.AKAMAI_SHARED_CDN=i.utils.AKAMAI_SHARED_CDN,t.SHARED_CDN=i.utils.SHARED_CDN,t.BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.v2=r(6165)},7099:(e,t,r)=>{let n;let o=r(57310),i=r(48390),a=r(75795),s=r(97026),u=r(22133),l=r(89699),c=r(33644);function p(e,t={}){return c(e).forEach(([e,r])=>{void 0!==r&&(t[e]=r)}),t}e.exports=function(e,t){if(null==n||!0===e){null==n?n={}:Object.keys(n).forEach(e=>delete n[e]);let e=process.env.CLOUDINARY_URL,t=process.env.CLOUDINARY_ACCOUNT_URL,r=process.env.CLOUDINARY_API_PROXY;if(e&&!e.toLowerCase().startsWith("cloudinary://"))throw Error("Invalid CLOUDINARY_URL protocol. URL should begin with 'cloudinary://'");if(t&&!t.toLowerCase().startsWith("account://"))throw Error("Invalid CLOUDINARY_ACCOUNT_URL protocol. URL should begin with 'account://'");l(r)||p({api_proxy:r},n),[e,t].forEach(e=>{if(e){let t,r;p((t={},"cloudinary:"===(r=o.parse(e,!0)).protocol?t=Object.assign({},t,{cloud_name:r.host,api_key:r.auth&&r.auth.split(":")[0],api_secret:r.auth&&r.auth.split(":")[1],private_cdn:null!=r.pathname,secure_distribution:r.pathname&&r.pathname.substring(1)}):"account:"===r.protocol&&(t=Object.assign({},t,{account_id:r.host,provisioning_api_key:r.auth&&r.auth.split(":")[0],provisioning_api_secret:r.auth&&r.auth.split(":")[1]})),t),n),function(e,t={}){let r=o.parse(e,!0);null!=r.query&&c(r.query).forEach(([e,r])=>(function(e,t,r){let n=t.split(/[\[\]]+/).filter(e=>e.length),o=e,i=n.pop();for(let e=0;e<n.length;e++){let t=n[e],r=o[t];null==r&&(r={},o[t]=r),o=r}return o[i]=r,e})(t,e,r))}(e,n)}})}if(u(t)){if(s(e))return n[e];a(e)&&i(n,e)}else n[e]=t;return n}},7402:(e,t,r)=>{let n,o;o=r(34625),r(7099),n=/^([^\/]+)\/([^\/]+)\/v(\d+)\/([^#]+)#([^\/]+)$/;class i{constructor(e){let t,r;if(!(t=e.match(n)))throw"Invalid preloaded file info";this.resource_type=t[1],this.type=t[2],this.version=t[3],this.filename=t[4],this.signature=t[5],r=i.split_format(this.filename),this.public_id=r[0],this.format=r[1]}is_valid(){return o.verify_api_response_signature(this.public_id,this.version,this.signature)}static split_format(e){let t;return -1===(t=e.lastIndexOf("."))?[e,null]:[e.substr(0,t),e.substr(t+1)]}identifier(){return`v${this.version}/${this.filename}`}toString(){return`${this.resource_type}/${this.type}/v${this.version}/${this.filename}#${this.signature}`}toJSON(){let e={};return Object.getOwnPropertyNames(this).forEach(t=>{let r=this[t];"function"!=typeof r&&(e[t]=r)}),e}}e.exports=i},31302:(e,t,r)=>{let n=r(34625),o=r(31394),{pickOnlyExistingValues:i}=n;e.exports={sub_accounts:function(e,t=[],r,n={},i){return o("GET",["sub_accounts"],{enabled:e,ids:t,prefix:r},i,n)},create_sub_account:function(e,t,r,n,i,a={},s){return a.content_type="json",o("POST",["sub_accounts"],{cloud_name:t,name:e,custom_attributes:r,enabled:n,base_sub_account_id:i},s,a)},delete_sub_account:function(e,t={},r){return o("DELETE",["sub_accounts",e],{},r,t)},sub_account:function(e,t={},r){return o("GET",["sub_accounts",e],{},r,t)},update_sub_account:function(e,t,r,n,i,a={},s){return a.content_type="json",o("PUT",["sub_accounts",e],{cloud_name:r,name:t,custom_attributes:n,enabled:i},s,a)},user:function(e,t={},r){return o("GET",["users",e],{},r,t)},users:function(e,t,r,n,a={},s){return o("GET",["users"],i({ids:t,pending:e,prefix:r,sub_account_id:n},"ids","pending","prefix","sub_account_id"),s,a)},user_group:function(e,t={},r){return o("GET",["user_groups",e],{},r,t)},user_groups:function(e={},t){return o("GET",["user_groups"],{},t,e)},user_group_users:function(e,t={},r){return o("GET",["user_groups",e,"users"],{},r,t)},remove_user_from_group:function(e,t,r={},n){return o("DELETE",["user_groups",e,"users",t],{},n,r)},delete_user:function(e,t={},r){return o("DELETE",["users",e],{},r,t)},update_user_group:function(e,t,r={},n){return o("PUT",["user_groups",e],{name:t},n,r)},update_user:function(e,t,r,n,i,a={},s){return a.content_type="json",o("PUT",["users",e],{name:t,email:r,role:n,sub_account_ids:i},s,a)},create_user:function(e,t,r,n,i={},a){return i.content_type="json",o("POST",["users"],{name:e,email:t,role:r,sub_account_ids:n},a,i)},create_user_group:function(e,t={},r){return t.content_type="json",o("POST",["user_groups"],{name:e},r,t)},add_user_to_group:function(e,t,r={},n){return o("POST",["user_groups",e,"users",t],{},n,r)},delete_user_group:function(e,t={},r){return o("DELETE",["user_groups",e],{},r,t)},access_keys:function(e,t={},r){return o("GET",["sub_accounts",e,"access_keys"],i({page_size:t.page_size,page:t.page,sort_by:t.sort_by,sort_order:t.sort_order},"page_size","page","sort_by","sort_order"),r,t)},generate_access_key:function(e,t={},r){let n=i({name:t.name,enabled:t.enabled},"name","enabled");return t.content_type="json",o("POST",["sub_accounts",e,"access_keys"],n,r,t)},update_access_key:function(e,t,r={},n){let a=i({name:r.name,enabled:r.enabled},"name","enabled");return r.content_type="json",o("PUT",["sub_accounts",e,"access_keys",t],a,n,r)},delete_access_key:function(e,t,r={},n){return o("DELETE",["sub_accounts",e,"access_keys",t],{},n,r)},delete_access_key_by_name:function(e,t={},r){return o("DELETE",["sub_accounts",e,"access_keys"],{name:t.name},r,t)}}},52503:(e,t,r)=>{let n=r(12781).Transform;class o extends n{constructor(e){super(),this.boundary=e.boundary}_transform(e,t,r){let n=Buffer.isBuffer(e)?e:Buffer.from(e,t);this.push(n),r()}_flush(e){return this.push(Buffer.from("\r\n","ascii")),this.push(Buffer.from("--"+this.boundary+"--","ascii")),e()}}e.exports=o},47554:(e,t,r)=>{let n=r(57147),{extname:o,basename:i}=r(71017),a=r(88454),s=r(12781).Writable,u=r(57310),{upload_prefix:l}=r(7099)(),c=r(l&&"http:"===l.slice(0,5)?13685:95687),p=r(40818),_=r(34625),d=r(52503),f=r(7099),m=r(48520).defaults(f()),h=f.api_proxy?new c.Agent(f.api_proxy):null,{build_upload_params:g,extend:y,includes:b,isEmpty:v,isObject:x,isRemoteUrl:A,merge:E,pickOnlyExistingValues:w}=_;t.unsigned_upload_stream=function(e,r,n={}){return t.upload_stream(r,E(n,{unsigned:!0,upload_preset:e}))},t.upload_stream=function(e,r={}){return t.upload(null,e,y({stream:!0},r))},t.unsigned_upload=function(e,r,n,o={}){return t.upload(e,n,E(o,{unsigned:!0,upload_preset:r}))},t.upload=function(e,t,r={}){return B("upload",t,r,function(){let t=g(r);return A(e)?[t,{file:e}]:[t,{},e]})},t.upload_large=function(e,r,n={}){return null!=e&&A(e)?t.upload(e,r,n):(null==e||n.filename||(n.filename=e.split(/(\\|\/)/g).pop().replace(/\.[^/.]+$/,"")),t.upload_chunked(e,r,y({resource_type:"raw"},n)))},t.upload_chunked=function(e,r,o){let i=n.createReadStream(e),a=t.upload_chunked_stream(r,o);return i.pipe(a)};class D extends s{constructor(e){super(e),this.chunk_size=null!=e.chunk_size?e.chunk_size:2e7,this.buffer=Buffer.alloc(0),this.active=!0,this.on("finish",()=>{this.active&&this.emit("ready",this.buffer,!0,function(){})})}_write(e,t,r){if(this.active||r(),this.buffer.length+e.length<=this.chunk_size)this.buffer=Buffer.concat([this.buffer,e],this.buffer.length+e.length),r();else{let n=this.chunk_size-this.buffer.length;this.buffer=Buffer.concat([this.buffer,e.slice(0,n)],this.buffer.length+n),this.emit("ready",this.buffer,!1,o=>{if(this.active=o,this.active){let o=e.slice(n);this.buffer=Buffer.alloc(0),this._write(o,t,r)}})}}}t.upload_large_stream=function(e,r,n={}){return t.upload_chunked_stream(r,y({resource_type:"raw"},n))},t.upload_chunked_stream=function(e,t={}){(t=y({},t,{stream:!0})).x_unique_upload_id=_.random_public_id();let r=g(t),n=new D({chunk_size:null!=t.chunk_size?t.chunk_size:t.part_size}),o=0;return n.on("ready",function(n,i,a){let s=o;o+=n.length,t.content_range=`bytes ${s}-${o-1}/${i?o:-1}`,r.timestamp=_.timestamp();let u=B("upload",function(t){let r=null!=t.error||i;return r&&"function"==typeof e&&e(t),a(!r)},t,function(){return[r,{},n]});return u.write(n,"buffer",function(){return u.end()})}),n},t.explicit=function(e,t,r={}){return B("explicit",t,r,function(){return _.build_explicit_api_params(e,r)})},t.create_archive=function(e,t={},r=null){return B("generate_archive",e,t,function(){let e=_.archive_params(t);return r&&(e.target_format=r),[e]})},t.create_zip=function(e,r={}){return t.create_archive(e,r,"zip")},t.create_slideshow=function(e,t){return e.resource_type=m(e,"resource_type","video"),B("create_slideshow",t,e,function(){let t=_.generate_transformation_string(y({},e.manifest_transformation)),r=_.generate_transformation_string(y({},m(e,"transformation",{})));return[{timestamp:_.timestamp(),manifest_transformation:t,upload_preset:e.upload_preset,overwrite:e.overwrite,public_id:e.public_id,notification_url:e.notification_url,manifest_json:e.manifest_json,tags:e.tags,transformation:r}]})},t.destroy=function(e,t,r={}){return B("destroy",t,r,function(){return[{timestamp:_.timestamp(),type:r.type,invalidate:r.invalidate,public_id:e,notification_url:r.notification_url}]})},t.rename=function(e,t,r,n={}){return B("rename",r,n,function(){return[{timestamp:_.timestamp(),type:n.type,from_public_id:e,to_public_id:t,overwrite:n.overwrite,invalidate:n.invalidate,to_type:n.to_type,context:n.context,metadata:n.metadata,notification_url:n.notification_url}]})};let k=["public_id","font_family","font_size","font_color","text_align","font_weight","font_style","background","opacity","text_decoration","font_hinting","font_antialiasing"];function C(e,t,r=[],n,o={}){return B("tags",n,o,function(){let n={timestamp:_.timestamp(),public_ids:_.build_array(r),command:t,type:o.type};return null!=e&&(n.tag=e),[n]})}function j(e,t,r=[],n,o={}){return B("context",n,o,function(){let n={timestamp:_.timestamp(),public_ids:_.build_array(r),command:t,type:o.type};return null!=e&&(n.context=_.encode_context(e)),[n]})}function B(e,t,r,s){"function"!=typeof t&&(t=function(){});let l=!r.disable_promises,m=a.defer();null==r&&(r={});let[g,A,w]=s.call();g=y(g=_.process_request_params(g,r),A);let D=_.api_url(e,r),k=_.random_public_id(),C=!1,j=function(e,t,r,o,a,s){let l;let p=Buffer.from("--"+r+"--","ascii"),m=s.oauth_token||f().oauth_token;if(null!=o||s.stream){let e=s.stream?s.filename?s.filename:"file":i(o);l=Buffer.from(`--${r}\r
Content-Disposition: form-data; name="file"; filename="${e}"\r
Content-Type: application/octet-stream\r
\r
`,"binary")}let g=u.parse(e),b={"Content-Type":`multipart/form-data; boundary=${r}`,"User-Agent":_.getUserAgent()};null!=s.content_range&&(b["Content-Range"]=s.content_range),null!=s.x_unique_upload_id&&(b["X-Unique-Upload-Id"]=s.x_unique_upload_id),null!==s.extra_headers&&(b=E(b,s.extra_headers)),null!=m&&(b.Authorization=`Bearer ${m}`),g=y(g,{method:"POST",headers:b}),null!=s.agent&&(g.agent=s.agent);let x=s.api_proxy||f().api_proxy;v(x)||(!g.agent&&h?g.agent=h:g.agent?console.warn("Proxy is set, but request uses a custom agent, proxy is ignored."):g.agent=new c.Agent(x));let A=c.request(g,a),w=new d({boundary:r});w.pipe(A);let D=!1;return(A.on("error",function(e){return D&&(e={message:"Request Timeout",http_code:499,name:"TimeoutError"}),a({error:e})}),A.setTimeout(null!=s.timeout?s.timeout:6e4,function(){return D=!0,A.abort()}),t.forEach(e=>A.write(e)),s.stream)?(A.write(l),w):(null!=o?(A.write(l),n.createReadStream(o).on("error",function(e){return a({error:e}),A.abort()}).pipe(w)):(A.write(p),A.end()),!0)}(D,_.hashToParameters(g).filter(([e,t])=>null!=t).map(([e,t])=>Buffer.from(`--${k}\r
Content-Disposition: form-data; name="${e}"\r
\r
${t}\r
`,"utf8")),k,w,function(e){if(C);else if(e.error)C=!0,l&&m.reject(e),t(e);else if(b([200,400,401,404,420,500],e.statusCode)){let n="";e.on("data",e=>n+=e),e.on("end",()=>{let i;C||((i=function(e,t){let r="";try{(r=JSON.parse(e)).error&&!r.error.name&&(r.error.name="Error")}catch(e){r={error:{message:`Server return invalid JSON response. Status Code ${t.statusCode}. ${e}`,name:"Error"}}}return r}(n,e)).error?(i.error.http_code=e.statusCode,l&&m.reject(i.error)):(function(e,{type:t,resource_type:r}){e.responsive_breakpoints&&e.responsive_breakpoints.forEach(({transformation:n,url:i,breakpoints:a})=>p.set(e.public_id,{type:t,resource_type:r,raw_transformation:n,format:o(a[0].url).slice(1)},a.map(e=>e.width)))}(i,r),l&&m.resolve(i)),t(i))}),e.on("error",e=>{C=!0,l&&m.reject(e),t({error:e})})}else{let r={message:`Server returned unexpected status code - ${e.statusCode}`,http_code:e.statusCode,name:"UnexpectedResponse"};l&&m.reject(r),t({error:r})}},r);return x(j)?j:l?m.promise:void 0}t.text=function(e,t,r={}){return B("text",t,r,function(){let t=w(r,...k);return[{timestamp:_.timestamp(),text:e,...t}]})},t.generate_sprite=function(e,t,r={}){return B("sprite",t,r,function(){return[_.build_multi_and_sprite_params(e,r)]})},t.download_generated_sprite=function(e,t={}){return _.api_download_url("sprite",_.build_multi_and_sprite_params(e,t),t)},t.download_multi=function(e,t={}){return _.api_download_url("multi",_.build_multi_and_sprite_params(e,t),t)},t.multi=function(e,t,r={}){return B("multi",t,r,function(){return[_.build_multi_and_sprite_params(e,r)]})},t.explode=function(e,t,r={}){return B("explode",t,r,function(){let t=_.generate_transformation_string(y({},r));return[{timestamp:_.timestamp(),public_id:e,transformation:t,format:r.format,type:r.type,notification_url:r.notification_url}]})},t.add_tag=function(e,t=[],r,n={}){return C(e,_.option_consume("exclusive",n)?"set_exclusive":"add",t,r,n)},t.remove_tag=function(e,t=[],r,n={}){return C(e,"remove",t,r,n)},t.remove_all_tags=function(e=[],t,r={}){return C(null,"remove_all",e,t,r)},t.replace_tag=function(e,t=[],r,n={}){return C(e,"replace",t,r,n)},t.add_context=function(e,t=[],r,n={}){return j(e,"add",t,r,n)},t.remove_all_context=function(e=[],t,r={}){return j(null,"remove_all",e,t,r)},t.direct_upload=function(e,t={}){let r=g(y({callback:e},t));return{hidden_fields:r=_.process_request_params(r,t),form_attrs:{action:_.api_url("upload",t),method:"POST",enctype:"multipart/form-data"}}},t.upload_tag_params=function(e={}){let t=g(e);return JSON.stringify(t=_.process_request_params(t,e))},t.upload_url=function(e={}){return null==e.resource_type&&(e.resource_type="auto"),_.api_url("upload",e)},t.image_upload_tag=function(e,r={}){let n=r.html||{},o=y({type:"file",name:"file","data-url":t.upload_url(r),"data-form-data":t.upload_tag_params(r),"data-cloudinary-field":e,"data-max-chunk-size":r.chunk_size,class:[n.class,"cloudinary-fileupload"].join(" ")},n);return`<input ${_.html_attrs(o)}/>`},t.unsigned_image_upload_tag=function(e,r,n={}){return t.image_upload_tag(e,E(n,{unsigned:!0,upload_preset:r}))},t.update_metadata=function(e,t,r,n={}){return B("metadata",r,n,function(){return[{metadata:_.encode_context(e),public_ids:_.build_array(t),timestamp:_.timestamp(),type:n.type,clear_invalid:n.clear_invalid}]})}},20786:(e,t,r)=>{let n=r(1909),o=r(52143),i=r(84688);e.exports=e=>{let t="",r=e.split(".").length,a=parseInt(n(e).split(".").join("")).toString(2);if((a=o(a,6*r,"0")).length%6!=0)throw"Version must be smaller than 43.21.26)";return a.match(/.{1,6}/g).forEach(e=>{t+=i[e]}),t}},12247:(e,t,r)=>{let n=r(57147),o=r(71017);e.exports=function(e="default",t="default"){let r="default"===e?function(){let e=o.join(__dirname,"../../../package.json");try{let t=n.readFileSync(e,"utf-8");return JSON.parse(t).version}catch(e){if("ENOENT"===e.code)return"0.0.0";return"n/a"}}():e,i=process.version.slice(1);return{sdkSemver:r,techVersion:"default"===t?i:t,sdkCode:"M",product:"A"}}},51989:(e,t,r)=>{let n=r(54706),o=r(20786);e.exports={getSDKAnalyticsSignature:function(e={}){try{let t=n(e.techVersion),r=o(e.sdkSemver),i=o(t),a=e.feature,s=e.sdkCode,u=e.product;return`B${u}${s}${r}${i}${a}`}catch(e){return"E"}},getAnalyticsOptions:function(e){let t={sdkSemver:e.sdkSemver,techVersion:e.techVersion,sdkCode:e.sdkCode,product:e.product,feature:"0"};return e.urlAnalytics?(e.accessibility&&(t.feature="D"),"lazy"===e.loading&&(t.feature="C"),e.responsive&&(t.feature="A"),e.placeholder&&(t.feature="B"),t):{}}}},54706:e=>{e.exports=e=>{let t=e.split(".");return`${t[0]}.${t[1]}`}},1909:(e,t,r)=>{let n=r(52143);e.exports=e=>{if(e.split(".").length<2)throw Error("invalid semVer, must have at least two segments");return e.split(".").reverse().map(e=>n(e,2,"0")).join(".")}},52143:e=>{e.exports=(e,t,r)=>(t>>=0,r=String(void 0!==r?r:" "),e.length>t)?String(e):((t-=e.length)>r.length&&(r+=function(e,t){let r="";for(;t>0;)r+=e,t--;return r}(r,t/r.length)),r.slice(0,t)+String(e))},75903:e=>{e.exports={DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION:{width:"auto",crop:"limit"},DEFAULT_POSTER_OPTIONS:{format:"jpg",resource_type:"video"},DEFAULT_VIDEO_SOURCE_TYPES:["webm","mp4","ogv"],CONDITIONAL_OPERATORS:{"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},PREDEFINED_VARS:{aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialHeight:"ih",initialWidth:"iw",initial_duration:"idu",initialDuration:"idu",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},LAYER_KEYWORD_PARAMS:{font_weight:"normal",font_style:"normal",text_decoration:"none",text_align:null,stroke:"none"},TRANSFORMATION_PARAMS:["angle","aspect_ratio","audio_codec","audio_frequency","background","bit_rate","border","color","color_space","crop","default_image","delay","density","dpr","duration","effect","end_offset","fetch_format","flags","fps","gravity","height","if","keyframe_interval","offset","opacity","overlay","page","prefix","quality","radius","raw_transformation","responsive_width","size","start_offset","streaming_profile","transformation","underlay","variables","video_codec","video_sampling","width","x","y","zoom"],SIMPLE_PARAMS:[["audio_codec","ac"],["audio_frequency","af"],["bit_rate","br"],["color_space","cs"],["default_image","d"],["delay","dl"],["density","dn"],["duration","du"],["end_offset","eo"],["fetch_format","f"],["gravity","g"],["page","pg"],["prefix","p"],["start_offset","so"],["streaming_profile","sp"],["video_codec","vc"],["video_sampling","vs"]],UPLOAD_PREFIX:"https://api.cloudinary.com",SUPPORTED_SIGNATURE_ALGORITHMS:["sha1","sha256"],DEFAULT_SIGNATURE_ALGORITHM:"sha1"}},79076:(e,t,r)=>{let n=r(85587);e.exports=function(e){let t,r,o,i,a;for(i=0,a=0,t=-1,r=0,o=(e=n(e)).length;r<o;)a=(t^e.charCodeAt(r))&255,t=t>>>8^(i="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*a,8)),r++;return(t^=-1)<0&&(t+=4294967296),t}},46169:e=>{e.exports.base64Encode=function(e){return e instanceof Buffer||(e=Buffer.from(String(e),"binary")),e.toString("base64")}},92423:(e,t,r)=>{let{base64Encode:n}=r(46169);e.exports.base64EncodeURL=function(e){try{e=decodeURI(e)}catch(e){}return n(e=encodeURI(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}},84688:(e,t,r)=>{let n=r(52143),o=0,i={};[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(e=>{let t=o.toString(2);i[t=n(t,6,"0")]=e,o++}),e.exports=i},3252:(e,t,r)=>{let n=r(35599),o=r(49760);e.exports=function(e){return n((e=o(e))[0])||(e=[e]),e.map(e=>o(e).join(",")).join("|")}},65387:e=>{e.exports=function(e,t=/([^a-zA-Z0-9_.\-\/:]+)/g){return e.replace(t,function(e){return e.split("").map(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}).join("")})}},48520:e=>{function t(e){return function(t,r,n){let o;if(void 0!==t[r])o=t[r];else if(void 0!==e[r])o=e[r];else if(void 0!==n)o=n;else throw Error(`Must supply ${r}`);return o}}e.exports=t({}),e.exports.defaults=t},35194:e=>{e.exports=function(e){let t=Object.keys(e).filter(t=>void 0===e[t]);t.length&&console.error(t.join(",")+" cannot be undefined")}},33644:e=>{e.exports=Object.entries?Object.entries:function(e){let t=Object.keys(e),r=t.length,n=Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n}},61941:e=>{e.exports=function(e){let t=e.breakpoints||[];if(t.length)return t;let[r,n,o]=[e.min_width,e.max_width,e.max_images].map(Number);if([r,n,o].some(Number.isNaN))throw"Either (min_width, max_width, max_images) or breakpoints must be provided to the image srcset attribute";if(r>n)throw"min_width must be less than max_width";if(o<=0)throw"max_images must be a positive integer";1===o&&(r=n);let i=Math.ceil((n-r)/Math.max(o-1,1));for(let e=r;e<n;e+=i)t.push(e);return t.push(n),t}},34625:(e,t,r)=>{let n=r(6113),o=r(63477),i=r(57310).parse,a=r(39131),s=r(22265),u=r(25716);r(15452);let l=r(83824),c=r(53707),p=r(11516),_=r(59283),d=r(20770),f=r(48390),m=r(9368),h=r(41238),g=r(35599),y=r(89699),b=r(27078),v=r(75795),x=r(97026),A=r(22133),E=r(65387),w=r(66459),D=r(49760),{base64EncodeURL:k}=r(92423),C=r(3252),j=r(7099),B=r(97390),S=r(79076),F=r(35194),O=r(48520).defaults(j()),$=r(33644),R=r(47490),T=r(12247),{getAnalyticsOptions:q,getSDKAnalyticsSignature:N}=r(51989);t=e.exports;let P=e.exports;try{P.VERSION=r(93196).i8}catch(e){P.VERSION=""}t.CF_SHARED_CDN="d3jpl91pxevbkh.cloudfront.net",t.OLD_AKAMAI_SHARED_CDN="cloudinary-a.akamaihd.net",t.AKAMAI_SHARED_CDN="res.cloudinary.com",t.SHARED_CDN=t.AKAMAI_SHARED_CDN,t.USER_AGENT=`CloudinaryNodeJS/${t.VERSION} (Node ${process.versions.node})`,t.userPlatform="";let{DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION:I,DEFAULT_POSTER_OPTIONS:U,DEFAULT_VIDEO_SOURCE_TYPES:L,CONDITIONAL_OPERATORS:z,PREDEFINED_VARS:M,LAYER_KEYWORD_PARAMS:G,TRANSFORMATION_PARAMS:Z,SIMPLE_PARAMS:H,UPLOAD_PREFIX:V,SUPPORTED_SIGNATURE_ALGORITHMS:Y,DEFAULT_SIGNATURE_ALGORITHM:J}=r(75903);function K(e){if(!x(e)||0===e.length||e.match(/^!.+!$/))return e;let t=RegExp("((\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\^|\\+|\\*)(?=[ _]))","g");e=e.replace(t,e=>z[e]);let r="("+Object.keys(M).map(e=>`:${e}|${e}`).join("|")+")",n=RegExp(`(\\$_*[^_ ]+)|${r}`,"g");return(e=e.replace(n,e=>M[e]||e)).replace(/[ _]+/g,"_")}function W(e){if(!v(e))return e;if("remote"===e.function_type){let t=k(e.source);return[e.function_type,t].join(":")}return[e.function_type,e.source].join(":")}function Q(e){if(x(e)){let t=null,r="",n="fetch:";if(e.startsWith(n))r=e.substring(n.length);else{if(-1===e.indexOf(":fetch:",0))return e;let n=e.split(":",3);t=n[0],r=n[2]}e={url:r,type:"fetch"},t&&(e.resource_type=t)}if("object"!=typeof e)return e;let{resource_type:t,text:r,type:n,public_id:o,format:i,url:s}=e,u=[];if(!y(r)&&y(t)&&(t="text"),!y(s)&&y(n)&&(n="fetch"),y(o)||y(i)||(o=`${o}.${i}`),y(o)&&"text"!==t&&"fetch"!==n)throw Error("Must supply public_id for non-text overlay");if(y(t)||"image"===t||u.push(t),y(n)||"upload"===n||u.push(n),"text"===t||"subtitles"===t){if(y(o)&&y(r))throw Error("Must supply either text or public_in in overlay");let t=function(e){let t=[],r="";if(!y(e.text_style))return e.text_style;if(Object.keys(G).forEach(r=>{let n=G[r],o=e[r]||n;o!==n&&t.push(o)}),Object.keys(e).forEach(r=>{("letter_spacing"===r||"line_spacing"===r)&&t.push(`${r}_${e[r]}`),"font_hinting"===r&&t.push(`${r.split("_").pop()}_${e[r]}`),"font_antialiasing"===r&&t.push(`antialias_${e[r]}`)}),e.hasOwnProperty("font_size")||!y(t)){if(!e.font_size)throw Error("Must supply font_size for text in overlay/underlay");if(!e.font_family)throw Error("Must supply font_family for text in overlay/underlay");t.unshift(e.font_size),t.unshift(e.font_family),r=a(t).join("_")}return r}(e);if(y(t)||u.push(t),y(o)||(o=o.replace("/",":"),u.push(o)),!y(r)){let e=new RegExp(/(\$\([a-zA-Z]\w+\))/g),t=r.split(e).filter(e=>e).map(t=>{let r=e[Symbol.match](t);return r&&r.length>0?t:X(X(encodeURIComponent(E(t,new RegExp(/([,\/])/g))),"(","%28"),")","%29")});u.push(t.join(""))}}else if("fetch"===n){let e=k(s);u.push(e)}else o=o.replace("/",":"),u.push(o);return u.join(":")}function X(e,t,r=""){return e.split(t).join(r)}function ee(e){return e.toString().replace(/([=|])/g,"\\$&")}function et(e){var t;let r;if(P.isString(e))return e;if(g(e))return e.map(e=>P.generate_transformation_string(d(e))).filter(P.present).join("/");let n=w(e,"responsive_width",j().responsive_width),o=e.width,i=e.height,u=w(e,"size");u&&([o,i]=u.split("x"),[e.width,e.height]=[o,i]);let c=e.overlay||e.underlay,p=w(e,"crop"),_=D(w(e,"angle")).join("."),f=c||P.present(_)||"fit"===p||"limit"===p||n;o&&(0===o.toString().indexOf("auto")||f||1>parseFloat(o))&&delete e.width,i&&(f||1>parseFloat(i))&&delete e.height;let h=w(e,"background");h=h&&h.replace(/^#/,"rgb:");let y=w(e,"color");y=y&&y.replace(/^#/,"rgb:");let b=D(w(e,"transformation",[])),x=[];b.some(v)?b=b.map(e=>P.generate_transformation_string(v(e)?d(e):{transformation:e})):(x=b.join("."),b=[]);let A=w(e,"effect");g(A)?A=A.join(":"):v(A)&&(A=$(A).map(([e,t])=>`${e}:${t}`));let E=w(e,"border");v(E)?E=`${null!=E.width?E.width:2}px_solid_${(null!=E.color?E.color:"black").replace(/^#/,"rgb:")}`:/^\d+$/.exec(E)&&(e.border=E,E=void 0);let k=D(w(e,"flags")).join("."),C=w(e,"dpr",j().dpr);null!=e.offset&&([e.start_offset,e.end_offset]=function(e){switch(e.constructor){case String:if(!e_.test(e))return e;return e.split("..");case Array:return[s(e),l(e)];default:return[null,null]}}(w(e,"offset"))),e.start_offset&&(e.start_offset=K(e.start_offset)),e.end_offset&&(e.end_offset=K(e.end_offset));let B=Q(w(e,"overlay")),S=function(e){if(!e)return e;if(g(e)||(e=[e]),0===e.length||e.length>4)throw Error("Radius array should contain between 1 and 4 values");if(e.findIndex(e=>null===e)>=0)throw Error("Corner: Cannot be null");return e.map(K).join(":")}(w(e,"radius")),F=Q(w(e,"underlay")),O=(t=w(e,"if"))?"if_"+K(t):t,R=W(w(e,"custom_function")),T=(r=W(w(e,"custom_pre_function")),P.isString(r)?`pre:${r}`:null),q=w(e,"fps");g(q)&&(q=q.join("-"));let N={a:K(_),ar:K(w(e,"aspect_ratio")),b:h,bo:E,c:p,co:y,dpr:K(C),e:K(A),fl:k,fn:R||T,fps:q,h:K(i),ki:K(w(e,"keyframe_interval")),l:B,o:K(w(e,"opacity")),q:K(w(e,"quality")),r:S,t:x,u:F,w:K(o),x:K(w(e,"x")),y:K(w(e,"y")),z:K(w(e,"zoom"))};H.forEach(([t,r])=>{let n=w(e,t);void 0!==n&&(N[r]=n)}),null!=N.vc&&(N.vc=function(e){switch(e.constructor){case Object:{let t="";return"codec"in e&&(t=e.codec,"profile"in e&&(t+=":"+e.profile,"level"in e&&(t+=":"+e.level))),t}case String:return e;default:return null}}(N.vc)),["so","eo","du"].forEach(e=>{void 0!==N[e]&&(N[e]=function(e){let t=String(e).match(ep);if(t){let r=t[5]?"p":"";e=`${t[1]||t[4]}${r}`}return e}(N[e]))});let U=w(e,"variables",[]),L=$(e).filter(([e,t])=>e.startsWith("$")).map(([t,r])=>(delete e[t],`${t}_${K(r)}`)).sort().concat(U.map(([e,t])=>`${e}_${K(t)}`)).join(","),z=$(N).filter(([e,t])=>P.present(t)).map(([e,t])=>e+"_"+t).sort().join(",");if(z=a([O,L,z,w(e,"raw_transformation")]).join(","),b.push(z),z=b,n){let e=j().responsive_width_transformation||I;z.push(P.generate_transformation_string(d(e)))}return(String(o).startsWith("auto")||n)&&(e.responsive=!0),"auto"===C&&(e.hidpi=!0),m(z,P.present).join("/")}let er=["api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","long_url_signature","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","ssl_detected","type","url_suffix","use_root_path","version"];function en(e,r){let n=w(r,"cloud_name",j().cloud_name);if(!n)throw Error("Must supply cloud_name in tag or in configuration");let o=w(r,"secure",!0),i=w(r,"ssl_detected",j().ssl_detected);null===o&&(o=i||j().secure);let a=w(r,"private_cdn",j().private_cdn),s=w(r,"cname",j().cname),u=w(r,"secure_distribution",j().secure_distribution);return function(e,r,n,o,i,a,s,u){let l;if(0===r.indexOf("/"))return"/res"+r;let c=!n;return s?((null==u||u===t.OLD_AKAMAI_SHARED_CDN)&&(u=n?r+"-res.cloudinary.com":t.SHARED_CDN),null==c&&(c=u===t.SHARED_CDN),null==i&&c&&(i=o),i&&(u=u.replace("res.cloudinary.com","res-"+(S(e)%5+1)+".cloudinary.com")),l="https://"+u):l=a?"http://"+(o?"a"+(S(e)%5+1)+".":"")+a:"http://"+[n?r+"-":"","res",o?"-"+(S(e)%5+1):"",".cloudinary.com"].join(""),c&&(l+="/"+r),l}(e,n,a,w(r,"cdn_subdomain",j().cdn_subdomain),w(r,"secure_cdn_subdomain",j().secure_cdn_subdomain),s,o,u)}function eo(){return ei("v1_1")}function ei(e){if(!e||0===e.length)throw Error("api_version needs to be a non-empty string");return(t=[],r=[])=>{let n=O(r,"upload_prefix",V),o=O(r,"cloud_name"),i=e=>encodeURIComponent(e).replace("'","%27");return[n,e,o].concat(Array.isArray(t)?t.map(i):i(t)).join("/")}}function ea(e,t,r){if(!Y.includes(t))throw Error(`Signature algorithm ${t} is not supported. Supported algorithms: ${Y.join(", ")}`);let o=n.createHash(t).update(e).digest();return Buffer.from(o).toString(r)}function es(e,t){return{...e,...t}}function eu(e,r,n){let o={...r,mode:"download"},i=t.sign_request(o,n);return t.api_url(e,n)+"?"+ef(i)}t.html_attrs=function(e){return m(c(e,function(e,t){return function(e,t){if(t)return!0===t?e:e+"='"+t+"'"}(t,x(e)?e.replace(/\"/g,"&#34;").replace(/\'/g,"&#39;"):e)})).sort().join(" ")};let el=["api_key","cloud_name","private_cdn","secure_distribution","cdn_subdomain"],ec="(([0-9]*)\\\\.([0-9]+)|([0-9]+))([%pP])?",ep=RegExp(`^${ec}$`),e_=RegExp(`(${ec})\\.\\.(${ec})`);function ed(e){return $(e).reduce((e,[t,r])=>{if(g(r)){t=t.endsWith("[]")?t:t+"[]";let n=r.map(e=>[t,e]);e=e.concat(n)}else e.push([t,r]);return e},[])}function ef(e){return ed(e).map(([e,t])=>`${o.escape(e)}=${o.escape(t)}`).join("&")}function em(e,...t){let r={};return e&&t.forEach(t=>{null!=e[t]&&(r[t]=e[t])}),r}t.process_layer=Q,t.create_source_tag=function(e,t,r=null){let n=`video/${"ogv"===t?"ogg":t}`;if(!y(r)){let e=g(r)?r.join(", "):r;n+=`; codecs=${e}`}return`<source ${P.html_attrs({src:e,type:n})}>`},t.NOP=function(){},t.generate_auth_token=function(e){return B(Object.assign({},j().auth_token,e))},t.getUserAgent=function(){return y(P.userPlatform)?`${P.USER_AGENT}`:`${P.userPlatform} ${P.USER_AGENT}`},t.build_upload_params=function(e){let r={access_mode:e.access_mode,allowed_formats:e.allowed_formats&&D(e.allowed_formats).join(","),asset_folder:e.asset_folder,async:P.as_safe_bool(e.async),backup:P.as_safe_bool(e.backup),callback:e.callback,cinemagraph_analysis:P.as_safe_bool(e.cinemagraph_analysis),colors:P.as_safe_bool(e.colors),display_name:e.display_name,discard_original_filename:P.as_safe_bool(e.discard_original_filename),eager:P.build_eager(e.eager),eager_async:P.as_safe_bool(e.eager_async),eager_notification_url:e.eager_notification_url,eval:e.eval,exif:P.as_safe_bool(e.exif),faces:P.as_safe_bool(e.faces),folder:e.folder,format:e.format,filename_override:e.filename_override,image_metadata:P.as_safe_bool(e.image_metadata),media_metadata:P.as_safe_bool(e.media_metadata),invalidate:P.as_safe_bool(e.invalidate),moderation:e.moderation,notification_url:e.notification_url,overwrite:P.as_safe_bool(e.overwrite),phash:P.as_safe_bool(e.phash),proxy:e.proxy,public_id:e.public_id,public_id_prefix:e.public_id_prefix,quality_analysis:P.as_safe_bool(e.quality_analysis),responsive_breakpoints:P.generate_responsive_breakpoints_string(e.responsive_breakpoints),return_delete_token:P.as_safe_bool(e.return_delete_token),timestamp:e.timestamp||t.timestamp(),transformation:decodeURIComponent(P.generate_transformation_string(d(e))),type:e.type,unique_filename:P.as_safe_bool(e.unique_filename),upload_preset:e.upload_preset,use_filename:P.as_safe_bool(e.use_filename),use_filename_as_display_name:P.as_safe_bool(e.use_filename_as_display_name),quality_override:e.quality_override,accessibility_analysis:P.as_safe_bool(e.accessibility_analysis),use_asset_folder_as_public_id_prefix:P.as_safe_bool(e.use_asset_folder_as_public_id_prefix),visual_search:P.as_safe_bool(e.visual_search),on_success:e.on_success,auto_transcription:e.auto_transcription,auto_chaptering:P.as_safe_bool(e.auto_chaptering)};return P.updateable_resource_params(e,r)},t.build_multi_and_sprite_params=function(e,t){let r=null;if("string"==typeof e)r=e;else{if(y(t))t=e;else throw Error("First argument must be a tag when additional options are passed");r=null}if(!t&&!r)throw Error("Either tag or urls are required");t||(t={});let n=t.urls;return{tag:r,transformation:et(f({},t,{fetch_format:t.format})),urls:n,timestamp:P.timestamp(),async:t.async,notification_url:t.notification_url}},t.api_download_url=eu,t.timestamp=()=>Math.floor(new Date().getTime()/1e3),t.option_consume=w,t.build_array=D,t.encode_double_array=C,t.encode_key_value=function(e){return v(e)?$(e).map(([e,t])=>`${e}=${t}`).join("|"):e},t.encode_context=function(e){return v(e)?$(e).map(([e,t])=>{if(x(t))return`${e}=${ee(t)}`;if(g(t)){let r=t.map(e=>`"${ee(e)}"`).join(",");return`${e}=[${r}]`}return Number.isInteger(t)?`${e}=${ee(String(t))}`:t.toString()}).join("|"):e},t.build_eager=function(e){return D(e).map(e=>{let t=P.generate_transformation_string(d(e)),r=e.format;return null==r?t:`${t}/${r}`}).join("|")},t.build_custom_headers=function(e){switch(!0){case null==e:return;case g(e):return e.join("\n");case v(e):return $(e).map(([e,t])=>`${e}:${t}`).join("\n");default:return e}},t.generate_transformation_string=et,t.updateable_resource_params=function(e,t={}){null!=e.access_control&&(t.access_control=P.jsonArrayParam(e.access_control)),null!=e.auto_tagging&&(t.auto_tagging=e.auto_tagging),null!=e.background_removal&&(t.background_removal=e.background_removal),null!=e.categorization&&(t.categorization=e.categorization),null!=e.context&&(t.context=P.encode_context(e.context)),null!=e.metadata&&(t.metadata=P.encode_context(e.metadata)),null!=e.custom_coordinates&&(t.custom_coordinates=C(e.custom_coordinates)),null!=e.detection&&(t.detection=e.detection),null!=e.face_coordinates&&(t.face_coordinates=C(e.face_coordinates)),null!=e.headers&&(t.headers=P.build_custom_headers(e.headers)),null!=e.notification_url&&(t.notification_url=e.notification_url),null!=e.ocr&&(t.ocr=e.ocr),null!=e.raw_convert&&(t.raw_convert=e.raw_convert),null!=e.similarity_search&&(t.similarity_search=e.similarity_search),null!=e.tags&&(t.tags=D(e.tags).join(",")),null!=e.quality_override&&(t.quality_override=e.quality_override),null!=e.asset_folder&&(t.asset_folder=e.asset_folder),null!=e.display_name&&(t.display_name=e.display_name),null!=e.unique_display_name&&(t.unique_display_name=e.unique_display_name),null!=e.visual_search&&(t.visual_search=e.visual_search),null!=e.regions&&(t.regions=JSON.stringify(e.regions));let r=e.auto_transcription;return null!=r&&("boolean"==typeof r?t.auto_transcription=P.as_safe_bool(r):"object"==typeof r&&!Array.isArray(r)&&Object.keys(r).includes("translate")&&(t.auto_transcription=JSON.stringify(r))),t},t.extractUrlParams=function(e){return em(e,...er)},t.extractTransformationParams=function(e){return em(e,...Z)},t.patchFetchFormat=function(e={}){"fetch"===e.type&&null==e.fetch_format&&(e.fetch_format=w(e,"format"))},t.url=function(e,r={}){let n,o;P.patchFetchFormat(r);let a=w(r,"type",null),s=P.generate_transformation_string(r),u=w(r,"resource_type","image"),l=w(r,"version"),c=w(r,"force_version",j().force_version);null==c&&(c=!0);let p=!!w(r,"long_url_signature",j().long_url_signature),_=w(r,"format"),d=w(r,"shorten",j().shorten),f=w(r,"sign_url",j().sign_url),m=w(r,"api_secret",j().api_secret),h=w(r,"url_suffix"),g=w(r,"use_root_path",j().use_root_path),b=w(r,"signature_algorithm",j().signature_algorithm||J);p&&(b="sha256");let v=w(r,"auth_token");!1!==v&&(v=t.merge(j().auth_token,v));let x=/^(image|raw)\/([a-z0-9_]+)\/v(\d+)\/([^#]+)$/.exec(e);x&&(u=x[1],a=x[2],l=x[3],e=x[4]);let A=e;if(null==e||(e=e.toString(),null===a&&e.match(/^https?:\//i)))return A;if([u,a]=function(e,t,r,n,o){if(null==t&&(t="upload"),null!=r){if("image"===e&&"upload"===t)e="images",t=null;else if("image"===e&&"private"===t)e="private_images",t=null;else if("image"===e&&"authenticated"===t)e="authenticated_images",t=null;else if("raw"===e&&"upload"===t)e="files",t=null;else if("video"===e&&"upload"===t)e="videos",t=null;else throw Error("URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload")}if(n){if("image"===e&&"upload"===t||"images"===e&&null==t)e=null,t=null;else throw Error("Root path only supported for image/upload")}return o&&"image"===e&&"upload"===t&&(e="iu",t=null),[e,t]}(u,a,h,g,d),[e,o]=function(e,t,r){let n;if((e=e.replace(/([^:])\/\//g,"$1/")).match(/^https?:\//i))n=e=E(e);else{if(n=e=encodeURIComponent(decodeURIComponent(e)).replace(/%3A/g,":").replace(/%2F/g,"/"),r){if(r.match(/[\.\/]/))throw Error("url_suffix should not include . or /");e=e+"/"+r}null!=t&&(e=e+"."+t,n=n+"."+t)}return[e,n]}(e,_,h),null==l&&c&&o.indexOf("/")>=0&&!o.match(/^v[0-9]+/)&&!o.match(/^https?:\//)&&(l=1),l=null!=l?`v${l}`:null,s=s.replace(/([^:])\/\//g,"$1/"),f&&y(v)){let e=[s,o].filter(function(e){return null!=e&&""!==e}).join("/"),t={};p?(t.algorithm="sha256",t.signatureLength=32):(t.algorithm=b,t.signatureLength=8);let r=ea(e+m,t.algorithm,"base64").slice(0,t.signatureLength).replace(/\//g,"_").replace(/\+/g,"-");n=`s--${r}--`}let D=[en(e,r),u,a,n,s,l,e].filter(function(e){return null!=e&&""!==e}).join("/").replace(/ /g,"%20");if(f&&!y(v)){v.url=i(D).path;let e=B(v);D+=`?${e}`}let k=O(r,"urlAnalytics",O(r,"analytics",!0));if(!0===k){let{sdkCode:e,sdkSemver:t,techVersion:n,product:o}=T(),i=O(r,"sdkCode",O(r,"sdk_code",e)),a=O(r,"sdkSemver",O(r,"sdk_semver",t)),s=O(r,"techVersion",O(r,"tech_version",n)),u=O(r,"product",o),l=N(q(Object.assign({},r,{sdkCode:i,sdkSemver:a,techVersion:s,product:u,urlAnalytics:k}))),c="?";D.indexOf("?")>=0&&(c="&"),D=`${D}${c}_a=${l}`}return D},t.video_url=function(e,t){return t=f({resource_type:"video"},t),P.url(e,t)},t.video_thumbnail_url=function(e,t){return t=f({},U,t),P.url(e,t)},t.api_url=function(e="upload",t={}){let r=t.resource_type||"image";return eo()([r,e],t)},t.random_public_id=function(){return n.randomBytes(12).toString("base64").replace(/[^a-z0-9]/g,"")},t.signed_preloaded_image=function(e){return`${e.resource_type}/upload/v${e.version}/${m([e.public_id,e.format],P.present).join(".")}#${e.signature}`},t.api_sign_request=function(e,t,r=null,n=null){return null==n&&(n=j().signature_version||2),ea(function(e,t=2){let r=$(e).map(([e,t])=>[String(e),Array.isArray(t)?t.join(","):t]).filter(([e,t])=>null!=t&&""!==t);return r.sort((e,t)=>e[0].localeCompare(t[0])),r.map(([e,r])=>{let n=`${e}=${r}`;return t>=2?String(n).replace(/&/g,"%26"):n}).join("&")}(e,n)+t,r||j().signature_algorithm||J,"hex")},t.clear_blank=function(e){let t={};return $(e).filter(([e,t])=>P.present(t)).forEach(([e,r])=>{t[e]=r.filter?r.filter(e=>e):r}),t},t.merge=es,t.sign_request=function(e,r={}){let n=O(r,"api_key"),o=O(r,"api_secret"),i=r.signature_algorithm,a=r.signature_version;return(e=t.clear_blank(e)).signature=t.api_sign_request(e,o,i,a),e.api_key=n,e},t.webhook_signature=function(e,t,r={}){return F({data:e,timestamp:t}),ea(e+t+O(r,"api_secret"),O(r,"signature_algorithm",J),"hex")},t.verifyNotificationSignature=function(e,t,r,n=7200){return!(t<Math.round(Date.now()/1e3)-n)&&r===P.webhook_signature(e,t,{api_secret:j().api_secret,signature_algorithm:j().signature_algorithm})},t.process_request_params=function(e,r){return null!=r.unsigned&&r.unsigned?(e=t.clear_blank(e),delete e.timestamp):e=r.oauth_token||j().oauth_token?t.clear_blank(e):r.signature?t.clear_blank(r):t.sign_request(e,r),e},t.private_download_url=function(e,r,n={}){let i=t.sign_request({timestamp:n.timestamp||t.timestamp(),public_id:e,format:r,type:n.type,attachment:n.attachment,expires_at:n.expires_at},n);return t.api_url("download",n)+"?"+o.stringify(i)},t.zip_download_url=function(e,r={}){let n=t.sign_request({timestamp:r.timestamp||t.timestamp(),tag:e,transformation:P.generate_transformation_string(r)},r);return t.api_url("download_tag.zip",r)+"?"+ef(n)},t.download_archive_url=function(e={}){return eu("generate_archive",t.archive_params(es(e,{mode:"download"})),e)},t.download_zip_url=function(e={}){return t.download_archive_url(es(e,{target_format:"zip"}))},t.cloudinary_js_config=function(){let e=em(j(),...el);return`<script type='text/javascript'>
$.cloudinary.config(${JSON.stringify(e)});
</script>`},t.v1_adapters=function(e,t,r){return Object.keys(r).map(n=>{let o=r[n];return e[n]=function(...e){let r=p(e,o),i=e[o],a=e[o+1];return null==a&&u(i)&&(a=i,i={}),a=function(e){if(null!=e)return function(t){return null!=t.error?e(t.error):e(void 0,t)}}(a),e=r.concat([a,i]),t[n].apply(this,e)},e[n]})},t.as_safe_bool=function(e){if(null!=e)return(!0===e||"true"===e||"1"===e)&&(e=1),(!1===e||"false"===e||"0"===e)&&(e=0),e},t.archive_params=function(e={}){return{allow_missing:t.as_safe_bool(e.allow_missing),async:t.as_safe_bool(e.async),expires_at:e.expires_at,flatten_folders:t.as_safe_bool(e.flatten_folders),flatten_transformations:t.as_safe_bool(e.flatten_transformations),keep_derived:t.as_safe_bool(e.keep_derived),mode:e.mode,notification_url:e.notification_url,prefixes:e.prefixes&&D(e.prefixes),fully_qualified_public_ids:e.fully_qualified_public_ids&&D(e.fully_qualified_public_ids),public_ids:e.public_ids&&D(e.public_ids),skip_transformation_name:t.as_safe_bool(e.skip_transformation_name),tags:e.tags&&D(e.tags),target_format:e.target_format,target_public_id:e.target_public_id,target_asset_folder:e.target_asset_folder,target_tags:e.target_tags&&D(e.target_tags),timestamp:e.timestamp||t.timestamp(),transformations:P.build_eager(e.transformations),type:e.type,use_original_filename:t.as_safe_bool(e.use_original_filename)}},t.build_explicit_api_params=function(e,r={}){return[t.build_upload_params(f({},{public_id:e},r))]},t.generate_responsive_breakpoints_string=function(e){if(null==e)return null;g(e=d(e))||(e=[e]);for(let t=0;t<e.length;t++){let r=e[t];null!=r&&r.transformation&&(r.transformation=P.generate_transformation_string(d(r.transformation)))}return JSON.stringify(e)},t.build_streaming_profiles_param=function(e={}){let t=em(e,"display_name","representations");return g(t.representations)&&(t.representations=JSON.stringify(t.representations.map(e=>({transformation:P.generate_transformation_string(e.transformation)})))),t},t.hashToParameters=ed,t.present=function(e){return null!=e&&(""+e).length>0},t.only=em,t.pickOnlyExistingValues=em,t.jsonArrayParam=function(e,t){return e?(x(e)&&(e=JSON.parse(e)),g(e)||(e=[e]),u(t)&&(e=t(e)),JSON.stringify(e)):null},t.download_folder=function(e,r={}){r.resource_type=r.resource_type||"all",r.prefixes=e;let n=t.sign_request(t.archive_params(es(r,{mode:"download"})),r);return t.api_url("generate_archive",r)+"?"+ef(n)},t.base_api_url_v1=eo,t.base_api_url_v2=function(){return ei("v2")},t.download_backedup_asset=function(e,r,n={}){let o=t.sign_request({timestamp:n.timestamp||t.timestamp(),asset_id:e,version_id:r},n);return t.base_api_url_v1()(["download_backup"],n)+"?"+ef(o)},t.compute_hash=ea,t.build_distribution_domain=en,t.sort_object_by_key=function(e){return Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{})},t.DEFAULT_POSTER_OPTIONS=U,t.DEFAULT_VIDEO_SOURCE_TYPES=L,Object.assign(e.exports,{normalize_expression:K,at:_,clone:d,extend:f,filter:m,includes:h,isArray:g,isEmpty:y,isNumber:b,isObject:v,isRemoteUrl:R,isString:x,isUndefined:A,keys:e=>Object.keys(e),ensurePresenceOf:F}),t.verify_api_response_signature=function(e,r,n){let o=j().api_secret;return n===t.api_sign_request({public_id:e,version:r},o,null,1)}},47490:(e,t,r)=>{let n=r(97026);e.exports=function(e){let t=n(e)&&e.substring(0,120);return n(e)&&/^ftp:|^https?:|^gs:|^s3:|^data:([\w-.]+\/[\w-.]+(\+[\w-.]+)?)?(;[\w-.]+=[\w-.]+)*;base64,([a-zA-Z0-9\/+\n=]+)$/.test(t)}},66459:e=>{e.exports=function(e,t,r){let n=e[t];return delete e[t],null!=n?n:r}},49760:(e,t,r)=>{let n=r(35599);e.exports=function(e){switch(!0){case null==e:return[];case n(e):return e;default:return[e]}}},44876:(e,t,r)=>{let n=r(34625),o=r(61941),i=r(40818),a=n.isEmpty;function s(e,t,r,o={}){let i=n.extractUrlParams(o);return r=r||o,i.raw_transformation=n.generate_transformation_string([n.extend({},r),{crop:"scale",width:t}]),n.url(e,i)}function u(e,t,r,o){return o=n.clone(o),n.patchFetchFormat(o),t.map(t=>`${s(e,t,r,o)} ${t}w`).join(", ")}function l(e=[]){return e.map(e=>`(max-width: ${e}px) ${e}px`).join(", ")}e.exports={srcsetUrl:s,generateSrcsetAttribute:u,generateSizesAttribute:l,generateMediaAttr:function(e={}){let t=[];return null!=e.min_width&&t.push(`(min-width: ${e.min_width}px)`),null!=e.max_width&&t.push(`(max-width: ${e.max_width}px)`),t.join(" and ")},generateImageResponsiveAttributes:function(e,t={},r={},n={}){let s={};if(a(r))return s;let c=!t.sizes&&!0===r.sizes,p=!t.srcset;if(p||c){let t=function(e,t={},r={}){let n=[];return t.useCache?(n=i.get(e,r))||(n=[]):n=o(t),n}(e,r,n);if(p){let o=u(e,t,r.transformation,n);a(o)||(s.srcset=o)}if(c){let e=l(t);a(e)||(s.sizes=e)}}return s}}},85587:e=>{e.exports=function(e){let t,r,n;if(null==e)return"";let o=e+"",i="",a=0,s=0,u=o.length;for(n=0;n<u;)t=o.charCodeAt(n),r=null,t<128?s++:r=t>127&&t<2048?String.fromCharCode(t>>6|192,63&t|128):String.fromCharCode(t>>12|224,t>>6&63|128,63&t|128),null!==r&&(s>a&&(i+=o.slice(a,s)),i+=r,s=a=n+1),n++;return s>a&&(i+=o.slice(a,u)),i}},60714:(e,t,r)=>{let n=r(42621);(0,r(34625).v1_adapters)(t,n,{ping:0,usage:0,resource_types:0,resources:0,resources_by_tag:1,resources_by_context:2,resources_by_moderation:2,resource_by_asset_id:1,resources_by_asset_ids:1,resources_by_ids:1,resources_by_asset_folder:1,resource:1,restore:1,restore_by_asset_ids:1,update:1,delete_resources:1,delete_resources_by_asset_ids:1,delete_resources_by_prefix:1,delete_resources_by_tag:1,delete_all_resources:0,delete_derived_resources:1,tags:0,transformations:0,transformation:1,delete_transformation:1,update_transformation:2,create_transformation:2,upload_presets:0,upload_preset:1,delete_upload_preset:1,update_upload_preset:1,create_upload_preset:0,root_folders:0,sub_folders:1,delete_folder:1,rename_folder:2,create_folder:1,upload_mappings:0,upload_mapping:1,delete_upload_mapping:1,update_upload_mapping:1,create_upload_mapping:1,list_streaming_profiles:0,get_streaming_profile:1,delete_streaming_profile:1,update_streaming_profile:1,create_streaming_profile:1,publish_by_ids:1,publish_by_tag:1,publish_by_prefix:1,update_resources_access_mode_by_prefix:2,update_resources_access_mode_by_tag:2,update_resources_access_mode_by_ids:2,search:1,search_folders:1,visual_search:1,delete_derived_by_transformation:2,add_metadata_field:1,list_metadata_fields:1,delete_metadata_field:1,metadata_field_by_field_id:1,update_metadata_field:2,update_metadata_field_datasource:2,delete_datasource_entries:2,restore_metadata_field_datasource:2,order_metadata_field_datasource:3,reorder_metadata_fields:2,list_metadata_rules:1,add_metadata_rule:1,delete_metadata_rule:1,update_metadata_rule:2,add_related_assets:2,add_related_assets_by_asset_id:2,delete_related_assets:2,delete_related_assets_by_asset_id:2,delete_backed_up_assets:2,config:0})},6165:(e,t,r)=>{let n=r(33892),o=r(60714),i=r(77510),a=r(65336),s=r(47296),u={...n,api:o,uploader:i,search:a,search_folders:s};e.exports=u},65336:(e,t,r)=>{let n=r(60714),o=r(7099),{isEmpty:i,isNumber:a,compute_hash:s,build_distribution_domain:u,clear_blank:l,sort_object_by_key:c}=r(34625),{base64Encode:p}=r(46169),_=class e{constructor(){this.query_hash={sort_by:[],aggregate:[],with_field:[],fields:[]},this._ttl=300}static instance(){return new e}static expression(e){return this.instance().expression(e)}static max_results(e){return this.instance().max_results(e)}static next_cursor(e){return this.instance().next_cursor(e)}static aggregate(e){return this.instance().aggregate(e)}static with_field(e){return this.instance().with_field(e)}static fields(e){return this.instance().fields(e)}static sort_by(e,t="asc"){return this.instance().sort_by(e,t)}static ttl(e){return this.instance().ttl(e)}static execute(e,t){return this.instance().execute(e,t)}expression(e){return this.query_hash.expression=e,this}max_results(e){return this.query_hash.max_results=e,this}next_cursor(e){return this.query_hash.next_cursor=e,this}aggregate(e){return this.query_hash.aggregate.find(t=>t===e)||this.query_hash.aggregate.push(e),this}with_field(e){return Array.isArray(e)?this.query_hash.with_field=this.query_hash.with_field.concat(e):this.query_hash.with_field.push(e),this.query_hash.with_field=Array.from(new Set(this.query_hash.with_field)),this}fields(e){return Array.isArray(e)?this.query_hash.fields=this.query_hash.fields.concat(e):this.query_hash.fields.push(e),this.query_hash.fields=Array.from(new Set(this.query_hash.fields)),this}sort_by(e,t="desc"){let r;(r={})[e]=t;let n=this.query_hash.sort_by.find(t=>t[e]);return n?n[e]=t:this.query_hash.sort_by.push(r),this}ttl(e){if(a(e))return this._ttl=e,this;throw Error("New TTL value has to be a Number.")}to_query(){return Object.keys(this.query_hash).forEach(e=>{let t=this.query_hash[e];!a(t)&&i(t)&&delete this.query_hash[e]}),this.query_hash}execute(e,t){return null===t&&(t=e),e=e||{},n.search(this.to_query(),e,t)}to_url(e,t,r={}){let n="api_secret"in r?r.api_secret:o().api_secret;if(!n)throw Error("Must supply api_secret");let i=e||this._ttl,a=this.to_query(),_=t;a.next_cursor&&!t&&(_=a.next_cursor),delete a.next_cursor;let d=p(JSON.stringify(c(l(a)))),f=u(r.source,r),m=s(`${i}${d}${n}`,"sha256","hex"),h=`${f}/search/${m}/${i}/${d}`;return _?`${h}/${_}`:h}};e.exports=_},47296:(e,t,r)=>{let n=r(65336),o=r(60714),i=class e extends n{constructor(){super()}static instance(){return new e}execute(e,t){return null===t&&(t=e),e=e||{},o.search_folders(this.to_query(),e,t)}};e.exports=i},77510:(e,t,r)=>{let n=r(47554);(0,r(34625).v1_adapters)(t,n,{unsigned_upload_stream:1,upload_stream:0,unsigned_upload:2,upload:1,upload_large_part:0,upload_large:1,upload_chunked:1,upload_chunked_stream:0,explicit:1,destroy:1,rename:2,text:1,generate_sprite:1,multi:1,explode:1,add_tag:2,remove_tag:2,remove_all_tags:1,add_context:2,remove_all_context:1,replace_tag:2,create_archive:0,create_zip:0,update_metadata:2}),t.direct_upload=n.direct_upload,t.upload_tag_params=n.upload_tag_params,t.upload_url=n.upload_url,t.image_upload_tag=n.image_upload_tag,t.unsigned_image_upload_tag=n.unsigned_image_upload_tag,t.create_slideshow=n.create_slideshow,t.download_generated_sprite=n.download_generated_sprite,t.download_multi=n.download_multi},88454:e=>{/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var e,t,r=!1;try{throw Error()}catch(e){r=!!e.stack}var n=b(),o=function(){},i=function(){var e={task:void 0,next:null},t=e,r=!1,n=void 0,o=!1,a=[];function s(){for(var t,n;e.next;)t=(e=e.next).task,e.task=void 0,(n=e.domain)&&(e.domain=void 0,n.enter()),u(t,n);for(;a.length;)u(t=a.pop());r=!1}function u(e,t){try{e()}catch(e){if(o)throw t&&t.exit(),setTimeout(s,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}if(i=function(e){t=t.next={task:e,domain:o&&process.domain,next:null},r||(r=!0,n())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)o=!0,n=function(){process.nextTick(s)};else if("function"==typeof setImmediate)n=function(){setImmediate(s)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){n=c,l.port1.onmessage=s,s()};var c=function(){l.port2.postMessage(0)};n=function(){setTimeout(s,0),c()}}else n=function(){setTimeout(s,0)};return i.runAfter=function(e){a.push(e),r||(r=!0,n())},i}(),a=Function.call;function s(e){return function(){return a.apply(e,arguments)}}var u=s(Array.prototype.slice),l=s(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1==arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw TypeError()}for(;r<n;r++)r in this&&(t=e(t,this[r],r));return t}),c=s(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return -1}),p=s(Array.prototype.map||function(e,t){var r=this,n=[];return l(r,function(o,i,a){n.push(e.call(t,i,a,r))},void 0),n}),_=Object.create||function(e){function t(){}return t.prototype=e,new t},d=Object.defineProperty||function(e,t,r){return e[t]=r.value,e},f=s(Object.prototype.hasOwnProperty),m=Object.keys||function(e){var t=[];for(var r in e)f(e,r)&&t.push(r);return t},h=s(Object.prototype.toString);function g(t,o){if(r&&o.stack&&"object"==typeof t&&null!==t&&t.stack){for(var i=[],a=o;a;a=a.source)a.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>a.stackCounter)&&(d(t,"__minimumStackCounter__",{value:a.stackCounter,configurable:!0}),i.unshift(a.stack));i.unshift(t.stack),d(t,"stack",{value:function(t){for(var r=t.split("\n"),o=[],i=0;i<r.length;++i){var a=r[i];!function(t){var r=y(t);if(!r)return!1;var o=r[0],i=r[1];return o===e&&i>=n&&i<=z}(a)&&!(-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:"))&&a&&o.push(a)}return o.join("\n")}(i.join("\nFrom previous event:\n")),configurable:!0})}}function y(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);if(n)return[n[1],Number(n[2])]}function b(){if(r)try{throw Error()}catch(r){var t=r.stack.split("\n"),n=y(t[0].indexOf("@")>0?t[1]:t[2]);if(!n)return;return e=n[0],n[1]}}function v(e){var t;return e instanceof D?e:B(e)?(t=A(),v.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise):q(e)}t="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e},v.resolve=v,v.nextTick=i,v.longStackSupport=!1;var x=1;function A(){var e,t=[],n=[],o=_(A.prototype),i=_(D.prototype);if(i.promiseDispatch=function(r,o,i){var a=u(arguments);t?(t.push(a),"when"===o&&i[1]&&n.push(i[1])):v.nextTick(function(){e.promiseDispatch.apply(e,a)})},i.valueOf=function(){if(t)return i;var r=C(e);return j(r)&&(e=r),r},i.inspect=function(){return e?e.inspect():{state:"pending"}},v.longStackSupport&&r)try{throw Error()}catch(e){i.stack=e.stack.substring(e.stack.indexOf("\n")+1),i.stackCounter=x++}function a(o){e=o,v.longStackSupport&&r&&(i.source=o),l(t,function(e,t){v.nextTick(function(){o.promiseDispatch.apply(o,t)})},void 0),t=void 0,n=void 0}return o.promise=i,o.resolve=function(t){e||a(v(t))},o.fulfill=function(t){e||a(q(t))},o.reject=function(t){e||a(T(t))},o.notify=function(t){e||l(n,function(e,r){v.nextTick(function(){r(t)})},void 0)},o}function E(e){if("function"!=typeof e)throw TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function w(e){return E(function(t,r){for(var n=0,o=e.length;n<o;n++)v(e[n]).then(t,r)})}function D(e,t,r){void 0===t&&(t=function(e){return T(Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=_(D.prototype);if(n.promiseDispatch=function(r,o,i){var a;try{a=e[o]?e[o].apply(n,i):t.call(n,o,i)}catch(e){a=T(e)}r&&r(a)},n.inspect=r,r){var o=r();"rejected"===o.state&&(n.exception=o.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function k(e,t,r,n){return v(e).then(t,r,n)}function C(e){if(j(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function j(e){return e instanceof D}function B(e){return e===Object(e)&&"function"==typeof e.then}"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(v.longStackSupport=!0),v.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(u(arguments,1)):e.resolve(r)}},v.Promise=E,v.promise=E,E.race=w,E.all=I,E.reject=T,E.resolve=v,v.passByCopy=function(e){return e},D.prototype.passByCopy=function(){return this},v.join=function(e,t){return v(e).join(t)},D.prototype.join=function(e){return v([this,e]).spread(function(e,t){if(e===t)return e;throw Error("Q can't join: not the same: "+e+" "+t)})},v.race=w,D.prototype.race=function(){return this.then(v.race)},v.makePromise=D,D.prototype.toString=function(){return"[object Promise]"},D.prototype.then=function(e,t,r){var n=this,o=A(),i=!1;return v.nextTick(function(){n.promiseDispatch(function(t){i||(i=!0,o.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(e){return T(e)}}(t)))},"when",[function(e){i||(i=!0,o.resolve(function(e){if("function"==typeof t){g(e,n);try{return t(e)}catch(e){return T(e)}}return T(e)}(e)))}])}),n.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t="function"==typeof r?r(e):e}catch(e){if(n=!0,v.onerror)v.onerror(e);else throw e}n||o.notify(t)}]),o.promise},v.tap=function(e,t){return v(e).tap(t)},D.prototype.tap=function(e){return e=v(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},v.when=k,D.prototype.thenResolve=function(e){return this.then(function(){return e})},v.thenResolve=function(e,t){return v(e).thenResolve(t)},D.prototype.thenReject=function(e){return this.then(function(){throw e})},v.thenReject=function(e,t){return v(e).thenReject(t)},v.nearer=C,v.isPromise=j,v.isPromiseAlike=B,v.isPending=function(e){return j(e)&&"pending"===e.inspect().state},D.prototype.isPending=function(){return"pending"===this.inspect().state},v.isFulfilled=function(e){return!j(e)||"fulfilled"===e.inspect().state},D.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},v.isRejected=function(e){return j(e)&&"rejected"===e.inspect().state},D.prototype.isRejected=function(){return"rejected"===this.inspect().state};var S=[],F=[],O=[],$=!0;function R(){S.length=0,F.length=0,$||($=!0)}function T(e){var t=D({when:function(t){return t&&function(e){if($){var t=c(F,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&v.nextTick.runAfter(function(){var r=c(O,e);-1!==r&&(process.emit("rejectionHandled",S[t],e),O.splice(r,1))}),F.splice(t,1),S.splice(t,1))}}(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return $&&("object"==typeof process&&"function"==typeof process.emit&&v.nextTick.runAfter(function(){-1!==c(F,t)&&(process.emit("unhandledRejection",e,t),O.push(t))}),F.push(t),e&&void 0!==e.stack?S.push(e.stack):S.push("(no stack) "+e)),t}function q(e){return D({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null==t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return m(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function N(e,t,r){return v(e).spread(t,r)}function P(e,t,r){return v(e).dispatch(t,r)}function I(e){return k(e,function(e){var t=0,r=A();return l(e,function(n,o,i){var a;j(o)&&"fulfilled"===(a=o.inspect()).state?e[i]=a.value:(++t,k(o,function(n){e[i]=n,0==--t&&r.resolve(e)},r.reject,function(e){r.notify({index:i,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function U(e){if(0===e.length)return v.resolve();var t=v.defer(),r=0;return l(e,function(n,o,i){var a=e[i];r++,k(a,function(e){t.resolve(e)},function(e){if(0==--r){var n=e||Error(""+e);n.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+n.message,t.reject(n)}},function(e){t.notify({index:i,value:e})})},void 0),t.promise}function L(e){return k(e,function(e){return e=p(e,v),k(I(p(e,function(e){return k(e,o,o)})),function(){return e})})}v.resetUnhandledRejections=R,v.getUnhandledReasons=function(){return S.slice()},v.stopUnhandledRejectionTracking=function(){R(),$=!1},R(),v.reject=T,v.fulfill=q,v.master=function(e){return D({isDef:function(){}},function(t,r){return P(e,t,r)},function(){return v(e).inspect()})},v.spread=N,D.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},v.async=function(e){return function(){function r(e,r){var a;if("undefined"==typeof StopIteration){try{a=n[e](r)}catch(e){return T(e)}return a.done?v(a.value):k(a.value,o,i)}try{a=n[e](r)}catch(e){if("[object StopIteration]"===h(e)||e instanceof t)return v(e.value);return T(e)}return k(a,o,i)}var n=e.apply(this,arguments),o=r.bind(r,"next"),i=r.bind(r,"throw");return o()}},v.spawn=function(e){v.done(v.async(e)())},v.return=function(e){throw new t(e)},v.promised=function(e){return function(){return N([this,I(arguments)],function(t,r){return e.apply(t,r)})}},v.dispatch=P,D.prototype.dispatch=function(e,t){var r=this,n=A();return v.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},v.get=function(e,t){return v(e).dispatch("get",[t])},D.prototype.get=function(e){return this.dispatch("get",[e])},v.set=function(e,t,r){return v(e).dispatch("set",[t,r])},D.prototype.set=function(e,t){return this.dispatch("set",[e,t])},v.del=v.delete=function(e,t){return v(e).dispatch("delete",[t])},D.prototype.del=D.prototype.delete=function(e){return this.dispatch("delete",[e])},v.mapply=v.post=function(e,t,r){return v(e).dispatch("post",[t,r])},D.prototype.mapply=D.prototype.post=function(e,t){return this.dispatch("post",[e,t])},v.send=v.mcall=v.invoke=function(e,t){return v(e).dispatch("post",[t,u(arguments,2)])},D.prototype.send=D.prototype.mcall=D.prototype.invoke=function(e){return this.dispatch("post",[e,u(arguments,1)])},v.fapply=function(e,t){return v(e).dispatch("apply",[void 0,t])},D.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},v.try=v.fcall=function(e){return v(e).dispatch("apply",[void 0,u(arguments,1)])},D.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},v.fbind=function(e){var t=v(e),r=u(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(u(arguments))])}},D.prototype.fbind=function(){var e=this,t=u(arguments);return function(){return e.dispatch("apply",[this,t.concat(u(arguments))])}},v.keys=function(e){return v(e).dispatch("keys",[])},D.prototype.keys=function(){return this.dispatch("keys",[])},v.all=I,D.prototype.all=function(){return I(this)},v.any=U,D.prototype.any=function(){return U(this)},v.allResolved=function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("allResolved is deprecated, use allSettled instead.",Error("").stack),L.apply(L,arguments)},D.prototype.allResolved=function(){return L(this)},v.allSettled=function(e){return v(e).allSettled()},D.prototype.allSettled=function(){return this.then(function(e){return I(p(e,function(e){function t(){return e.inspect()}return(e=v(e)).then(t,t)}))})},v.fail=v.catch=function(e,t){return v(e).then(void 0,t)},D.prototype.fail=D.prototype.catch=function(e){return this.then(void 0,e)},v.progress=function(e,t){return v(e).then(void 0,void 0,t)},D.prototype.progress=function(e){return this.then(void 0,void 0,e)},v.fin=v.finally=function(e,t){return v(e).finally(t)},D.prototype.fin=D.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw Error("Q can't apply finally callback");return e=v(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},v.done=function(e,t,r,n){return v(e).done(t,r,n)},D.prototype.done=function(e,t,r){var n=function(e){v.nextTick(function(){if(g(e,o),v.onerror)v.onerror(e);else throw e})},o=e||t||r?this.then(e,t,r):this;"object"==typeof process&&process&&process.domain&&(n=process.domain.bind(n)),o.then(void 0,n)},v.timeout=function(e,t,r){return v(e).timeout(t,r)},D.prototype.timeout=function(e,t){var r=A(),n=setTimeout(function(){t&&"string"!=typeof t||((t=Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},v.delay=function(e,t){return void 0===t&&(t=e,e=void 0),v(e).delay(t)},D.prototype.delay=function(e){return this.then(function(t){var r=A();return setTimeout(function(){r.resolve(t)},e),r.promise})},v.nfapply=function(e,t){return v(e).nfapply(t)},D.prototype.nfapply=function(e){var t=A(),r=u(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},v.nfcall=function(e){var t=u(arguments,1);return v(e).nfapply(t)},D.prototype.nfcall=function(){var e=u(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},v.nfbind=v.denodeify=function(e){if(void 0===e)throw Error("Q can't wrap an undefined function");var t=u(arguments,1);return function(){var r=t.concat(u(arguments)),n=A();return r.push(n.makeNodeResolver()),v(e).fapply(r).fail(n.reject),n.promise}},D.prototype.nfbind=D.prototype.denodeify=function(){var e=u(arguments);return e.unshift(this),v.denodeify.apply(void 0,e)},v.nbind=function(e,t){var r=u(arguments,2);return function(){var n=r.concat(u(arguments)),o=A();return n.push(o.makeNodeResolver()),v(function(){return e.apply(t,arguments)}).fapply(n).fail(o.reject),o.promise}},D.prototype.nbind=function(){var e=u(arguments,0);return e.unshift(this),v.nbind.apply(void 0,e)},v.nmapply=v.npost=function(e,t,r){return v(e).npost(t,r)},D.prototype.nmapply=D.prototype.npost=function(e,t){var r=u(t||[]),n=A();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},v.nsend=v.nmcall=v.ninvoke=function(e,t){var r=u(arguments,2),n=A();return r.push(n.makeNodeResolver()),v(e).dispatch("post",[t,r]).fail(n.reject),n.promise},D.prototype.nsend=D.prototype.nmcall=D.prototype.ninvoke=function(e){var t=u(arguments,1),r=A();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},v.nodeify=function(e,t){return v(e).nodeify(t)},D.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){v.nextTick(function(){e(null,t)})},function(t){v.nextTick(function(){e(t)})})},v.noConflict=function(){throw Error("Q.noConflict only works when Q is used as a global")};var z=b();return v})},82002:(e,t,r)=>{"use strict";r.d(t,{L:()=>u});var n=r(65822),o=r(86485),i=r(10375),a=r(7529),s=r(34490);let u={adapter:(0,n.N)(s.Z),providers:[(0,i.Z)({clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||""}),(0,o.Z)({name:"credentials",credentials:{identifier:{label:"Email or Phone",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){let t;if(!e?.identifier||!e?.password)throw console.log("Missing credentials"),Error("Please enter your email/phone and password");let r=e.identifier.trim();console.log("Login attempt with identifier:",r);let n=r.includes("@");if(console.log("Is email:",n),n)t=await s.Z.user.findUnique({where:{email:r}});else{let e=r.replace(/\s+/g,"").replace(/^\+91/,"").replace(/^91/,"");console.log("Looking for phone:",e),t=await s.Z.user.findFirst({where:{OR:[{phone:r},{phone:e},{phone:`+91${e}`},{phone:`91${e}`}]}})}if(console.log("User found:",t?"Yes":"No"),!t||!t.password)throw Error("No account found with this email/phone");if(!await a.ZP.compare(e.password,t.password))throw console.log("Password invalid for user:",t.email),Error("Incorrect password");if(!t.isActive)throw Error("Your account has been disabled");return console.log("Login successful for:",t.email),{id:t.id,email:t.email,name:t.name,image:t.image,role:t.role}}})],session:{strategy:"jwt",maxAge:2592e3},callbacks:{jwt:async({token:e,user:t,trigger:r,session:n})=>(t&&(e.id=t.id,e.role=t.role),"update"===r&&n&&(e.name=n.name,e.image=n.image),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.role=t.role),e)},pages:{signIn:"/login",error:"/login"},events:{async createUser({user:e}){await s.Z.wallet.create({data:{userId:e.id,balance:100}}),await s.Z.notification.create({data:{userId:e.id,type:"SYSTEM",title:"Welcome to KARIM TRADERS!",message:"Your account has been created successfully. Enjoy 100 welcome bonus in your wallet!"}})}},debug:!1}},34490:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i,_:()=>o});var n=r(53524);let o=globalThis.prisma??new n.PrismaClient({log:["error"]}),i=o},93196:e=>{"use strict";e.exports={i8:"2.8.0"}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[1638,6206,7529,244],()=>r(76369));module.exports=n})();