"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_basan_Desktop_karim123_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/orders/route.ts */ \"(rsc)/./src/app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\basan\\\\Desktop\\\\karim123\\\\src\\\\app\\\\api\\\\orders\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_basan_Desktop_karim123_src_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiYXNhbiU1Q0Rlc2t0b3AlNUNrYXJpbTEyMyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDYmFzYW4lNUNEZXNrdG9wJTVDa2FyaW0xMjMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0I7QUFDakc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJpbS10cmFkZXJzLz83NGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGJhc2FuXFxcXERlc2t0b3BcXFxca2FyaW0xMjNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb3JkZXJzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vcmRlcnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmRlcnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29yZGVycy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGJhc2FuXFxcXERlc2t0b3BcXFxca2FyaW0xMjNcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb3JkZXJzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL29yZGVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/orders/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/orders/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n\n\n\n\n\n\nconst orderSchema = zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n    addressId: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n    paymentMethod: zod__WEBPACK_IMPORTED_MODULE_5__.z.enum([\n        \"COD\",\n        \"ONLINE\",\n        \"WALLET\"\n    ]),\n    deliverySlotId: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n    couponCode: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()\n});\n// Get user's orders\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const { searchParams } = new URL(request.url);\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\");\n        const status = searchParams.get(\"status\");\n        const where = {\n            userId: session.user.id\n        };\n        if (status) {\n            where.status = status;\n        }\n        const [orders, total] = await Promise.all([\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].order.findMany({\n                where,\n                include: {\n                    items: {\n                        include: {\n                            product: {\n                                include: {\n                                    images: {\n                                        take: 1\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    address: true,\n                    deliverySlot: true,\n                    timeline: {\n                        orderBy: {\n                            createdAt: \"desc\"\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: \"desc\"\n                },\n                skip: (page - 1) * limit,\n                take: limit\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].order.count({\n                where\n            })\n        ]);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            orders,\n            pagination: {\n                page,\n                limit,\n                total,\n                totalPages: Math.ceil(total / limit)\n            }\n        });\n    } catch (error) {\n        console.error(\"Orders fetch error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch orders\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Create new order\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const validation = orderSchema.safeParse(body);\n        if (!validation.success) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid data\",\n                details: validation.error.errors\n            }, {\n                status: 400\n            });\n        }\n        const { addressId, paymentMethod, deliverySlotId, notes, couponCode } = validation.data;\n        // Get cart items\n        const cartItems = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cartItem.findMany({\n            where: {\n                userId: session.user.id\n            },\n            include: {\n                product: true\n            }\n        });\n        if (cartItems.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Cart is empty\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify address\n        const address = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].address.findFirst({\n            where: {\n                id: addressId,\n                userId: session.user.id\n            }\n        });\n        if (!address) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid address\"\n            }, {\n                status: 400\n            });\n        }\n        // Check product availability\n        for (const item of cartItems){\n            if (item.product.stockStatus === \"OUT_OF_STOCK\") {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `${item.product.name} is out of stock`\n                }, {\n                    status: 400\n                });\n            }\n            if (item.quantity > item.product.stockCount) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: `Only ${item.product.stockCount} units of ${item.product.name} available`\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Calculate totals\n        let subtotal = 0;\n        let discount = 0;\n        for (const item of cartItems){\n            subtotal += Number(item.product.price) * item.quantity;\n            if (item.product.originalPrice) {\n                discount += (Number(item.product.originalPrice) - Number(item.product.price)) * item.quantity;\n            }\n        }\n        const deliveryFee = subtotal >= 499 ? 0 : 29;\n        // Apply coupon if provided\n        let couponDiscount = 0;\n        let coupon = null;\n        if (couponCode) {\n            coupon = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].coupon.findFirst({\n                where: {\n                    code: couponCode.toUpperCase(),\n                    isActive: true,\n                    validFrom: {\n                        lte: new Date()\n                    },\n                    validUntil: {\n                        gte: new Date()\n                    }\n                }\n            });\n            if (coupon) {\n                if (coupon.minOrderAmount && subtotal < Number(coupon.minOrderAmount)) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: `Minimum order amount is â‚¹${coupon.minOrderAmount}`\n                    }, {\n                        status: 400\n                    });\n                }\n                if (coupon.usageLimit && coupon.usedCount >= coupon.usageLimit) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: \"Coupon usage limit exceeded\"\n                    }, {\n                        status: 400\n                    });\n                }\n                if (coupon.type === \"PERCENTAGE\") {\n                    couponDiscount = subtotal * Number(coupon.value) / 100;\n                    if (coupon.maxDiscount) {\n                        couponDiscount = Math.min(couponDiscount, Number(coupon.maxDiscount));\n                    }\n                } else {\n                    couponDiscount = Number(coupon.value);\n                }\n            }\n        }\n        const total = subtotal - couponDiscount + deliveryFee;\n        // Check wallet balance for wallet payment\n        if (paymentMethod === \"WALLET\") {\n            const wallet = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].wallet.findUnique({\n                where: {\n                    userId: session.user.id\n                }\n            });\n            if (!wallet || Number(wallet.balance) < total) {\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Insufficient wallet balance\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Generate order number\n        const orderCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].order.count();\n        const orderNumber = `KT${Date.now().toString().slice(-6)}${(orderCount + 1).toString().padStart(4, \"0\")}`;\n        // Create order with transaction\n        const order = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].$transaction(async (tx)=>{\n            // Create order\n            const newOrder = await tx.order.create({\n                data: {\n                    orderNumber,\n                    userId: session.user.id,\n                    addressId,\n                    deliverySlotId: deliverySlotId || null,\n                    paymentMethod,\n                    paymentStatus: paymentMethod === \"COD\" ? \"PENDING\" : \"PENDING\",\n                    subtotal,\n                    discount: discount + couponDiscount,\n                    deliveryFee,\n                    total,\n                    couponId: coupon?.id || null,\n                    couponCode: coupon?.code || null,\n                    couponDiscount,\n                    notes: notes || null,\n                    items: {\n                        create: cartItems.map((item)=>({\n                                productId: item.productId,\n                                productName: item.product.name,\n                                productImage: item.product.images?.[0]?.url || null,\n                                productUnit: item.product.unit,\n                                price: Number(item.product.price),\n                                quantity: item.quantity,\n                                total: Number(item.product.price) * item.quantity\n                            }))\n                    },\n                    timeline: {\n                        create: {\n                            status: \"PENDING\",\n                            title: \"Order Placed\",\n                            description: \"Your order has been placed successfully\"\n                        }\n                    }\n                },\n                include: {\n                    items: {\n                        include: {\n                            product: {\n                                include: {\n                                    images: {\n                                        take: 1\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    address: true,\n                    timeline: true\n                }\n            });\n            // Update product stock\n            for (const item of cartItems){\n                await tx.product.update({\n                    where: {\n                        id: item.productId\n                    },\n                    data: {\n                        stockCount: {\n                            decrement: item.quantity\n                        },\n                        stockStatus: item.product.stockCount - item.quantity <= 0 ? \"OUT_OF_STOCK\" : item.product.stockCount - item.quantity <= 10 ? \"LOW_STOCK\" : \"IN_STOCK\"\n                    }\n                });\n            }\n            // Update coupon usage\n            if (coupon) {\n                await tx.coupon.update({\n                    where: {\n                        id: coupon.id\n                    },\n                    data: {\n                        usedCount: {\n                            increment: 1\n                        }\n                    }\n                });\n            }\n            // Deduct from wallet if wallet payment\n            if (paymentMethod === \"WALLET\") {\n                await tx.wallet.update({\n                    where: {\n                        userId: session.user.id\n                    },\n                    data: {\n                        balance: {\n                            decrement: total\n                        }\n                    }\n                });\n                await tx.walletTransaction.create({\n                    data: {\n                        walletId: (await tx.wallet.findUnique({\n                            where: {\n                                userId: session.user.id\n                            }\n                        })).id,\n                        type: \"DEBIT\",\n                        amount: total,\n                        description: `Payment for order #${orderNumber}`,\n                        referenceId: newOrder.id\n                    }\n                });\n                await tx.order.update({\n                    where: {\n                        id: newOrder.id\n                    },\n                    data: {\n                        paymentStatus: \"PAID\"\n                    }\n                });\n            }\n            // Clear cart\n            await tx.cartItem.deleteMany({\n                where: {\n                    userId: session.user.id\n                }\n            });\n            // Create notification\n            await tx.notification.create({\n                data: {\n                    userId: session.user.id,\n                    type: \"ORDER\",\n                    title: \"Order Placed Successfully\",\n                    message: `Your order #${orderNumber} has been placed and will be delivered soon.`,\n                    data: {\n                        orderId: newOrder.id\n                    }\n                }\n            });\n            return newOrder;\n        });\n        // Send order confirmation email\n        try {\n            const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__[\"default\"].user.findUnique({\n                where: {\n                    id: session.user.id\n                },\n                select: {\n                    email: true,\n                    name: true\n                }\n            });\n            if (user?.email) {\n                const orderForEmail = {\n                    ...order,\n                    user,\n                    items: order.items.map((item)=>({\n                            name: item.name,\n                            quantity: item.quantity,\n                            price: item.price\n                        }))\n                };\n                const emailTemplate = _lib_email__WEBPACK_IMPORTED_MODULE_4__.emailTemplates.orderConfirmation(orderForEmail);\n                await (0,_lib_email__WEBPACK_IMPORTED_MODULE_4__.sendEmail)({\n                    to: user.email,\n                    subject: emailTemplate.subject,\n                    html: emailTemplate.html\n                });\n            }\n        } catch (emailError) {\n            console.error(\"Failed to send order confirmation email:\", emailError);\n        // Don't fail the order if email fails\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(order, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Create order error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to create order\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQ3RCO1lBQUVDLE9BQU87UUFBeUIsR0FDbEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJpbS10cmFkZXJzLy4vc3JjL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzPzhkMjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCc7XHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aCc7XHJcbmltcG9ydCBwcmlzbWEgZnJvbSAnQC9saWIvcHJpc21hJztcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XHJcbmltcG9ydCB7IHNlbmRFbWFpbCwgZW1haWxUZW1wbGF0ZXMgfSBmcm9tICdAL2xpYi9lbWFpbCc7XHJcblxyXG5jb25zdCBvcmRlclNjaGVtYSA9IHoub2JqZWN0KHtcclxuICBhZGRyZXNzSWQ6IHouc3RyaW5nKCksXHJcbiAgcGF5bWVudE1ldGhvZDogei5lbnVtKFsnQ09EJywgJ09OTElORScsICdXQUxMRVQnXSksXHJcbiAgZGVsaXZlcnlTbG90SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGNvdXBvbkNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG4vLyBHZXQgdXNlcidzIG9yZGVyc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcclxuICAgIFxyXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5pZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2UnKSB8fCAnMScpO1xyXG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8ICcxMCcpO1xyXG4gICAgY29uc3Qgc3RhdHVzID0gc2VhcmNoUGFyYW1zLmdldCgnc3RhdHVzJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7IHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkIH07XHJcbiAgICBcclxuICAgIGlmIChzdGF0dXMpIHtcclxuICAgICAgd2hlcmUuc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBbb3JkZXJzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHByaXNtYS5vcmRlci5maW5kTWFueSh7XHJcbiAgICAgICAgd2hlcmUsXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgaXRlbXM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICAgICAgaW1hZ2VzOiB7IHRha2U6IDEgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBhZGRyZXNzOiB0cnVlLFxyXG4gICAgICAgICAgZGVsaXZlcnlTbG90OiB0cnVlLFxyXG4gICAgICAgICAgdGltZWxpbmU6IHtcclxuICAgICAgICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcclxuICAgICAgICBza2lwOiAocGFnZSAtIDEpICogbGltaXQsXHJcbiAgICAgICAgdGFrZTogbGltaXQsXHJcbiAgICAgIH0pLFxyXG4gICAgICBwcmlzbWEub3JkZXIuY291bnQoeyB3aGVyZSB9KSxcclxuICAgIF0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBvcmRlcnMsXHJcbiAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBwYWdlLFxyXG4gICAgICAgIGxpbWl0LFxyXG4gICAgICAgIHRvdGFsLFxyXG4gICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdPcmRlcnMgZmV0Y2ggZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIG9yZGVycycgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gQ3JlYXRlIG5ldyBvcmRlclxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XHJcbiAgICBcclxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBvcmRlclNjaGVtYS5zYWZlUGFyc2UoYm9keSk7XHJcbiAgICBcclxuICAgIGlmICghdmFsaWRhdGlvbi5zdWNjZXNzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBkYXRhJywgZGV0YWlsczogdmFsaWRhdGlvbi5lcnJvci5lcnJvcnMgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgeyBhZGRyZXNzSWQsIHBheW1lbnRNZXRob2QsIGRlbGl2ZXJ5U2xvdElkLCBub3RlcywgY291cG9uQ29kZSB9ID0gdmFsaWRhdGlvbi5kYXRhO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgY2FydCBpdGVtc1xyXG4gICAgY29uc3QgY2FydEl0ZW1zID0gYXdhaXQgcHJpc21hLmNhcnRJdGVtLmZpbmRNYW55KHtcclxuICAgICAgd2hlcmU6IHsgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQgfSxcclxuICAgICAgaW5jbHVkZTogeyBwcm9kdWN0OiB0cnVlIH0sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKGNhcnRJdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdDYXJ0IGlzIGVtcHR5JyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBWZXJpZnkgYWRkcmVzc1xyXG4gICAgY29uc3QgYWRkcmVzcyA9IGF3YWl0IHByaXNtYS5hZGRyZXNzLmZpbmRGaXJzdCh7XHJcbiAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgaWQ6IGFkZHJlc3NJZCxcclxuICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoIWFkZHJlc3MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIGFkZHJlc3MnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENoZWNrIHByb2R1Y3QgYXZhaWxhYmlsaXR5XHJcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2FydEl0ZW1zKSB7XHJcbiAgICAgIGlmIChpdGVtLnByb2R1Y3Quc3RvY2tTdGF0dXMgPT09ICdPVVRfT0ZfU1RPQ0snKSB7XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgeyBlcnJvcjogYCR7aXRlbS5wcm9kdWN0Lm5hbWV9IGlzIG91dCBvZiBzdG9ja2AgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGl0ZW0ucXVhbnRpdHkgPiBpdGVtLnByb2R1Y3Quc3RvY2tDb3VudCkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6IGBPbmx5ICR7aXRlbS5wcm9kdWN0LnN0b2NrQ291bnR9IHVuaXRzIG9mICR7aXRlbS5wcm9kdWN0Lm5hbWV9IGF2YWlsYWJsZWAgfSxcclxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsc1xyXG4gICAgbGV0IHN1YnRvdGFsID0gMDtcclxuICAgIGxldCBkaXNjb3VudCA9IDA7XHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjYXJ0SXRlbXMpIHtcclxuICAgICAgc3VidG90YWwgKz0gTnVtYmVyKGl0ZW0ucHJvZHVjdC5wcmljZSkgKiBpdGVtLnF1YW50aXR5O1xyXG4gICAgICBpZiAoaXRlbS5wcm9kdWN0Lm9yaWdpbmFsUHJpY2UpIHtcclxuICAgICAgICBkaXNjb3VudCArPSAoTnVtYmVyKGl0ZW0ucHJvZHVjdC5vcmlnaW5hbFByaWNlKSAtIE51bWJlcihpdGVtLnByb2R1Y3QucHJpY2UpKSAqIGl0ZW0ucXVhbnRpdHk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZGVsaXZlcnlGZWUgPSBzdWJ0b3RhbCA+PSA0OTkgPyAwIDogMjk7XHJcbiAgICBcclxuICAgIC8vIEFwcGx5IGNvdXBvbiBpZiBwcm92aWRlZFxyXG4gICAgbGV0IGNvdXBvbkRpc2NvdW50ID0gMDtcclxuICAgIGxldCBjb3Vwb24gPSBudWxsO1xyXG4gICAgXHJcbiAgICBpZiAoY291cG9uQ29kZSkge1xyXG4gICAgICBjb3Vwb24gPSBhd2FpdCBwcmlzbWEuY291cG9uLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGNvZGU6IGNvdXBvbkNvZGUudG9VcHBlckNhc2UoKSxcclxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgdmFsaWRGcm9tOiB7IGx0ZTogbmV3IERhdGUoKSB9LFxyXG4gICAgICAgICAgdmFsaWRVbnRpbDogeyBndGU6IG5ldyBEYXRlKCkgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChjb3Vwb24pIHtcclxuICAgICAgICBpZiAoY291cG9uLm1pbk9yZGVyQW1vdW50ICYmIHN1YnRvdGFsIDwgTnVtYmVyKGNvdXBvbi5taW5PcmRlckFtb3VudCkpIHtcclxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogYE1pbmltdW0gb3JkZXIgYW1vdW50IGlzIOKCuSR7Y291cG9uLm1pbk9yZGVyQW1vdW50fWAgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY291cG9uLnVzYWdlTGltaXQgJiYgY291cG9uLnVzZWRDb3VudCA+PSBjb3Vwb24udXNhZ2VMaW1pdCkge1xyXG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnQ291cG9uIHVzYWdlIGxpbWl0IGV4Y2VlZGVkJyB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjb3Vwb24udHlwZSA9PT0gJ1BFUkNFTlRBR0UnKSB7XHJcbiAgICAgICAgICBjb3Vwb25EaXNjb3VudCA9IChzdWJ0b3RhbCAqIE51bWJlcihjb3Vwb24udmFsdWUpKSAvIDEwMDtcclxuICAgICAgICAgIGlmIChjb3Vwb24ubWF4RGlzY291bnQpIHtcclxuICAgICAgICAgICAgY291cG9uRGlzY291bnQgPSBNYXRoLm1pbihjb3Vwb25EaXNjb3VudCwgTnVtYmVyKGNvdXBvbi5tYXhEaXNjb3VudCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb3Vwb25EaXNjb3VudCA9IE51bWJlcihjb3Vwb24udmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0b3RhbCA9IHN1YnRvdGFsIC0gY291cG9uRGlzY291bnQgKyBkZWxpdmVyeUZlZTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgd2FsbGV0IGJhbGFuY2UgZm9yIHdhbGxldCBwYXltZW50XHJcbiAgICBpZiAocGF5bWVudE1ldGhvZCA9PT0gJ1dBTExFVCcpIHtcclxuICAgICAgY29uc3Qgd2FsbGV0ID0gYXdhaXQgcHJpc21hLndhbGxldC5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHNlc3Npb24udXNlci5pZCB9LFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmICghd2FsbGV0IHx8IE51bWJlcih3YWxsZXQuYmFsYW5jZSkgPCB0b3RhbCkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICdJbnN1ZmZpY2llbnQgd2FsbGV0IGJhbGFuY2UnIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEdlbmVyYXRlIG9yZGVyIG51bWJlclxyXG4gICAgY29uc3Qgb3JkZXJDb3VudCA9IGF3YWl0IHByaXNtYS5vcmRlci5jb3VudCgpO1xyXG4gICAgY29uc3Qgb3JkZXJOdW1iZXIgPSBgS1Qke0RhdGUubm93KCkudG9TdHJpbmcoKS5zbGljZSgtNil9JHsob3JkZXJDb3VudCArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgJzAnKX1gO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgb3JkZXIgd2l0aCB0cmFuc2FjdGlvblxyXG4gICAgY29uc3Qgb3JkZXIgPSBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eDogYW55KSA9PiB7XHJcbiAgICAgIC8vIENyZWF0ZSBvcmRlclxyXG4gICAgICBjb25zdCBuZXdPcmRlciA9IGF3YWl0IHR4Lm9yZGVyLmNyZWF0ZSh7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgb3JkZXJOdW1iZXIsXHJcbiAgICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgIGFkZHJlc3NJZCxcclxuICAgICAgICAgIGRlbGl2ZXJ5U2xvdElkOiBkZWxpdmVyeVNsb3RJZCB8fCBudWxsLFxyXG4gICAgICAgICAgcGF5bWVudE1ldGhvZCxcclxuICAgICAgICAgIHBheW1lbnRTdGF0dXM6IHBheW1lbnRNZXRob2QgPT09ICdDT0QnID8gJ1BFTkRJTkcnIDogJ1BFTkRJTkcnLFxyXG4gICAgICAgICAgc3VidG90YWwsXHJcbiAgICAgICAgICBkaXNjb3VudDogZGlzY291bnQgKyBjb3Vwb25EaXNjb3VudCxcclxuICAgICAgICAgIGRlbGl2ZXJ5RmVlLFxyXG4gICAgICAgICAgdG90YWwsXHJcbiAgICAgICAgICBjb3Vwb25JZDogY291cG9uPy5pZCB8fCBudWxsLFxyXG4gICAgICAgICAgY291cG9uQ29kZTogY291cG9uPy5jb2RlIHx8IG51bGwsXHJcbiAgICAgICAgICBjb3Vwb25EaXNjb3VudCxcclxuICAgICAgICAgIG5vdGVzOiBub3RlcyB8fCBudWxsLFxyXG4gICAgICAgICAgaXRlbXM6IHtcclxuICAgICAgICAgICAgY3JlYXRlOiBjYXJ0SXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgICAgcHJvZHVjdElkOiBpdGVtLnByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICBwcm9kdWN0TmFtZTogaXRlbS5wcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgcHJvZHVjdEltYWdlOiBpdGVtLnByb2R1Y3QuaW1hZ2VzPy5bMF0/LnVybCB8fCBudWxsLFxyXG4gICAgICAgICAgICAgIHByb2R1Y3RVbml0OiBpdGVtLnByb2R1Y3QudW5pdCxcclxuICAgICAgICAgICAgICBwcmljZTogTnVtYmVyKGl0ZW0ucHJvZHVjdC5wcmljZSksXHJcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgdG90YWw6IE51bWJlcihpdGVtLnByb2R1Y3QucHJpY2UpICogaXRlbS5xdWFudGl0eSxcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRpbWVsaW5lOiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZToge1xyXG4gICAgICAgICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAnT3JkZXIgUGxhY2VkJyxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdXIgb3JkZXIgaGFzIGJlZW4gcGxhY2VkIHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgaXRlbXM6IHtcclxuICAgICAgICAgICAgaW5jbHVkZToge1xyXG4gICAgICAgICAgICAgIHByb2R1Y3Q6IHtcclxuICAgICAgICAgICAgICAgIGluY2x1ZGU6IHtcclxuICAgICAgICAgICAgICAgICAgaW1hZ2VzOiB7IHRha2U6IDEgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBhZGRyZXNzOiB0cnVlLFxyXG4gICAgICAgICAgdGltZWxpbmU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBVcGRhdGUgcHJvZHVjdCBzdG9ja1xyXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY2FydEl0ZW1zKSB7XHJcbiAgICAgICAgYXdhaXQgdHgucHJvZHVjdC51cGRhdGUoe1xyXG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGl0ZW0ucHJvZHVjdElkIH0sXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHN0b2NrQ291bnQ6IHsgZGVjcmVtZW50OiBpdGVtLnF1YW50aXR5IH0sXHJcbiAgICAgICAgICAgIHN0b2NrU3RhdHVzOiBpdGVtLnByb2R1Y3Quc3RvY2tDb3VudCAtIGl0ZW0ucXVhbnRpdHkgPD0gMCA/ICdPVVRfT0ZfU1RPQ0snIDogXHJcbiAgICAgICAgICAgICAgaXRlbS5wcm9kdWN0LnN0b2NrQ291bnQgLSBpdGVtLnF1YW50aXR5IDw9IDEwID8gJ0xPV19TVE9DSycgOiAnSU5fU1RPQ0snLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gVXBkYXRlIGNvdXBvbiB1c2FnZVxyXG4gICAgICBpZiAoY291cG9uKSB7XHJcbiAgICAgICAgYXdhaXQgdHguY291cG9uLnVwZGF0ZSh7XHJcbiAgICAgICAgICB3aGVyZTogeyBpZDogY291cG9uLmlkIH0sXHJcbiAgICAgICAgICBkYXRhOiB7IHVzZWRDb3VudDogeyBpbmNyZW1lbnQ6IDEgfSB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBEZWR1Y3QgZnJvbSB3YWxsZXQgaWYgd2FsbGV0IHBheW1lbnRcclxuICAgICAgaWYgKHBheW1lbnRNZXRob2QgPT09ICdXQUxMRVQnKSB7XHJcbiAgICAgICAgYXdhaXQgdHgud2FsbGV0LnVwZGF0ZSh7XHJcbiAgICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHNlc3Npb24udXNlci5pZCB9LFxyXG4gICAgICAgICAgZGF0YTogeyBiYWxhbmNlOiB7IGRlY3JlbWVudDogdG90YWwgfSB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGF3YWl0IHR4LndhbGxldFRyYW5zYWN0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHdhbGxldElkOiAoYXdhaXQgdHgud2FsbGV0LmZpbmRVbmlxdWUoeyB3aGVyZTogeyB1c2VySWQ6IHNlc3Npb24udXNlci5pZCB9IH0pKSEuaWQsXHJcbiAgICAgICAgICAgIHR5cGU6ICdERUJJVCcsXHJcbiAgICAgICAgICAgIGFtb3VudDogdG90YWwsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgUGF5bWVudCBmb3Igb3JkZXIgIyR7b3JkZXJOdW1iZXJ9YCxcclxuICAgICAgICAgICAgcmVmZXJlbmNlSWQ6IG5ld09yZGVyLmlkLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0eC5vcmRlci51cGRhdGUoe1xyXG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IG5ld09yZGVyLmlkIH0sXHJcbiAgICAgICAgICBkYXRhOiB7IHBheW1lbnRTdGF0dXM6ICdQQUlEJyB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciBjYXJ0XHJcbiAgICAgIGF3YWl0IHR4LmNhcnRJdGVtLmRlbGV0ZU1hbnkoe1xyXG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvblxyXG4gICAgICBhd2FpdCB0eC5ub3RpZmljYXRpb24uY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcclxuICAgICAgICAgIHR5cGU6ICdPUkRFUicsXHJcbiAgICAgICAgICB0aXRsZTogJ09yZGVyIFBsYWNlZCBTdWNjZXNzZnVsbHknLFxyXG4gICAgICAgICAgbWVzc2FnZTogYFlvdXIgb3JkZXIgIyR7b3JkZXJOdW1iZXJ9IGhhcyBiZWVuIHBsYWNlZCBhbmQgd2lsbCBiZSBkZWxpdmVyZWQgc29vbi5gLFxyXG4gICAgICAgICAgZGF0YTogeyBvcmRlcklkOiBuZXdPcmRlci5pZCB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIG5ld09yZGVyO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFNlbmQgb3JkZXIgY29uZmlybWF0aW9uIGVtYWlsXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHNlc3Npb24udXNlci5pZCB9LFxyXG4gICAgICAgIHNlbGVjdDogeyBlbWFpbDogdHJ1ZSwgbmFtZTogdHJ1ZSB9LFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmICh1c2VyPy5lbWFpbCkge1xyXG4gICAgICAgIGNvbnN0IG9yZGVyRm9yRW1haWwgPSB7XHJcbiAgICAgICAgICAuLi5vcmRlcixcclxuICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICBpdGVtczogb3JkZXIuaXRlbXMubWFwKChpdGVtOiBhbnkpID0+ICh7XHJcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksXHJcbiAgICAgICAgICAgIHByaWNlOiBpdGVtLnByaWNlLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZW1haWxUZW1wbGF0ZSA9IGVtYWlsVGVtcGxhdGVzLm9yZGVyQ29uZmlybWF0aW9uKG9yZGVyRm9yRW1haWwpO1xyXG4gICAgICAgIGF3YWl0IHNlbmRFbWFpbCh7XHJcbiAgICAgICAgICB0bzogdXNlci5lbWFpbCxcclxuICAgICAgICAgIHN1YmplY3Q6IGVtYWlsVGVtcGxhdGUuc3ViamVjdCxcclxuICAgICAgICAgIGh0bWw6IGVtYWlsVGVtcGxhdGUuaHRtbCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBvcmRlciBjb25maXJtYXRpb24gZW1haWw6JywgZW1haWxFcnJvcik7XHJcbiAgICAgIC8vIERvbid0IGZhaWwgdGhlIG9yZGVyIGlmIGVtYWlsIGZhaWxzXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihvcmRlciwgeyBzdGF0dXM6IDIwMSB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQ3JlYXRlIG9yZGVyIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgb3JkZXInIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsInByaXNtYSIsInoiLCJzZW5kRW1haWwiLCJlbWFpbFRlbXBsYXRlcyIsIm9yZGVyU2NoZW1hIiwib2JqZWN0IiwiYWRkcmVzc0lkIiwic3RyaW5nIiwicGF5bWVudE1ldGhvZCIsImVudW0iLCJkZWxpdmVyeVNsb3RJZCIsIm9wdGlvbmFsIiwibm90ZXMiLCJjb3Vwb25Db2RlIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwiaWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJwYWdlIiwicGFyc2VJbnQiLCJnZXQiLCJsaW1pdCIsIndoZXJlIiwidXNlcklkIiwib3JkZXJzIiwidG90YWwiLCJQcm9taXNlIiwiYWxsIiwib3JkZXIiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJpdGVtcyIsInByb2R1Y3QiLCJpbWFnZXMiLCJ0YWtlIiwiYWRkcmVzcyIsImRlbGl2ZXJ5U2xvdCIsInRpbWVsaW5lIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsInNraXAiLCJjb3VudCIsInBhZ2luYXRpb24iLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJjb25zb2xlIiwiUE9TVCIsImJvZHkiLCJ2YWxpZGF0aW9uIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImRldGFpbHMiLCJlcnJvcnMiLCJkYXRhIiwiY2FydEl0ZW1zIiwiY2FydEl0ZW0iLCJsZW5ndGgiLCJmaW5kRmlyc3QiLCJpdGVtIiwic3RvY2tTdGF0dXMiLCJuYW1lIiwicXVhbnRpdHkiLCJzdG9ja0NvdW50Iiwic3VidG90YWwiLCJkaXNjb3VudCIsIk51bWJlciIsInByaWNlIiwib3JpZ2luYWxQcmljZSIsImRlbGl2ZXJ5RmVlIiwiY291cG9uRGlzY291bnQiLCJjb3Vwb24iLCJjb2RlIiwidG9VcHBlckNhc2UiLCJpc0FjdGl2ZSIsInZhbGlkRnJvbSIsImx0ZSIsIkRhdGUiLCJ2YWxpZFVudGlsIiwiZ3RlIiwibWluT3JkZXJBbW91bnQiLCJ1c2FnZUxpbWl0IiwidXNlZENvdW50IiwidHlwZSIsInZhbHVlIiwibWF4RGlzY291bnQiLCJtaW4iLCJ3YWxsZXQiLCJmaW5kVW5pcXVlIiwiYmFsYW5jZSIsIm9yZGVyQ291bnQiLCJvcmRlck51bWJlciIsIm5vdyIsInRvU3RyaW5nIiwic2xpY2UiLCJwYWRTdGFydCIsIiR0cmFuc2FjdGlvbiIsInR4IiwibmV3T3JkZXIiLCJjcmVhdGUiLCJwYXltZW50U3RhdHVzIiwiY291cG9uSWQiLCJtYXAiLCJwcm9kdWN0SWQiLCJwcm9kdWN0TmFtZSIsInByb2R1Y3RJbWFnZSIsInByb2R1Y3RVbml0IiwidW5pdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ1cGRhdGUiLCJkZWNyZW1lbnQiLCJpbmNyZW1lbnQiLCJ3YWxsZXRUcmFuc2FjdGlvbiIsIndhbGxldElkIiwiYW1vdW50IiwicmVmZXJlbmNlSWQiLCJkZWxldGVNYW55Iiwibm90aWZpY2F0aW9uIiwibWVzc2FnZSIsIm9yZGVySWQiLCJzZWxlY3QiLCJlbWFpbCIsIm9yZGVyRm9yRW1haWwiLCJlbWFpbFRlbXBsYXRlIiwib3JkZXJDb25maXJtYXRpb24iLCJ0byIsInN1YmplY3QiLCJodG1sIiwiZW1haWxFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var _auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/prisma-adapter */ \"(rsc)/./node_modules/@auth/prisma-adapter/index.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\n\nconst authOptions = {\n    adapter: (0,_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_4__[\"default\"]),\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\"\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                identifier: {\n                    label: \"Email or Phone\",\n                    type: \"text\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.identifier || !credentials?.password) {\n                    console.log(\"Missing credentials\");\n                    throw new Error(\"Please enter your email/phone and password\");\n                }\n                const identifier = credentials.identifier.trim();\n                console.log(\"Login attempt with identifier:\", identifier);\n                // Check if identifier is email or phone number\n                const isEmail = identifier.includes(\"@\");\n                console.log(\"Is email:\", isEmail);\n                let user;\n                if (isEmail) {\n                    // Login with email\n                    user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__[\"default\"].user.findUnique({\n                        where: {\n                            email: identifier\n                        }\n                    });\n                } else {\n                    // Login with phone number - normalize phone number\n                    const normalizedPhone = identifier.replace(/\\s+/g, \"\").replace(/^\\+91/, \"\").replace(/^91/, \"\");\n                    console.log(\"Looking for phone:\", normalizedPhone);\n                    // Try multiple phone formats\n                    user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__[\"default\"].user.findFirst({\n                        where: {\n                            OR: [\n                                {\n                                    phone: identifier\n                                },\n                                {\n                                    phone: normalizedPhone\n                                },\n                                {\n                                    phone: `+91${normalizedPhone}`\n                                },\n                                {\n                                    phone: `91${normalizedPhone}`\n                                }\n                            ]\n                        }\n                    });\n                }\n                console.log(\"User found:\", user ? \"Yes\" : \"No\");\n                if (!user || !user.password) {\n                    throw new Error(\"No account found with this email/phone\");\n                }\n                const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].compare(credentials.password, user.password);\n                if (!isPasswordValid) {\n                    console.log(\"Password invalid for user:\", user.email);\n                    throw new Error(\"Incorrect password\");\n                }\n                if (!user.isActive) {\n                    throw new Error(\"Your account has been disabled\");\n                }\n                console.log(\"Login successful for:\", user.email);\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    callbacks: {\n        async jwt ({ token, user, trigger, session }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n            }\n            // Handle session update\n            if (trigger === \"update\" && session) {\n                token.name = session.name;\n                token.image = session.image;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\"\n    },\n    events: {\n        async createUser ({ user }) {\n            // Create wallet for new user\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__[\"default\"].wallet.create({\n                data: {\n                    userId: user.id,\n                    balance: 100\n                }\n            });\n            // Create welcome notification\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__[\"default\"].notification.create({\n                data: {\n                    userId: user.id,\n                    type: \"SYSTEM\",\n                    title: \"Welcome to KARIM TRADERS!\",\n                    message: \"Your account has been created successfully. Enjoy â‚¹100 welcome bonus in your wallet!\"\n                }\n            });\n        }\n    },\n    debug: false\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ3FEO0FBQ2E7QUFDVjtBQUMxQjtBQUNJO0FBRTNCLE1BQU1LLGNBQStCO0lBQzFDQyxTQUFTTixtRUFBYUEsQ0FBQ0ksbURBQU1BO0lBQzdCRyxXQUFXO1FBQ1RMLHNFQUFjQSxDQUFDO1lBQ2JNLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCLElBQUk7WUFDMUNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUk7UUFDcEQ7UUFDQVosMkVBQW1CQSxDQUFDO1lBQ2xCYSxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLFlBQVk7b0JBQUVDLE9BQU87b0JBQWtCQyxNQUFNO2dCQUFPO2dCQUNwREMsVUFBVTtvQkFBRUYsT0FBTztvQkFBWUMsTUFBTTtnQkFBVztZQUNsRDtZQUNBLE1BQU1FLFdBQVVMLFdBQVc7Z0JBQ3pCLElBQUksQ0FBQ0EsYUFBYUMsY0FBYyxDQUFDRCxhQUFhSSxVQUFVO29CQUN0REUsUUFBUUMsR0FBRyxDQUFDO29CQUNaLE1BQU0sSUFBSUMsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTVAsYUFBYUQsWUFBWUMsVUFBVSxDQUFDUSxJQUFJO2dCQUM5Q0gsUUFBUUMsR0FBRyxDQUFDLGtDQUFrQ047Z0JBRTlDLCtDQUErQztnQkFDL0MsTUFBTVMsVUFBVVQsV0FBV1UsUUFBUSxDQUFDO2dCQUNwQ0wsUUFBUUMsR0FBRyxDQUFDLGFBQWFHO2dCQUV6QixJQUFJRTtnQkFDSixJQUFJRixTQUFTO29CQUNYLG1CQUFtQjtvQkFDbkJFLE9BQU8sTUFBTXZCLG1EQUFNQSxDQUFDdUIsSUFBSSxDQUFDQyxVQUFVLENBQUM7d0JBQ2xDQyxPQUFPOzRCQUFFQyxPQUFPZDt3QkFBVztvQkFDN0I7Z0JBQ0YsT0FBTztvQkFDTCxtREFBbUQ7b0JBQ25ELE1BQU1lLGtCQUFrQmYsV0FBV2dCLE9BQU8sQ0FBQyxRQUFRLElBQUlBLE9BQU8sQ0FBQyxTQUFTLElBQUlBLE9BQU8sQ0FBQyxPQUFPO29CQUMzRlgsUUFBUUMsR0FBRyxDQUFDLHNCQUFzQlM7b0JBRWxDLDZCQUE2QjtvQkFDN0JKLE9BQU8sTUFBTXZCLG1EQUFNQSxDQUFDdUIsSUFBSSxDQUFDTSxTQUFTLENBQUM7d0JBQ2pDSixPQUFPOzRCQUNMSyxJQUFJO2dDQUNGO29DQUFFQyxPQUFPbkI7Z0NBQVc7Z0NBQ3BCO29DQUFFbUIsT0FBT0o7Z0NBQWdCO2dDQUN6QjtvQ0FBRUksT0FBTyxDQUFDLEdBQUcsRUFBRUosZ0JBQWdCLENBQUM7Z0NBQUM7Z0NBQ2pDO29DQUFFSSxPQUFPLENBQUMsRUFBRSxFQUFFSixnQkFBZ0IsQ0FBQztnQ0FBQzs2QkFDakM7d0JBQ0g7b0JBQ0Y7Z0JBQ0Y7Z0JBRUFWLFFBQVFDLEdBQUcsQ0FBQyxlQUFlSyxPQUFPLFFBQVE7Z0JBRTFDLElBQUksQ0FBQ0EsUUFBUSxDQUFDQSxLQUFLUixRQUFRLEVBQUU7b0JBQzNCLE1BQU0sSUFBSUksTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTWEsa0JBQWtCLE1BQU1qQyx3REFBYyxDQUMxQ1ksWUFBWUksUUFBUSxFQUNwQlEsS0FBS1IsUUFBUTtnQkFHZixJQUFJLENBQUNpQixpQkFBaUI7b0JBQ3BCZixRQUFRQyxHQUFHLENBQUMsOEJBQThCSyxLQUFLRyxLQUFLO29CQUNwRCxNQUFNLElBQUlQLE1BQU07Z0JBQ2xCO2dCQUVBLElBQUksQ0FBQ0ksS0FBS1csUUFBUSxFQUFFO29CQUNsQixNQUFNLElBQUlmLE1BQU07Z0JBQ2xCO2dCQUVBRixRQUFRQyxHQUFHLENBQUMseUJBQXlCSyxLQUFLRyxLQUFLO2dCQUUvQyxPQUFPO29CQUNMUyxJQUFJWixLQUFLWSxFQUFFO29CQUNYVCxPQUFPSCxLQUFLRyxLQUFLO29CQUNqQmhCLE1BQU1hLEtBQUtiLElBQUk7b0JBQ2YwQixPQUFPYixLQUFLYSxLQUFLO29CQUNqQkMsTUFBTWQsS0FBS2MsSUFBSTtnQkFDakI7WUFDRjtRQUNGO0tBQ0Q7SUFDREMsU0FBUztRQUNQQyxVQUFVO1FBQ1ZDLFFBQVEsS0FBSyxLQUFLLEtBQUs7SUFDekI7SUFDQUMsV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsS0FBSyxFQUFFcEIsSUFBSSxFQUFFcUIsT0FBTyxFQUFFTixPQUFPLEVBQUU7WUFDekMsSUFBSWYsTUFBTTtnQkFDUm9CLE1BQU1SLEVBQUUsR0FBR1osS0FBS1ksRUFBRTtnQkFDbEJRLE1BQU1OLElBQUksR0FBRyxLQUFjQSxJQUFJO1lBQ2pDO1lBRUEsd0JBQXdCO1lBQ3hCLElBQUlPLFlBQVksWUFBWU4sU0FBUztnQkFDbkNLLE1BQU1qQyxJQUFJLEdBQUc0QixRQUFRNUIsSUFBSTtnQkFDekJpQyxNQUFNUCxLQUFLLEdBQUdFLFFBQVFGLEtBQUs7WUFDN0I7WUFFQSxPQUFPTztRQUNUO1FBQ0EsTUFBTUwsU0FBUSxFQUFFQSxPQUFPLEVBQUVLLEtBQUssRUFBRTtZQUM5QixJQUFJTCxRQUFRZixJQUFJLEVBQUU7Z0JBQ2hCZSxRQUFRZixJQUFJLENBQUNZLEVBQUUsR0FBR1EsTUFBTVIsRUFBRTtnQkFDMUJHLFFBQVFmLElBQUksQ0FBQ2MsSUFBSSxHQUFHTSxNQUFNTixJQUFJO1lBQ2hDO1lBQ0EsT0FBT0M7UUFDVDtJQUNGO0lBQ0FPLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxPQUFPO0lBQ1Q7SUFDQUMsUUFBUTtRQUNOLE1BQU1DLFlBQVcsRUFBRTFCLElBQUksRUFBRTtZQUN2Qiw2QkFBNkI7WUFDN0IsTUFBTXZCLG1EQUFNQSxDQUFDa0QsTUFBTSxDQUFDQyxNQUFNLENBQUM7Z0JBQ3pCQyxNQUFNO29CQUNKQyxRQUFROUIsS0FBS1ksRUFBRTtvQkFDZm1CLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLDhCQUE4QjtZQUM5QixNQUFNdEQsbURBQU1BLENBQUN1RCxZQUFZLENBQUNKLE1BQU0sQ0FBQztnQkFDL0JDLE1BQU07b0JBQ0pDLFFBQVE5QixLQUFLWSxFQUFFO29CQUNmckIsTUFBTTtvQkFDTjBDLE9BQU87b0JBQ1BDLFNBQVM7Z0JBQ1g7WUFDRjtRQUNGO0lBQ0Y7SUFDQUMsT0FBTztBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJpbS10cmFkZXJzLy4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcclxuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gJ0BhdXRoL3ByaXNtYS1hZGFwdGVyJztcclxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XHJcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xyXG5pbXBvcnQgcHJpc21hIGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcclxuICBhZGFwdGVyOiBQcmlzbWFBZGFwdGVyKHByaXNtYSkgYXMgYW55LFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCB8fCAnJyxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcclxuICAgIH0pLFxyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6ICdjcmVkZW50aWFscycsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiB7XHJcbiAgICAgICAgaWRlbnRpZmllcjogeyBsYWJlbDogJ0VtYWlsIG9yIFBob25lJywgdHlwZTogJ3RleHQnIH0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfSxcclxuICAgICAgfSxcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uaWRlbnRpZmllciB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTWlzc2luZyBjcmVkZW50aWFscycpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZW50ZXIgeW91ciBlbWFpbC9waG9uZSBhbmQgcGFzc3dvcmQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBjcmVkZW50aWFscy5pZGVudGlmaWVyLnRyaW0oKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnTG9naW4gYXR0ZW1wdCB3aXRoIGlkZW50aWZpZXI6JywgaWRlbnRpZmllcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgaWRlbnRpZmllciBpcyBlbWFpbCBvciBwaG9uZSBudW1iZXJcclxuICAgICAgICBjb25zdCBpc0VtYWlsID0gaWRlbnRpZmllci5pbmNsdWRlcygnQCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJcyBlbWFpbDonLCBpc0VtYWlsKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdXNlcjtcclxuICAgICAgICBpZiAoaXNFbWFpbCkge1xyXG4gICAgICAgICAgLy8gTG9naW4gd2l0aCBlbWFpbFxyXG4gICAgICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogaWRlbnRpZmllciB9LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIExvZ2luIHdpdGggcGhvbmUgbnVtYmVyIC0gbm9ybWFsaXplIHBob25lIG51bWJlclxyXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFBob25lID0gaWRlbnRpZmllci5yZXBsYWNlKC9cXHMrL2csICcnKS5yZXBsYWNlKC9eXFwrOTEvLCAnJykucmVwbGFjZSgvXjkxLywgJycpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0xvb2tpbmcgZm9yIHBob25lOicsIG5vcm1hbGl6ZWRQaG9uZSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFRyeSBtdWx0aXBsZSBwaG9uZSBmb3JtYXRzXHJcbiAgICAgICAgICB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZEZpcnN0KHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICBPUjogW1xyXG4gICAgICAgICAgICAgICAgeyBwaG9uZTogaWRlbnRpZmllciB9LFxyXG4gICAgICAgICAgICAgICAgeyBwaG9uZTogbm9ybWFsaXplZFBob25lIH0sXHJcbiAgICAgICAgICAgICAgICB7IHBob25lOiBgKzkxJHtub3JtYWxpemVkUGhvbmV9YCB9LFxyXG4gICAgICAgICAgICAgICAgeyBwaG9uZTogYDkxJHtub3JtYWxpemVkUGhvbmV9YCB9LFxyXG4gICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBmb3VuZDonLCB1c2VyID8gJ1llcycgOiAnTm8nKTtcclxuXHJcbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFjY291bnQgZm91bmQgd2l0aCB0aGlzIGVtYWlsL3Bob25lJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcclxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnUGFzc3dvcmQgaW52YWxpZCBmb3IgdXNlcjonLCB1c2VyLmVtYWlsKTtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhc3N3b3JkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXVzZXIuaXNBY3RpdmUpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91ciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBzdWNjZXNzZnVsIGZvcjonLCB1c2VyLmVtYWlsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSxcclxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICB9O1xyXG4gICAgICB9LFxyXG4gICAgfSksXHJcbiAgXSxcclxuICBzZXNzaW9uOiB7XHJcbiAgICBzdHJhdGVneTogJ2p3dCcsXHJcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCB0cmlnZ2VyLCBzZXNzaW9uIH0pIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XHJcbiAgICAgICAgdG9rZW4ucm9sZSA9ICh1c2VyIGFzIGFueSkucm9sZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSGFuZGxlIHNlc3Npb24gdXBkYXRlXHJcbiAgICAgIGlmICh0cmlnZ2VyID09PSAndXBkYXRlJyAmJiBzZXNzaW9uKSB7XHJcbiAgICAgICAgdG9rZW4ubmFtZSA9IHNlc3Npb24ubmFtZTtcclxuICAgICAgICB0b2tlbi5pbWFnZSA9IHNlc3Npb24uaW1hZ2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH0sXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nO1xyXG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZSBhcyBzdHJpbmc7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogJy9sb2dpbicsXHJcbiAgICBlcnJvcjogJy9sb2dpbicsXHJcbiAgfSxcclxuICBldmVudHM6IHtcclxuICAgIGFzeW5jIGNyZWF0ZVVzZXIoeyB1c2VyIH0pIHtcclxuICAgICAgLy8gQ3JlYXRlIHdhbGxldCBmb3IgbmV3IHVzZXJcclxuICAgICAgYXdhaXQgcHJpc21hLndhbGxldC5jcmVhdGUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICAgIGJhbGFuY2U6IDEwMCwgLy8gV2VsY29tZSBib251c1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIHdlbGNvbWUgbm90aWZpY2F0aW9uXHJcbiAgICAgIGF3YWl0IHByaXNtYS5ub3RpZmljYXRpb24uY3JlYXRlKHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICB0eXBlOiAnU1lTVEVNJyxcclxuICAgICAgICAgIHRpdGxlOiAnV2VsY29tZSB0byBLQVJJTSBUUkFERVJTIScsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LiBFbmpveSDigrkxMDAgd2VsY29tZSBib251cyBpbiB5b3VyIHdhbGxldCEnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGRlYnVnOiBmYWxzZSxcclxufTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUFkYXB0ZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJiY3J5cHQiLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJpZGVudGlmaWVyIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJjb25zb2xlIiwibG9nIiwiRXJyb3IiLCJ0cmltIiwiaXNFbWFpbCIsImluY2x1ZGVzIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImVtYWlsIiwibm9ybWFsaXplZFBob25lIiwicmVwbGFjZSIsImZpbmRGaXJzdCIsIk9SIiwicGhvbmUiLCJpc1Bhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwiaXNBY3RpdmUiLCJpZCIsImltYWdlIiwicm9sZSIsInNlc3Npb24iLCJzdHJhdGVneSIsIm1heEFnZSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwidHJpZ2dlciIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJldmVudHMiLCJjcmVhdGVVc2VyIiwid2FsbGV0IiwiY3JlYXRlIiwiZGF0YSIsInVzZXJJZCIsImJhbGFuY2UiLCJub3RpZmljYXRpb24iLCJ0aXRsZSIsIm1lc3NhZ2UiLCJkZWJ1ZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/email.ts":
/*!**************************!*\
  !*** ./src/lib/email.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailTemplates: () => (/* binding */ emailTemplates),\n/* harmony export */   generatePasswordResetEmail: () => (/* binding */ generatePasswordResetEmail),\n/* harmony export */   sendEmail: () => (/* binding */ sendEmail)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n\nconst transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n    host: process.env.SMTP_HOST,\n    port: parseInt(process.env.SMTP_PORT || \"587\"),\n    secure: process.env.SMTP_PORT === \"465\",\n    auth: {\n        user: process.env.SMTP_USER,\n        pass: process.env.SMTP_PASSWORD\n    }\n});\nasync function sendEmail(options) {\n    try {\n        const info = await transporter.sendMail({\n            from: `\"KARIM TRADERS\" <${process.env.EMAIL_FROM}>`,\n            to: options.to,\n            subject: options.subject,\n            text: options.text,\n            html: options.html\n        });\n        console.log(\"Email sent:\", info.messageId);\n        return {\n            success: true,\n            messageId: info.messageId\n        };\n    } catch (error) {\n        console.error(\"Email send error:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\n// Email templates\nconst emailTemplates = {\n    welcome: (name)=>({\n            subject: \"Welcome to KARIM TRADERS!\",\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #22c55e; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>Welcome to KARIM TRADERS!</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>Hi ${name},</p>\r\n            <p>Thank you for creating an account with KARIM TRADERS. We're excited to have you on board!</p>\r\n            <p>Start exploring our wide range of fresh groceries:</p>\r\n            <ul>\r\n              <li>ðŸŽ Fresh Fruits</li>\r\n              <li>ðŸ¥¬ Fresh Vegetables</li>\r\n              <li>ðŸ¥œ Premium Dry Fruits</li>\r\n              <li>ðŸŒ¶ï¸ Authentic Spices</li>\r\n            </ul>\r\n            <p style=\"text-align: center;\">\r\n              <a href=\"${\"http://localhost:3000\"}/products\" class=\"button\">Start Shopping</a>\r\n            </p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. All rights reserved.</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    orderConfirmation: (order)=>({\n            subject: `Order Confirmed - #${order.orderNumber}`,\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #22c55e; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .order-details { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; }\r\n          .item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; }\r\n          .total { font-weight: bold; font-size: 18px; color: #22c55e; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>Order Confirmed! âœ“</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>Hi ${order.user?.name || \"Customer\"},</p>\r\n            <p>Thank you for your order! We've received your order and it's being processed.</p>\r\n            \r\n            <div class=\"order-details\">\r\n              <h3>Order #${order.orderNumber}</h3>\r\n              <p>Placed on: ${new Date(order.createdAt).toLocaleDateString(\"en-IN\", {\n                dateStyle: \"long\"\n            })}</p>\r\n              \r\n              <h4>Items:</h4>\r\n              ${order.items.map((item)=>`\r\n                <div class=\"item\">\r\n                  <span>${item.name} Ã— ${item.quantity}</span>\r\n                  <span>â‚¹${(item.price * item.quantity).toFixed(2)}</span>\r\n                </div>\r\n              `).join(\"\")}\r\n              \r\n              <div style=\"margin-top: 15px; padding-top: 15px; border-top: 2px solid #22c55e;\">\r\n                <div class=\"item\">\r\n                  <span>Subtotal</span>\r\n                  <span>â‚¹${order.subtotal.toFixed(2)}</span>\r\n                </div>\r\n                ${order.discount > 0 ? `\r\n                <div class=\"item\">\r\n                  <span>Discount</span>\r\n                  <span>-â‚¹${order.discount.toFixed(2)}</span>\r\n                </div>\r\n                ` : \"\"}\r\n                <div class=\"item\">\r\n                  <span>Delivery Fee</span>\r\n                  <span>${order.deliveryFee > 0 ? `â‚¹${order.deliveryFee.toFixed(2)}` : \"FREE\"}</span>\r\n                </div>\r\n                <div class=\"item total\">\r\n                  <span>Total</span>\r\n                  <span>â‚¹${order.total.toFixed(2)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <h4>Delivery Address:</h4>\r\n            <p>\r\n              ${order.address?.name}<br>\r\n              ${order.address?.addressLine1}<br>\r\n              ${order.address?.addressLine2 ? order.address.addressLine2 + \"<br>\" : \"\"}\r\n              ${order.address?.city}, ${order.address?.state} - ${order.address?.pincode}\r\n            </p>\r\n            \r\n            <p style=\"text-align: center;\">\r\n              <a href=\"${\"http://localhost:3000\"}/account/orders/${order.id}\" class=\"button\">Track Order</a>\r\n            </p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. All rights reserved.</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    orderStatusUpdate: (order, status, message)=>({\n            subject: `Order Update - #${order.orderNumber}`,\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #22c55e; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .status-badge { display: inline-block; background: #22c55e; color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>Order Update</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>Hi ${order.user?.name || \"Customer\"},</p>\r\n            <p>Your order #${order.orderNumber} has been updated:</p>\r\n            \r\n            <p style=\"text-align: center; margin: 20px 0;\">\r\n              <span class=\"status-badge\">${status.replace(/_/g, \" \")}</span>\r\n            </p>\r\n            \r\n            <p>${message}</p>\r\n            \r\n            <p style=\"text-align: center;\">\r\n              <a href=\"${\"http://localhost:3000\"}/account/orders/${order.id}\" class=\"button\">View Order Details</a>\r\n            </p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. All rights reserved.</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    passwordReset: (name, resetUrl)=>({\n            subject: \"Reset Your Password - KARIM TRADERS\",\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #22c55e; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>Password Reset</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>Hi ${name},</p>\r\n            <p>We received a request to reset your password. Click the button below to create a new password:</p>\r\n            \r\n            <p style=\"text-align: center; margin: 30px 0;\">\r\n              <a href=\"${resetUrl}\" class=\"button\">Reset Password</a>\r\n            </p>\r\n            \r\n            <p>If you didn't request this, you can safely ignore this email. Your password won't be changed.</p>\r\n            <p>This link will expire in 1 hour.</p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. All rights reserved.</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    lowStockAlert: (products)=>({\n            subject: \"âš ï¸ Low Stock Alert - KARIM TRADERS\",\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #f59e0b; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .product-list { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; }\r\n          .product-item { padding: 10px 0; border-bottom: 1px solid #eee; }\r\n          .product-item:last-child { border-bottom: none; }\r\n          .stock-warning { color: #f59e0b; font-weight: bold; }\r\n          .stock-critical { color: #ef4444; font-weight: bold; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>âš ï¸ Low Stock Alert</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>The following products are running low on stock and need attention:</p>\r\n            \r\n            <div class=\"product-list\">\r\n              ${products.map((product)=>`\r\n                <div class=\"product-item\">\r\n                  <strong>${product.name}</strong><br>\r\n                  <span>SKU: ${product.sku}</span><br>\r\n                  <span class=\"${product.stockCount <= 5 ? \"stock-critical\" : \"stock-warning\"}\">\r\n                    Current Stock: ${product.stockCount} (Alert threshold: ${product.lowStockAlert})\r\n                  </span>\r\n                </div>\r\n              `).join(\"\")}\r\n            </div>\r\n            \r\n            <p style=\"text-align: center;\">\r\n              <a href=\"${\"http://localhost:3000\"}/admin/products\" class=\"button\">Manage Inventory</a>\r\n            </p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. Admin Alert System</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    outOfStockAlert: (products)=>({\n            subject: \"\\uD83D\\uDEA8 Out of Stock Alert - KARIM TRADERS\",\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #ef4444; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .product-list { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; }\r\n          .product-item { padding: 10px 0; border-bottom: 1px solid #eee; }\r\n          .product-item:last-child { border-bottom: none; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>ðŸš¨ Out of Stock Alert</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>The following products are now OUT OF STOCK:</p>\r\n            \r\n            <div class=\"product-list\">\r\n              ${products.map((product)=>`\r\n                <div class=\"product-item\">\r\n                  <strong>${product.name}</strong><br>\r\n                  <span>SKU: ${product.sku}</span>\r\n                </div>\r\n              `).join(\"\")}\r\n            </div>\r\n            \r\n            <p>Please restock these items as soon as possible to avoid losing sales.</p>\r\n            \r\n            <p style=\"text-align: center;\">\r\n              <a href=\"${\"http://localhost:3000\"}/admin/products\" class=\"button\">Update Inventory</a>\r\n            </p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. Admin Alert System</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        }),\n    deliveryAssignment: (order, deliveryPerson)=>({\n            subject: `New Delivery Assignment - Order #${order.orderNumber}`,\n            html: `\r\n      <!DOCTYPE html>\r\n      <html>\r\n      <head>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\r\n          .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n          .header { background: #3b82f6; color: white; padding: 20px; text-align: center; }\r\n          .content { padding: 20px; background: #f9f9f9; }\r\n          .details { background: white; padding: 15px; border-radius: 5px; margin: 15px 0; }\r\n          .button { display: inline-block; background: #22c55e; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; }\r\n          .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"container\">\r\n          <div class=\"header\">\r\n            <h1>New Delivery Assignment</h1>\r\n          </div>\r\n          <div class=\"content\">\r\n            <p>Hi ${deliveryPerson.name},</p>\r\n            <p>You have been assigned a new delivery:</p>\r\n            \r\n            <div class=\"details\">\r\n              <h3>Order #${order.orderNumber}</h3>\r\n              <p><strong>Customer:</strong> ${order.address?.name}</p>\r\n              <p><strong>Phone:</strong> ${order.address?.phone}</p>\r\n              <p><strong>Address:</strong><br>\r\n                ${order.address?.addressLine1}<br>\r\n                ${order.address?.addressLine2 ? order.address.addressLine2 + \"<br>\" : \"\"}\r\n                ${order.address?.city}, ${order.address?.state} - ${order.address?.pincode}\r\n              </p>\r\n              ${order.address?.landmark ? `<p><strong>Landmark:</strong> ${order.address.landmark}</p>` : \"\"}\r\n              <p><strong>Payment:</strong> ${order.paymentMethod} - ${order.paymentStatus === \"PAID\" ? \"Already Paid\" : \"Collect â‚¹\" + order.total}</p>\r\n            </div>\r\n            \r\n            <p>Please deliver this order promptly and update the status once delivered.</p>\r\n          </div>\r\n          <div class=\"footer\">\r\n            <p>Â© ${new Date().getFullYear()} KARIM TRADERS. Delivery Team</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n        })\n};\n// Password Reset Email Generator\nfunction generatePasswordResetEmail(name, resetUrl) {\n    return `\r\n    <!DOCTYPE html>\r\n    <html>\r\n    <head>\r\n      <style>\r\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }\r\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; }\r\n        .header { background: #22c55e; color: white; padding: 30px 20px; text-align: center; border-radius: 8px 8px 0 0; }\r\n        .header h1 { margin: 0; font-size: 24px; }\r\n        .content { padding: 30px 20px; background: #f9f9f9; }\r\n        .button { display: inline-block; background: #22c55e; color: white !important; padding: 14px 28px; text-decoration: none; border-radius: 5px; font-weight: bold; margin: 20px 0; }\r\n        .button:hover { background: #16a34a; }\r\n        .warning { background: #fef3cd; border: 1px solid #ffc107; padding: 15px; border-radius: 5px; margin: 20px 0; }\r\n        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; background: #f0f0f0; border-radius: 0 0 8px 8px; }\r\n        .link-text { word-break: break-all; font-size: 12px; color: #666; background: #e9e9e9; padding: 10px; border-radius: 4px; }\r\n      </style>\r\n    </head>\r\n    <body>\r\n      <div class=\"container\">\r\n        <div class=\"header\">\r\n          <h1>ðŸ” Reset Your Password</h1>\r\n        </div>\r\n        <div class=\"content\">\r\n          <p>Hi ${name},</p>\r\n          <p>We received a request to reset your password for your KARIM TRADERS account. Click the button below to set a new password:</p>\r\n          \r\n          <p style=\"text-align: center;\">\r\n            <a href=\"${resetUrl}\" class=\"button\">Reset Password</a>\r\n          </p>\r\n          \r\n          <div class=\"warning\">\r\n            <strong>âš ï¸ Important:</strong>\r\n            <ul style=\"margin: 10px 0 0; padding-left: 20px;\">\r\n              <li>This link will expire in <strong>1 hour</strong></li>\r\n              <li>If you didn't request this, please ignore this email</li>\r\n              <li>Your password won't change until you create a new one</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <p>If the button doesn't work, copy and paste this link into your browser:</p>\r\n          <p class=\"link-text\">${resetUrl}</p>\r\n          \r\n          <p>If you didn't request a password reset, please contact our support team immediately.</p>\r\n          \r\n          <p>Best regards,<br>The KARIM TRADERS Team</p>\r\n        </div>\r\n        <div class=\"footer\">\r\n          <p>Â© ${new Date().getFullYear()} KARIM TRADERS. All rights reserved.</p>\r\n          <p>This is an automated email. Please do not reply.</p>\r\n        </div>\r\n      </div>\r\n    </body>\r\n    </html>\r\n  `;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRXJCLEtBQUs7eUNBQ3pCLEVBQUVLLE1BQU1nQixPQUFPLEVBQUVxQixNQUFNOztnQkFFaEQsRUFBRXJDLE1BQU1nQixPQUFPLEVBQUVDLGFBQWE7Z0JBQzlCLEVBQUVqQixNQUFNZ0IsT0FBTyxFQUFFRSxlQUFlbEIsTUFBTWdCLE9BQU8sQ0FBQ0UsWUFBWSxHQUFHLFNBQVMsR0FBRztnQkFDekUsRUFBRWxCLE1BQU1nQixPQUFPLEVBQUVHLEtBQUssRUFBRSxFQUFFbkIsTUFBTWdCLE9BQU8sRUFBRUksTUFBTSxHQUFHLEVBQUVwQixNQUFNZ0IsT0FBTyxFQUFFSyxRQUFROztjQUU3RSxFQUFFckIsTUFBTWdCLE9BQU8sRUFBRXNCLFdBQVcsQ0FBQyw4QkFBOEIsRUFBRXRDLE1BQU1nQixPQUFPLENBQUNzQixRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRzsyQ0FDbEUsRUFBRXRDLE1BQU11QyxhQUFhLENBQUMsR0FBRyxFQUFFdkMsTUFBTXdDLGFBQWEsS0FBSyxTQUFTLGlCQUFpQixjQUFjeEMsTUFBTWUsS0FBSyxDQUFDOzs7Ozs7aUJBTWpJLEVBQUUsSUFBSWxCLE9BQU9DLFdBQVcsR0FBRzs7Ozs7SUFLeEMsQ0FBQztRQUNIO0FBQ0YsRUFBRTtBQUVGLGlDQUFpQztBQUMxQixTQUFTMkMsMkJBQTJCOUMsSUFBWSxFQUFFaUMsUUFBZ0I7SUFDdkUsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnQkF1Qk0sRUFBRWpDLEtBQUs7Ozs7cUJBSUYsRUFBRWlDLFNBQVM7Ozs7Ozs7Ozs7Ozs7K0JBYUQsRUFBRUEsU0FBUzs7Ozs7OztlQU8zQixFQUFFLElBQUkvQixPQUFPQyxXQUFXLEdBQUc7Ozs7OztFQU14QyxDQUFDO0FBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJpbS10cmFkZXJzLy4vc3JjL2xpYi9lbWFpbC50cz80YzE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xyXG5cclxuY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuU01UUF9IT1NULFxyXG4gIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlNNVFBfUE9SVCB8fCAnNTg3JyksXHJcbiAgc2VjdXJlOiBwcm9jZXNzLmVudi5TTVRQX1BPUlQgPT09ICc0NjUnLFxyXG4gIGF1dGg6IHtcclxuICAgIHVzZXI6IHByb2Nlc3MuZW52LlNNVFBfVVNFUixcclxuICAgIHBhc3M6IHByb2Nlc3MuZW52LlNNVFBfUEFTU1dPUkQsXHJcbiAgfSxcclxufSk7XHJcblxyXG5pbnRlcmZhY2UgRW1haWxPcHRpb25zIHtcclxuICB0bzogc3RyaW5nO1xyXG4gIHN1YmplY3Q6IHN0cmluZztcclxuICBodG1sOiBzdHJpbmc7XHJcbiAgdGV4dD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbChvcHRpb25zOiBFbWFpbE9wdGlvbnMpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKHtcclxuICAgICAgZnJvbTogYFwiS0FSSU0gVFJBREVSU1wiIDwke3Byb2Nlc3MuZW52LkVNQUlMX0ZST019PmAsXHJcbiAgICAgIHRvOiBvcHRpb25zLnRvLFxyXG4gICAgICBzdWJqZWN0OiBvcHRpb25zLnN1YmplY3QsXHJcbiAgICAgIHRleHQ6IG9wdGlvbnMudGV4dCxcclxuICAgICAgaHRtbDogb3B0aW9ucy5odG1sLFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50OicsIGluZm8ubWVzc2FnZUlkKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2VJZDogaW5mby5tZXNzYWdlSWQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRW1haWwgc2VuZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEVtYWlsIHRlbXBsYXRlc1xyXG5leHBvcnQgY29uc3QgZW1haWxUZW1wbGF0ZXMgPSB7XHJcbiAgd2VsY29tZTogKG5hbWU6IHN0cmluZykgPT4gKHtcclxuICAgIHN1YmplY3Q6ICdXZWxjb21lIHRvIEtBUklNIFRSQURFUlMhJyxcclxuICAgIGh0bWw6IGBcclxuICAgICAgPCFET0NUWVBFIGh0bWw+XHJcbiAgICAgIDxodG1sPlxyXG4gICAgICA8aGVhZD5cclxuICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMzsgfVxyXG4gICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XHJcbiAgICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogIzIyYzU1ZTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cclxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfVxyXG4gICAgICAgICAgLmJ1dHRvbiB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgYmFja2dyb3VuZDogIzIyYzU1ZTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMnB4IDI0cHg7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyB9XHJcbiAgICAgICAgICAuZm9vdGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAyMHB4OyBjb2xvcjogIzY2NjsgZm9udC1zaXplOiAxMnB4OyB9XHJcbiAgICAgICAgPC9zdHlsZT5cclxuICAgICAgPC9oZWFkPlxyXG4gICAgICA8Ym9keT5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxoMT5XZWxjb21lIHRvIEtBUklNIFRSQURFUlMhPC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+SGkgJHtuYW1lfSw8L3A+XHJcbiAgICAgICAgICAgIDxwPlRoYW5rIHlvdSBmb3IgY3JlYXRpbmcgYW4gYWNjb3VudCB3aXRoIEtBUklNIFRSQURFUlMuIFdlJ3JlIGV4Y2l0ZWQgdG8gaGF2ZSB5b3Ugb24gYm9hcmQhPC9wPlxyXG4gICAgICAgICAgICA8cD5TdGFydCBleHBsb3Jpbmcgb3VyIHdpZGUgcmFuZ2Ugb2YgZnJlc2ggZ3JvY2VyaWVzOjwvcD5cclxuICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgIDxsaT7wn42OIEZyZXNoIEZydWl0czwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPvCfpawgRnJlc2ggVmVnZXRhYmxlczwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPvCfpZwgUHJlbWl1bSBEcnkgRnJ1aXRzPC9saT5cclxuICAgICAgICAgICAgICA8bGk+8J+Mtu+4jyBBdXRoZW50aWMgU3BpY2VzPC9saT5cclxuICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vcHJvZHVjdHNcIiBjbGFzcz1cImJ1dHRvblwiPlN0YXJ0IFNob3BwaW5nPC9hPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cclxuICAgICAgICAgICAgPHA+wqkgJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IEtBUklNIFRSQURFUlMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvYm9keT5cclxuICAgICAgPC9odG1sPlxyXG4gICAgYCxcclxuICB9KSxcclxuXHJcbiAgb3JkZXJDb25maXJtYXRpb246IChvcmRlcjogYW55KSA9PiAoe1xyXG4gICAgc3ViamVjdDogYE9yZGVyIENvbmZpcm1lZCAtICMke29yZGVyLm9yZGVyTnVtYmVyfWAsXHJcbiAgICBodG1sOiBgXHJcbiAgICAgIDwhRE9DVFlQRSBodG1sPlxyXG4gICAgICA8aHRtbD5cclxuICAgICAgPGhlYWQ+XHJcbiAgICAgICAgPHN0eWxlPlxyXG4gICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6ICMzMzM7IH1cclxuICAgICAgICAgIC5jb250YWluZXIgeyBtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjBweDsgfVxyXG4gICAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6ICMyMmM1NWU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9XHJcbiAgICAgICAgICAuY29udGVudCB7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IH1cclxuICAgICAgICAgIC5vcmRlci1kZXRhaWxzIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luOiAxNXB4IDA7IH1cclxuICAgICAgICAgIC5pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiA4cHggMDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH1cclxuICAgICAgICAgIC50b3RhbCB7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDE4cHg7IGNvbG9yOiAjMjJjNTVlOyB9XHJcbiAgICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cclxuICAgICAgICAgIC5mb290ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDIwcHg7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDEycHg7IH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPk9yZGVyIENvbmZpcm1lZCEg4pyTPC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+SGkgJHtvcmRlci51c2VyPy5uYW1lIHx8ICdDdXN0b21lcid9LDwvcD5cclxuICAgICAgICAgICAgPHA+VGhhbmsgeW91IGZvciB5b3VyIG9yZGVyISBXZSd2ZSByZWNlaXZlZCB5b3VyIG9yZGVyIGFuZCBpdCdzIGJlaW5nIHByb2Nlc3NlZC48L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3JkZXItZGV0YWlsc1wiPlxyXG4gICAgICAgICAgICAgIDxoMz5PcmRlciAjJHtvcmRlci5vcmRlck51bWJlcn08L2gzPlxyXG4gICAgICAgICAgICAgIDxwPlBsYWNlZCBvbjogJHtuZXcgRGF0ZShvcmRlci5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tSU4nLCB7IGRhdGVTdHlsZTogJ2xvbmcnIH0pfTwvcD5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8aDQ+SXRlbXM6PC9oND5cclxuICAgICAgICAgICAgICAke29yZGVyLml0ZW1zLm1hcCgoaXRlbTogYW55KSA9PiBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj4ke2l0ZW0ubmFtZX0gw5cgJHtpdGVtLnF1YW50aXR5fTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4+4oK5JHsoaXRlbS5wcmljZSAqIGl0ZW0ucXVhbnRpdHkpLnRvRml4ZWQoMil9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDE1cHg7IHBhZGRpbmctdG9wOiAxNXB4OyBib3JkZXItdG9wOiAycHggc29saWQgIzIyYzU1ZTtcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuPlN1YnRvdGFsPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj7igrkke29yZGVyLnN1YnRvdGFsLnRvRml4ZWQoMil9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAke29yZGVyLmRpc2NvdW50ID4gMCA/IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuPkRpc2NvdW50PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj4t4oK5JHtvcmRlci5kaXNjb3VudC50b0ZpeGVkKDIpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgYCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4+RGVsaXZlcnkgRmVlPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj4ke29yZGVyLmRlbGl2ZXJ5RmVlID4gMCA/IGDigrkke29yZGVyLmRlbGl2ZXJ5RmVlLnRvRml4ZWQoMil9YCA6ICdGUkVFJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtIHRvdGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuPlRvdGFsPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj7igrkke29yZGVyLnRvdGFsLnRvRml4ZWQoMil9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGg0PkRlbGl2ZXJ5IEFkZHJlc3M6PC9oND5cclxuICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgJHtvcmRlci5hZGRyZXNzPy5uYW1lfTxicj5cclxuICAgICAgICAgICAgICAke29yZGVyLmFkZHJlc3M/LmFkZHJlc3NMaW5lMX08YnI+XHJcbiAgICAgICAgICAgICAgJHtvcmRlci5hZGRyZXNzPy5hZGRyZXNzTGluZTIgPyBvcmRlci5hZGRyZXNzLmFkZHJlc3NMaW5lMiArICc8YnI+JyA6ICcnfVxyXG4gICAgICAgICAgICAgICR7b3JkZXIuYWRkcmVzcz8uY2l0eX0sICR7b3JkZXIuYWRkcmVzcz8uc3RhdGV9IC0gJHtvcmRlci5hZGRyZXNzPy5waW5jb2RlfVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMfS9hY2NvdW50L29yZGVycy8ke29yZGVyLmlkfVwiIGNsYXNzPVwiYnV0dG9uXCI+VHJhY2sgT3JkZXI8L2E+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD7CqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gS0FSSU0gVFJBREVSUy4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9ib2R5PlxyXG4gICAgICA8L2h0bWw+XHJcbiAgICBgLFxyXG4gIH0pLFxyXG5cclxuICBvcmRlclN0YXR1c1VwZGF0ZTogKG9yZGVyOiBhbnksIHN0YXR1czogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpID0+ICh7XHJcbiAgICBzdWJqZWN0OiBgT3JkZXIgVXBkYXRlIC0gIyR7b3JkZXIub3JkZXJOdW1iZXJ9YCxcclxuICAgIGh0bWw6IGBcclxuICAgICAgPCFET0NUWVBFIGh0bWw+XHJcbiAgICAgIDxodG1sPlxyXG4gICAgICA8aGVhZD5cclxuICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMzsgfVxyXG4gICAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XHJcbiAgICAgICAgICAuaGVhZGVyIHsgYmFja2dyb3VuZDogIzIyYzU1ZTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cclxuICAgICAgICAgIC5jb250ZW50IHsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfVxyXG4gICAgICAgICAgLnN0YXR1cy1iYWRnZSB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgYmFja2dyb3VuZDogIzIyYzU1ZTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiA4cHggMTZweDsgYm9yZGVyLXJhZGl1czogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH1cclxuICAgICAgICAgIC5idXR0b24geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGJhY2tncm91bmQ6ICMyMmM1NWU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweCAyNHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxyXG4gICAgICAgICAgLmZvb3RlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsgY29sb3I6ICM2NjY7IGZvbnQtc2l6ZTogMTJweDsgfVxyXG4gICAgICAgIDwvc3R5bGU+XHJcbiAgICAgIDwvaGVhZD5cclxuICAgICAgPGJvZHk+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxyXG4gICAgICAgICAgICA8aDE+T3JkZXIgVXBkYXRlPC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+SGkgJHtvcmRlci51c2VyPy5uYW1lIHx8ICdDdXN0b21lcid9LDwvcD5cclxuICAgICAgICAgICAgPHA+WW91ciBvcmRlciAjJHtvcmRlci5vcmRlck51bWJlcn0gaGFzIGJlZW4gdXBkYXRlZDo8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAyMHB4IDA7XCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0dXMtYmFkZ2VcIj4ke3N0YXR1cy5yZXBsYWNlKC9fL2csICcgJyl9PC9zcGFuPlxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cD4ke21lc3NhZ2V9PC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vYWNjb3VudC9vcmRlcnMvJHtvcmRlci5pZH1cIiBjbGFzcz1cImJ1dHRvblwiPlZpZXcgT3JkZXIgRGV0YWlsczwvYT5cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9vdGVyXCI+XHJcbiAgICAgICAgICAgIDxwPsKpICR7bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfSBLQVJJTSBUUkFERVJTLiBBbGwgcmlnaHRzIHJlc2VydmVkLjwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGAsXHJcbiAgfSksXHJcblxyXG4gIHBhc3N3b3JkUmVzZXQ6IChuYW1lOiBzdHJpbmcsIHJlc2V0VXJsOiBzdHJpbmcpID0+ICh7XHJcbiAgICBzdWJqZWN0OiAnUmVzZXQgWW91ciBQYXNzd29yZCAtIEtBUklNIFRSQURFUlMnLFxyXG4gICAgaHRtbDogYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxoZWFkPlxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XHJcbiAgICAgICAgICAuY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7IH1cclxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxyXG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9XHJcbiAgICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cclxuICAgICAgICAgIC5mb290ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDIwcHg7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDEycHg7IH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPlBhc3N3b3JkIFJlc2V0PC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+SGkgJHtuYW1lfSw8L3A+XHJcbiAgICAgICAgICAgIDxwPldlIHJlY2VpdmVkIGEgcmVxdWVzdCB0byByZXNldCB5b3VyIHBhc3N3b3JkLiBDbGljayB0aGUgYnV0dG9uIGJlbG93IHRvIGNyZWF0ZSBhIG5ldyBwYXNzd29yZDo8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cCBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAzMHB4IDA7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cmVzZXRVcmx9XCIgY2xhc3M9XCJidXR0b25cIj5SZXNldCBQYXNzd29yZDwvYT5cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHA+SWYgeW91IGRpZG4ndCByZXF1ZXN0IHRoaXMsIHlvdSBjYW4gc2FmZWx5IGlnbm9yZSB0aGlzIGVtYWlsLiBZb3VyIHBhc3N3b3JkIHdvbid0IGJlIGNoYW5nZWQuPC9wPlxyXG4gICAgICAgICAgICA8cD5UaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gMSBob3VyLjwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD7CqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gS0FSSU0gVFJBREVSUy4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9ib2R5PlxyXG4gICAgICA8L2h0bWw+XHJcbiAgICBgLFxyXG4gIH0pLFxyXG5cclxuICBsb3dTdG9ja0FsZXJ0OiAocHJvZHVjdHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBza3U6IHN0cmluZzsgc3RvY2tDb3VudDogbnVtYmVyOyBsb3dTdG9ja0FsZXJ0OiBudW1iZXIgfT4pID0+ICh7XHJcbiAgICBzdWJqZWN0OiAn4pqg77iPIExvdyBTdG9jayBBbGVydCAtIEtBUklNIFRSQURFUlMnLFxyXG4gICAgaHRtbDogYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxoZWFkPlxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XHJcbiAgICAgICAgICAuY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7IH1cclxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjZjU5ZTBiOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxyXG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9XHJcbiAgICAgICAgICAucHJvZHVjdC1saXN0IHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luOiAxNXB4IDA7IH1cclxuICAgICAgICAgIC5wcm9kdWN0LWl0ZW0geyBwYWRkaW5nOiAxMHB4IDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyB9XHJcbiAgICAgICAgICAucHJvZHVjdC1pdGVtOmxhc3QtY2hpbGQgeyBib3JkZXItYm90dG9tOiBub25lOyB9XHJcbiAgICAgICAgICAuc3RvY2std2FybmluZyB7IGNvbG9yOiAjZjU5ZTBiOyBmb250LXdlaWdodDogYm9sZDsgfVxyXG4gICAgICAgICAgLnN0b2NrLWNyaXRpY2FsIHsgY29sb3I6ICNlZjQ0NDQ7IGZvbnQtd2VpZ2h0OiBib2xkOyB9XHJcbiAgICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cclxuICAgICAgICAgIC5mb290ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDIwcHg7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDEycHg7IH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPuKaoO+4jyBMb3cgU3RvY2sgQWxlcnQ8L2gxPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgICA8cD5UaGUgZm9sbG93aW5nIHByb2R1Y3RzIGFyZSBydW5uaW5nIGxvdyBvbiBzdG9jayBhbmQgbmVlZCBhdHRlbnRpb246PC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtbGlzdFwiPlxyXG4gICAgICAgICAgICAgICR7cHJvZHVjdHMubWFwKHByb2R1Y3QgPT4gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2R1Y3QtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3Ryb25nPiR7cHJvZHVjdC5uYW1lfTwvc3Ryb25nPjxicj5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4+U0tVOiAke3Byb2R1Y3Quc2t1fTwvc3Bhbj48YnI+XHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiJHtwcm9kdWN0LnN0b2NrQ291bnQgPD0gNSA/ICdzdG9jay1jcml0aWNhbCcgOiAnc3RvY2std2FybmluZyd9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgQ3VycmVudCBTdG9jazogJHtwcm9kdWN0LnN0b2NrQ291bnR9IChBbGVydCB0aHJlc2hvbGQ6ICR7cHJvZHVjdC5sb3dTdG9ja0FsZXJ0fSlcclxuICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vYWRtaW4vcHJvZHVjdHNcIiBjbGFzcz1cImJ1dHRvblwiPk1hbmFnZSBJbnZlbnRvcnk8L2E+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD7CqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gS0FSSU0gVFJBREVSUy4gQWRtaW4gQWxlcnQgU3lzdGVtPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvYm9keT5cclxuICAgICAgPC9odG1sPlxyXG4gICAgYCxcclxuICB9KSxcclxuXHJcbiAgb3V0T2ZTdG9ja0FsZXJ0OiAocHJvZHVjdHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBza3U6IHN0cmluZyB9PikgPT4gKHtcclxuICAgIHN1YmplY3Q6ICfwn5qoIE91dCBvZiBTdG9jayBBbGVydCAtIEtBUklNIFRSQURFUlMnLFxyXG4gICAgaHRtbDogYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxoZWFkPlxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XHJcbiAgICAgICAgICAuY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7IH1cclxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjZWY0NDQ0OyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxyXG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9XHJcbiAgICAgICAgICAucHJvZHVjdC1saXN0IHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luOiAxNXB4IDA7IH1cclxuICAgICAgICAgIC5wcm9kdWN0LWl0ZW0geyBwYWRkaW5nOiAxMHB4IDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyB9XHJcbiAgICAgICAgICAucHJvZHVjdC1pdGVtOmxhc3QtY2hpbGQgeyBib3JkZXItYm90dG9tOiBub25lOyB9XHJcbiAgICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cclxuICAgICAgICAgIC5mb290ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDIwcHg7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDEycHg7IH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPvCfmqggT3V0IG9mIFN0b2NrIEFsZXJ0PC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+VGhlIGZvbGxvd2luZyBwcm9kdWN0cyBhcmUgbm93IE9VVCBPRiBTVE9DSzo8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1saXN0XCI+XHJcbiAgICAgICAgICAgICAgJHtwcm9kdWN0cy5tYXAocHJvZHVjdCA9PiBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1pdGVtXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtwcm9kdWN0Lm5hbWV9PC9zdHJvbmc+PGJyPlxyXG4gICAgICAgICAgICAgICAgICA8c3Bhbj5TS1U6ICR7cHJvZHVjdC5za3V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgYCkuam9pbignJyl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHA+UGxlYXNlIHJlc3RvY2sgdGhlc2UgaXRlbXMgYXMgc29vbiBhcyBwb3NzaWJsZSB0byBhdm9pZCBsb3Npbmcgc2FsZXMuPC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTH0vYWRtaW4vcHJvZHVjdHNcIiBjbGFzcz1cImJ1dHRvblwiPlVwZGF0ZSBJbnZlbnRvcnk8L2E+XHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgICA8cD7CqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gS0FSSU0gVFJBREVSUy4gQWRtaW4gQWxlcnQgU3lzdGVtPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvYm9keT5cclxuICAgICAgPC9odG1sPlxyXG4gICAgYCxcclxuICB9KSxcclxuXHJcbiAgZGVsaXZlcnlBc3NpZ25tZW50OiAob3JkZXI6IGFueSwgZGVsaXZlcnlQZXJzb246IHsgbmFtZTogc3RyaW5nOyBwaG9uZTogc3RyaW5nIH0pID0+ICh7XHJcbiAgICBzdWJqZWN0OiBgTmV3IERlbGl2ZXJ5IEFzc2lnbm1lbnQgLSBPcmRlciAjJHtvcmRlci5vcmRlck51bWJlcn1gLFxyXG4gICAgaHRtbDogYFxyXG4gICAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxoZWFkPlxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiAjMzMzOyB9XHJcbiAgICAgICAgICAuY29udGFpbmVyIHsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7IH1cclxuICAgICAgICAgIC5oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjM2I4MmY2OyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxyXG4gICAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9XHJcbiAgICAgICAgICAuZGV0YWlscyB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IG1hcmdpbjogMTVweCAwOyB9XHJcbiAgICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHggMjRweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cclxuICAgICAgICAgIC5mb290ZXIgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDIwcHg7IGNvbG9yOiAjNjY2OyBmb250LXNpemU6IDEycHg7IH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICA8L2hlYWQ+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj5cclxuICAgICAgICAgICAgPGgxPk5ldyBEZWxpdmVyeSBBc3NpZ25tZW50PC9oMT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgICAgICAgICAgPHA+SGkgJHtkZWxpdmVyeVBlcnNvbi5uYW1lfSw8L3A+XHJcbiAgICAgICAgICAgIDxwPllvdSBoYXZlIGJlZW4gYXNzaWduZWQgYSBuZXcgZGVsaXZlcnk6PC9wPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbHNcIj5cclxuICAgICAgICAgICAgICA8aDM+T3JkZXIgIyR7b3JkZXIub3JkZXJOdW1iZXJ9PC9oMz5cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPkN1c3RvbWVyOjwvc3Ryb25nPiAke29yZGVyLmFkZHJlc3M/Lm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+UGhvbmU6PC9zdHJvbmc+ICR7b3JkZXIuYWRkcmVzcz8ucGhvbmV9PC9wPlxyXG4gICAgICAgICAgICAgIDxwPjxzdHJvbmc+QWRkcmVzczo8L3N0cm9uZz48YnI+XHJcbiAgICAgICAgICAgICAgICAke29yZGVyLmFkZHJlc3M/LmFkZHJlc3NMaW5lMX08YnI+XHJcbiAgICAgICAgICAgICAgICAke29yZGVyLmFkZHJlc3M/LmFkZHJlc3NMaW5lMiA/IG9yZGVyLmFkZHJlc3MuYWRkcmVzc0xpbmUyICsgJzxicj4nIDogJyd9XHJcbiAgICAgICAgICAgICAgICAke29yZGVyLmFkZHJlc3M/LmNpdHl9LCAke29yZGVyLmFkZHJlc3M/LnN0YXRlfSAtICR7b3JkZXIuYWRkcmVzcz8ucGluY29kZX1cclxuICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgJHtvcmRlci5hZGRyZXNzPy5sYW5kbWFyayA/IGA8cD48c3Ryb25nPkxhbmRtYXJrOjwvc3Ryb25nPiAke29yZGVyLmFkZHJlc3MubGFuZG1hcmt9PC9wPmAgOiAnJ31cclxuICAgICAgICAgICAgICA8cD48c3Ryb25nPlBheW1lbnQ6PC9zdHJvbmc+ICR7b3JkZXIucGF5bWVudE1ldGhvZH0gLSAke29yZGVyLnBheW1lbnRTdGF0dXMgPT09ICdQQUlEJyA/ICdBbHJlYWR5IFBhaWQnIDogJ0NvbGxlY3Qg4oK5JyArIG9yZGVyLnRvdGFsfTwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cD5QbGVhc2UgZGVsaXZlciB0aGlzIG9yZGVyIHByb21wdGx5IGFuZCB1cGRhdGUgdGhlIHN0YXR1cyBvbmNlIGRlbGl2ZXJlZC48L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb290ZXJcIj5cclxuICAgICAgICAgICAgPHA+wqkgJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IEtBUklNIFRSQURFUlMuIERlbGl2ZXJ5IFRlYW08L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9ib2R5PlxyXG4gICAgICA8L2h0bWw+XHJcbiAgICBgLFxyXG4gIH0pLFxyXG59O1xyXG5cclxuLy8gUGFzc3dvcmQgUmVzZXQgRW1haWwgR2VuZXJhdG9yXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBhc3N3b3JkUmVzZXRFbWFpbChuYW1lOiBzdHJpbmcsIHJlc2V0VXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXHJcbiAgICA8IURPQ1RZUEUgaHRtbD5cclxuICAgIDxodG1sPlxyXG4gICAgPGhlYWQ+XHJcbiAgICAgIDxzdHlsZT5cclxuICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzMzMzsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9XHJcbiAgICAgICAgLmNvbnRhaW5lciB7IG1heC13aWR0aDogNjAwcHg7IG1hcmdpbjogMCBhdXRvOyBwYWRkaW5nOiAyMHB4OyB9XHJcbiAgICAgICAgLmhlYWRlciB7IGJhY2tncm91bmQ6ICMyMmM1NWU7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweCAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDhweCA4cHggMCAwOyB9XHJcbiAgICAgICAgLmhlYWRlciBoMSB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAyNHB4OyB9XHJcbiAgICAgICAgLmNvbnRlbnQgeyBwYWRkaW5nOiAzMHB4IDIwcHg7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IH1cclxuICAgICAgICAuYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBiYWNrZ3JvdW5kOiAjMjJjNTVlOyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgcGFkZGluZzogMTRweCAyOHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1yYWRpdXM6IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMjBweCAwOyB9XHJcbiAgICAgICAgLmJ1dHRvbjpob3ZlciB7IGJhY2tncm91bmQ6ICMxNmEzNGE7IH1cclxuICAgICAgICAud2FybmluZyB7IGJhY2tncm91bmQ6ICNmZWYzY2Q7IGJvcmRlcjogMXB4IHNvbGlkICNmZmMxMDc7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgbWFyZ2luOiAyMHB4IDA7IH1cclxuICAgICAgICAuZm9vdGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAyMHB4OyBjb2xvcjogIzY2NjsgZm9udC1zaXplOiAxMnB4OyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBib3JkZXItcmFkaXVzOiAwIDAgOHB4IDhweDsgfVxyXG4gICAgICAgIC5saW5rLXRleHQgeyB3b3JkLWJyZWFrOiBicmVhay1hbGw7IGZvbnQtc2l6ZTogMTJweDsgY29sb3I6ICM2NjY7IGJhY2tncm91bmQ6ICNlOWU5ZTk7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgfVxyXG4gICAgICA8L3N0eWxlPlxyXG4gICAgPC9oZWFkPlxyXG4gICAgPGJvZHk+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICA8aDE+8J+UkCBSZXNldCBZb3VyIFBhc3N3b3JkPC9oMT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxyXG4gICAgICAgICAgPHA+SGkgJHtuYW1lfSw8L3A+XHJcbiAgICAgICAgICA8cD5XZSByZWNlaXZlZCBhIHJlcXVlc3QgdG8gcmVzZXQgeW91ciBwYXNzd29yZCBmb3IgeW91ciBLQVJJTSBUUkFERVJTIGFjY291bnQuIENsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gc2V0IGEgbmV3IHBhc3N3b3JkOjwvcD5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9XCIke3Jlc2V0VXJsfVwiIGNsYXNzPVwiYnV0dG9uXCI+UmVzZXQgUGFzc3dvcmQ8L2E+XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3YXJuaW5nXCI+XHJcbiAgICAgICAgICAgIDxzdHJvbmc+4pqg77iPIEltcG9ydGFudDo8L3N0cm9uZz5cclxuICAgICAgICAgICAgPHVsIHN0eWxlPVwibWFyZ2luOiAxMHB4IDAgMDsgcGFkZGluZy1sZWZ0OiAyMHB4O1wiPlxyXG4gICAgICAgICAgICAgIDxsaT5UaGlzIGxpbmsgd2lsbCBleHBpcmUgaW4gPHN0cm9uZz4xIGhvdXI8L3N0cm9uZz48L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT5JZiB5b3UgZGlkbid0IHJlcXVlc3QgdGhpcywgcGxlYXNlIGlnbm9yZSB0aGlzIGVtYWlsPC9saT5cclxuICAgICAgICAgICAgICA8bGk+WW91ciBwYXNzd29yZCB3b24ndCBjaGFuZ2UgdW50aWwgeW91IGNyZWF0ZSBhIG5ldyBvbmU8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxwPklmIHRoZSBidXR0b24gZG9lc24ndCB3b3JrLCBjb3B5IGFuZCBwYXN0ZSB0aGlzIGxpbmsgaW50byB5b3VyIGJyb3dzZXI6PC9wPlxyXG4gICAgICAgICAgPHAgY2xhc3M9XCJsaW5rLXRleHRcIj4ke3Jlc2V0VXJsfTwvcD5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPHA+SWYgeW91IGRpZG4ndCByZXF1ZXN0IGEgcGFzc3dvcmQgcmVzZXQsIHBsZWFzZSBjb250YWN0IG91ciBzdXBwb3J0IHRlYW0gaW1tZWRpYXRlbHkuPC9wPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8cD5CZXN0IHJlZ2FyZHMsPGJyPlRoZSBLQVJJTSBUUkFERVJTIFRlYW08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxyXG4gICAgICAgICAgPHA+wqkgJHtuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCl9IEtBUklNIFRSQURFUlMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuPC9wPlxyXG4gICAgICAgICAgPHA+VGhpcyBpcyBhbiBhdXRvbWF0ZWQgZW1haWwuIFBsZWFzZSBkbyBub3QgcmVwbHkuPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvYm9keT5cclxuICAgIDwvaHRtbD5cclxuICBgO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJob3N0IiwicHJvY2VzcyIsImVudiIsIlNNVFBfSE9TVCIsInBvcnQiLCJwYXJzZUludCIsIlNNVFBfUE9SVCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwiU01UUF9VU0VSIiwicGFzcyIsIlNNVFBfUEFTU1dPUkQiLCJzZW5kRW1haWwiLCJvcHRpb25zIiwiaW5mbyIsInNlbmRNYWlsIiwiZnJvbSIsIkVNQUlMX0ZST00iLCJ0byIsInN1YmplY3QiLCJ0ZXh0IiwiaHRtbCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlSWQiLCJzdWNjZXNzIiwiZXJyb3IiLCJlbWFpbFRlbXBsYXRlcyIsIndlbGNvbWUiLCJuYW1lIiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIkRhdGUiLCJnZXRGdWxsWWVhciIsIm9yZGVyQ29uZmlybWF0aW9uIiwib3JkZXIiLCJvcmRlck51bWJlciIsImNyZWF0ZWRBdCIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImRhdGVTdHlsZSIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInF1YW50aXR5IiwicHJpY2UiLCJ0b0ZpeGVkIiwiam9pbiIsInN1YnRvdGFsIiwiZGlzY291bnQiLCJkZWxpdmVyeUZlZSIsInRvdGFsIiwiYWRkcmVzcyIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImNpdHkiLCJzdGF0ZSIsInBpbmNvZGUiLCJpZCIsIm9yZGVyU3RhdHVzVXBkYXRlIiwic3RhdHVzIiwibWVzc2FnZSIsInJlcGxhY2UiLCJwYXNzd29yZFJlc2V0IiwicmVzZXRVcmwiLCJsb3dTdG9ja0FsZXJ0IiwicHJvZHVjdHMiLCJwcm9kdWN0Iiwic2t1Iiwic3RvY2tDb3VudCIsIm91dE9mU3RvY2tBbGVydCIsImRlbGl2ZXJ5QXNzaWdubWVudCIsImRlbGl2ZXJ5UGVyc29uIiwicGhvbmUiLCJsYW5kbWFyayIsInBheW1lbnRNZXRob2QiLCJwYXltZW50U3RhdHVzIiwiZ2VuZXJhdGVQYXNzd29yZFJlc2V0RW1haWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"error\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBRTlDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUs7UUFBQztLQUFRO0FBQ2hCLEdBQUc7QUFFTCxJQUFJQyxJQUF5QixFQUFjSixnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsaUVBQWVBLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rYXJpbS10cmFkZXJzLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XHJcblxyXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xyXG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaXNtYSA9XHJcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xyXG4gIG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gICAgbG9nOiBbJ2Vycm9yJ10sXHJcbiAgfSk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcclxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/@auth","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/zod","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbasan%5CDesktop%5Ckarim123&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();