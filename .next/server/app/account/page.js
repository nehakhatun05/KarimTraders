(()=>{var e={};e.id=9346,e.ids=[9346],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14021:e=>{"use strict";e.exports=import("next/dist/compiled/@vercel/og/index.node.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},77260:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c});var t=r(50482),a=r(69108),n=r(62563),i=r.n(n),l=r(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let c=["",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70707)),"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\account\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,61702))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(r.bind(r,22879)),"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,24117)),"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,92793)),"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,48206)),"C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,61702))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["C:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\account\\page.tsx"],m="/account/page",x={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},85366:(e,s,r)=>{Promise.resolve().then(r.bind(r,66130))},1222:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},53148:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},47958:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},75695:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},31498:(e,s,r)=>{"use strict";r.d(s,{Z:()=>t});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},66130:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>C});var t=r(95344),a=r(3729),n=r(20783),i=r.n(n),l=r(47674),o=r(22254),c=r(18822),d=r(91917),m=r(51354),x=r(80508),p=r(67925),u=r(33037),h=r(42739),g=r(97751),b=r(48120),y=r(47958),f=r(75695),j=r(73714),w=r(14513),N=r(31498),v=r(1222),P=r(53148),k=r(44669);let Z=[{href:"/account",icon:c.Z,label:"Profile"},{href:"/account/orders",icon:d.Z,label:"My Orders"},{href:"/wishlist",icon:m.Z,label:"Wishlist"},{href:"/account/addresses",icon:x.Z,label:"Addresses"},{href:"/account/wallet",icon:p.Z,label:"Wallet"},{href:"/account/notifications",icon:u.Z,label:"Notifications"}];function C(){let{data:e,status:s,update:r}=(0,l.useSession)(),n=(0,o.useRouter)(),c=(0,o.usePathname)(),[m,x]=(0,a.useState)(null),[p,u]=(0,a.useState)(!0),[C,S]=(0,a.useState)([]),[E,z]=(0,a.useState)(!1),[q,_]=(0,a.useState)(!1),[M,A]=(0,a.useState)(!1),[D,U]=(0,a.useState)({name:"",phone:""}),[T,O]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[L,K]=(0,a.useState)(!1),[G,$]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if("unauthenticated"===s){n.push("/login?callbackUrl=/account");return}"authenticated"===s&&(I(),F())},[s,n]);let I=async()=>{try{let e=await fetch("/api/user/profile");if(e.ok){let s=await e.json();x(s)}}catch(e){console.error("Error fetching profile:",e)}finally{u(!1)}},F=async()=>{try{let e=await fetch("/api/orders?limit=3");if(e.ok){let s=await e.json();S(s.orders||[])}}catch(e){console.error("Error fetching orders:",e)}},R=async()=>{if(!D.name.trim()){k.ZP.error("Name is required");return}if(D.phone&&!/^[6-9]\d{9}$/.test(D.phone)){k.ZP.error("Please enter a valid 10-digit Indian mobile number");return}A(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D.name.trim(),phone:D.phone||void 0})});if(e.ok){let s=await e.json();x({...m,...s}),await r({name:D.name.trim()}),k.ZP.success("Profile updated successfully"),z(!1)}else{let s=await e.json();k.ZP.error(s.error||"Failed to update profile")}}catch(e){console.error("Error updating profile:",e),k.ZP.error("Something went wrong")}finally{A(!1)}},V=async()=>{if(!T.currentPassword){k.ZP.error("Current password is required");return}if(T.newPassword.length<6){k.ZP.error("New password must be at least 6 characters");return}if(T.newPassword!==T.confirmPassword){k.ZP.error("Passwords do not match");return}A(!0);try{let e=await fetch("/api/user/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:T.currentPassword,newPassword:T.newPassword})});if(e.ok)k.ZP.success("Password changed successfully"),_(!1);else{let s=await e.json();k.ZP.error(s.error||"Failed to change password")}}catch(e){console.error("Error changing password:",e),k.ZP.error("Something went wrong")}finally{A(!1)}};if("loading"===s||p)return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsx(h.Z,{className:"w-8 h-8 animate-spin text-primary-600"})});if("unauthenticated"===s)return null;let H=m||{name:e?.user?.name||"User",email:e?.user?.email||"",phone:null,createdAt:new Date().toISOString(),wallet:{balance:0},_count:{orders:0}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,t.jsxs)("div",{className:"container-custom",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"My Account"}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-1",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-2xl font-bold text-primary-600",children:H.name?.charAt(0)?.toUpperCase()||"U"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"font-semibold text-gray-800",children:H.name}),t.jsx("p",{className:"text-sm text-gray-500",children:H.email})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-4 grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-primary-600",children:H._count?.orders||0}),t.jsx("p",{className:"text-xs text-gray-500",children:"Total Orders"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold text-primary-600",children:["₹",H.wallet?.balance||0]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Wallet Balance"})]})]}),(0,t.jsxs)("nav",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[Z.map(e=>{let s=e.icon,r=c===e.href;return(0,t.jsxs)(i(),{href:e.href,className:`flex items-center gap-3 px-4 py-3 border-b last:border-b-0 transition-colors ${r?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-50"}`,children:[t.jsx(s,{size:20}),t.jsx("span",{className:"flex-1",children:e.label}),t.jsx(g.Z,{size:18,className:"text-gray-400"})]},e.href)}),(0,t.jsxs)("button",{onClick:()=>{(0,l.signOut)({callbackUrl:"/"})},className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 transition-colors",children:[t.jsx(b.Z,{size:20}),t.jsx("span",{children:"Logout"})]})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-3",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{O({currentPassword:"",newPassword:"",confirmPassword:""}),_(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx(y.Z,{size:16}),"Change Password"]}),(0,t.jsxs)("button",{onClick:()=>{U({name:m?.name||e?.user?.name||"",phone:m?.phone||""}),z(!0)},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[t.jsx(f.Z,{size:16}),"Edit Profile"]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Full Name"}),t.jsx("p",{className:"font-medium text-gray-800",children:H.name})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-800",children:H.email})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Phone"}),t.jsx("p",{className:"font-medium text-gray-800",children:H.phone||"Not provided"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Member Since"}),t.jsx("p",{className:"font-medium text-gray-800",children:new Date(H.createdAt).toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Recent Orders"}),t.jsx(i(),{href:"/account/orders",className:"text-primary-600 font-medium hover:text-primary-700",children:"View All"})]}),C.length>0?t.jsx("div",{className:"space-y-4",children:C.map(e=>(0,t.jsxs)(i(),{href:`/account/orders/${e.id}`,className:"flex items-center justify-between p-4 border rounded-lg hover:border-primary-300 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:t.jsx(j.Z,{className:"text-primary-600",size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-gray-800",children:["Order #",e.orderNumber]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.createdAt).toLocaleDateString()," • ",e.items?.length||0," items"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-800",children:["₹",e.total]}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"DELIVERED"===e.status?"bg-green-100 text-green-700":"CANCELLED"===e.status?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:e.status})]})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(d.Z,{className:"text-gray-400",size:32})}),t.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"No orders yet"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Start shopping to see your orders here"}),t.jsx(i(),{href:"/products",className:"btn-primary inline-block",children:"Start Shopping"})]})]})]})]})]}),E&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Edit Profile"}),t.jsx("button",{onClick:()=>z(!1),className:"p-1 hover:bg-gray-100 rounded",children:t.jsx(w.Z,{size:20})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.name,onChange:e=>U({...D,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),t.jsx("input",{type:"email",value:H.email,disabled:!0,className:"w-full px-3 py-2 border rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),t.jsx("input",{type:"tel",value:D.phone,onChange:e=>U({...D,phone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter 10-digit mobile number",maxLength:10}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Indian mobile number (e.g., 9876543210)"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t bg-gray-50",children:[t.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm",children:"Cancel"}),(0,t.jsxs)("button",{onClick:R,disabled:M,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2 text-sm",children:[M?t.jsx(h.Z,{size:16,className:"animate-spin"}):t.jsx(N.Z,{size:16}),"Save Changes"]})]})]})}),q&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Change Password"}),t.jsx("button",{onClick:()=>_(!1),className:"p-1 hover:bg-gray-100 rounded",children:t.jsx(w.Z,{size:20})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Current Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("input",{type:L?"text":"password",value:T.currentPassword,onChange:e=>O({...T,currentPassword:e.target.value}),className:"w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter current password"}),t.jsx("button",{type:"button",onClick:()=>K(!L),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:L?t.jsx(v.Z,{size:18}):t.jsx(P.Z,{size:18})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("input",{type:G?"text":"password",value:T.newPassword,onChange:e=>O({...T,newPassword:e.target.value}),className:"w-full px-3 py-2 pr-10 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter new password"}),t.jsx("button",{type:"button",onClick:()=>$(!G),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:G?t.jsx(v.Z,{size:18}):t.jsx(P.Z,{size:18})})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 6 characters"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"password",value:T.confirmPassword,onChange:e=>O({...T,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Confirm new password"}),T.confirmPassword&&T.newPassword!==T.confirmPassword&&t.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Passwords do not match"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t bg-gray-50",children:[t.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 text-sm",children:"Cancel"}),(0,t.jsxs)("button",{onClick:V,disabled:M||T.newPassword!==T.confirmPassword,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 flex items-center gap-2 text-sm",children:[M?t.jsx(h.Z,{size:16,className:"animate-spin"}):t.jsx(y.Z,{size:16}),"Change Password"]})]})]})})]})}},70707:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let t=(0,r(86843).createProxy)(String.raw`C:\Users\basan\Desktop\karim123\KarimTraders\src\app\account\page.tsx`),{__esModule:a,$$typeof:n}=t,i=t.default}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[1638,7861,9817],()=>r(77260));module.exports=t})();