(()=>{var e={};e.id=285,e.ids=[285],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14021:e=>{"use strict";e.exports=import("next/dist/compiled/@vercel/og/index.node.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},17355:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c});var r=a(50482),t=a(69108),i=a(62563),l=a.n(i),n=a(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4123)),"c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,61702))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,22879)),"c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,24117)),"c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,92793)),"c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,48206)),"c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,61702))).default(e)],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],o=["c:\\Users\\basan\\Desktop\\karim123\\KarimTraders\\src\\app\\checkout\\page.tsx"],m="/checkout/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},54646:(e,s,a)=>{Promise.resolve().then(a.bind(a,85940))},98026:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(69224).Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]])},85940:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var r=a(95344),t=a(3729),i=a(22254),l=a(20783),n=a.n(l),d=a(47674),c=a(80508),o=a(25545),m=a(85674),x=a(62312),p=a(42739),h=a(72086),u=a(98026);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,a(69224).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var g=a(51838),f=a(67925),b=a(14513),j=a(43728),v=a(44669);function N(){let e=(0,i.useRouter)(),{data:s,status:a}=(0,d.useSession)(),{items:l,getSubtotal:N,clearCart:w}=(0,j.xS)(),[k,P]=(0,t.useState)("address"),[C,S]=(0,t.useState)([]),[D,Z]=(0,t.useState)([]),[A,E]=(0,t.useState)(null),[O,z]=(0,t.useState)(""),[T,_]=(0,t.useState)(""),[L,I]=(0,t.useState)("COD"),[M,$]=(0,t.useState)(!1),[F,q]=(0,t.useState)(!0),[B,R]=(0,t.useState)(""),[K,U]=(0,t.useState)(null),[G,J]=(0,t.useState)(0),[W,H]=(0,t.useState)(""),[Y,Q]=(0,t.useState)(!1),[V,X]=(0,t.useState)({type:"HOME",name:"",phone:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:"",landmark:""}),[ee,es]=(0,t.useState)(!1),[ea,er]=(0,t.useState)(!1),[et,ei]=(0,t.useState)({checking:!1,isServiceable:null,serviceArea:null}),el=async e=>{ei({checking:!0,isServiceable:null,serviceArea:null});try{let s=await fetch(`/api/service-areas?pincode=${e}`),a=await s.json();return ei({checking:!1,isServiceable:a.isServiceable,serviceArea:a.serviceArea,error:a.isServiceable?void 0:"Sorry, we do not deliver to this area yet."}),a.isServiceable}catch(e){return ei({checking:!1,isServiceable:!1,serviceArea:null,error:"Failed to check service area."}),!1}};(0,t.useEffect)(()=>{let e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,e.onload=()=>er(!0),document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]);let en=[{id:"address",label:"Address",icon:c.Z},{id:"delivery",label:"Delivery",icon:o.Z},{id:"payment",label:"Payment",icon:m.Z},{id:"review",label:"Review",icon:x.Z}];(0,t.useEffect)(()=>{"unauthenticated"===a&&e.push("/login?callbackUrl=/checkout")},[a,e]),(0,t.useEffect)(()=>{"authenticated"===a&&ed()},[a]);let ed=async()=>{q(!0);try{let[e,s,a]=await Promise.all([fetch("/api/user/addresses"),fetch("/api/user/wallet"),fetch("/api/delivery-slots")]);if(e.ok){let s=await e.json();S(s);let a=s.find(e=>e.isDefault);a?(z(a.id),el(a.pincode)):s.length>0&&(z(s[0].id),el(s[0].pincode))}if(s.ok){let e=await s.json();E(e)}if(a.ok){let e=await a.json();Z(e.filter(e=>e.isActive)),e.length>0&&_(e[0].id)}}catch(e){console.error("Error fetching user data:",e),v.ZP.error("Failed to load checkout data")}finally{q(!1)}},ec=N(),eo=ec>=499?0:29,em=ec-G+eo;if("loading"===a||F)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(p.Z,{className:"w-8 h-8 animate-spin text-primary-600"})});if(0===l.length)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Your cart is empty"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Add items to your cart to proceed with checkout"}),r.jsx(n(),{href:"/products",className:"btn-primary",children:"Continue Shopping"})]})});let ex=async()=>{if(B.trim()){try{let e=await fetch("/api/coupons/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:B,subtotal:ec})});if(e.ok){let s=await e.json();J(s.discount),U(B.toUpperCase()),v.ZP.success(`Coupon applied! You save ₹${s.discount}`)}else{let s=await e.json();v.ZP.error(s.error||"Invalid coupon code")}}catch(e){v.ZP.error("Failed to apply coupon")}R("")}},ep=async()=>{if(!V.name||!V.phone||!V.addressLine1||!V.city||!V.state||!V.pincode){v.ZP.error("Please fill all required fields");return}es(!0);try{let e=await fetch("/api/user/addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(e.ok){let s=await e.json();S([...C,s]),z(s.id),await el(s.pincode),Q(!1),X({type:"HOME",name:"",phone:"",addressLine1:"",addressLine2:"",city:"",state:"",pincode:"",landmark:""}),v.ZP.success("Address saved successfully")}else{let s=await e.json();v.ZP.error(s.error||"Failed to save address")}}catch(e){v.ZP.error("Failed to save address")}finally{es(!1)}},eh=async()=>{try{for(let e of(await fetch("/api/cart",{method:"DELETE"}),l))await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.product.id,quantity:e.quantity})});return!0}catch(e){return console.error("Error syncing cart:",e),!1}},eu=async()=>{if(!O){v.ZP.error("Please select a delivery address"),P("address");return}if(!1===et.isServiceable){v.ZP.error("We do not deliver to the selected address area. Please choose a different address."),P("address");return}if(null===et.isServiceable){let e=C.find(e=>e.id===O);if(e&&!await el(e.pincode)){v.ZP.error("We do not deliver to the selected address area. Please choose a different address."),P("address");return}}$(!0);try{if(!await eh()){v.ZP.error("Failed to sync cart. Please try again."),$(!1);return}if("online"===L){if(!ea){v.ZP.error("Payment system loading. Please try again."),$(!1);return}let s=await fetch("/api/orders/online",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addressId:O,deliverySlotId:T||void 0,notes:W||void 0,couponCode:K||void 0})});if(!s.ok){let e=await s.json();v.ZP.error(e.error||"Failed to create order"),$(!1);return}let a=await s.json(),r={key:a.razorpay.key,amount:a.razorpay.amount,currency:a.razorpay.currency,name:a.razorpay.name,description:a.razorpay.description,order_id:a.razorpay.orderId,prefill:a.razorpay.prefill,notes:a.razorpay.notes,theme:a.razorpay.theme,handler:async function(s){try{let r=await fetch("/api/payments/razorpay/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:s.razorpay_order_id,razorpay_payment_id:s.razorpay_payment_id,razorpay_signature:s.razorpay_signature,orderId:a.orderId})});if(r.ok)w(),v.ZP.success("Payment successful! Order placed."),e.push(`/order-success?orderId=${a.orderNumber}`);else{let e=await r.json();v.ZP.error(e.error||"Payment verification failed")}}catch(e){v.ZP.error("Payment verification failed. Contact support.")}},modal:{ondismiss:async function(){await fetch(`/api/orders/online?orderId=${a.orderId}`,{method:"DELETE"}),$(!1),v.ZP.error("Payment cancelled")}}},t=new window.Razorpay(r);t.on("payment.failed",async function(e){await fetch(`/api/orders/online?orderId=${a.orderId}`,{method:"DELETE"}),v.ZP.error(`Payment failed: ${e.error.description}`),$(!1)}),t.open();return}let s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addressId:O,paymentMethod:"cod"===L?"COD":"wallet"===L?"WALLET":"ONLINE",deliverySlotId:T||void 0,notes:W||void 0,couponCode:K||void 0})});if(s.ok){let a=await s.json();w(),v.ZP.success("Order placed successfully!"),e.push(`/order-success?orderId=${a.orderNumber}`)}else{let e=await s.json();v.ZP.error(e.error||"Failed to place order")}}catch(e){console.error("Order error:",e),v.ZP.error("Something went wrong. Please try again.")}finally{$(!1)}},ey=e=>{switch(e?.toLowerCase()){case"home":return h.Z;case"work":return u.Z;default:return y}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b sticky top-0 z-40",children:r.jsx("div",{className:"container-custom py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(n(),{href:"/",className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-xl",children:"K"})}),r.jsx("span",{className:"font-display font-bold text-xl text-gray-800",children:"KARIM TRADERS"})]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Secure Checkout \uD83D\uDD12"})]})})}),(0,r.jsxs)("div",{className:"container-custom py-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsx("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:en.map((e,s)=>{let a=e.icon,t=en.findIndex(e=>e.id===k),i=en.findIndex(s=>s.id===e.id)<t,l=e.id===k;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-primary-600 text-white":l?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:i?r.jsx(x.Z,{size:20}):r.jsx(a,{size:20})}),r.jsx("span",{className:`text-xs mt-1 ${l?"text-primary-600 font-medium":"text-gray-500"}`,children:e.label})]}),s<en.length-1&&r.jsx("div",{className:`w-12 sm:w-16 md:w-24 h-1 mx-2 rounded ${i?"bg-primary-600":"bg-gray-200"}`})]},e.id)})})}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:["address"===k&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Select Delivery Address"}),0===C.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(c.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"No saved addresses found"}),(0,r.jsxs)("button",{onClick:()=>Q(!0),className:"btn-primary",children:[r.jsx(g.Z,{size:18,className:"mr-2"}),"Add New Address"]})]}):r.jsx("div",{className:"space-y-4",children:C.map(e=>{let s=ey(e.type);return r.jsx("label",{className:`block p-4 border-2 rounded-lg cursor-pointer transition-colors ${O===e.id?"border-primary-600 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("input",{type:"radio",name:"address",value:e.id,checked:O===e.id,onChange:()=>z(e.id),className:"mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(s,{size:16,className:"text-gray-500"}),r.jsx("span",{className:"font-medium capitalize",children:e.type?.toLowerCase()}),e.isDefault&&r.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-0.5 rounded",children:"Default"})]}),r.jsx("p",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.addressLine1,e.addressLine2&&`, ${e.addressLine2}`]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.city,", ",e.state," - ",e.pincode]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["Phone: ",e.phone]})]})]})},e.id)})}),(0,r.jsxs)("button",{onClick:()=>Q(!0),className:"mt-4 flex items-center gap-2 text-primary-600 font-medium hover:text-primary-700",children:[r.jsx(g.Z,{size:18}),"Add New Address"]}),r.jsx("button",{onClick:()=>P("delivery"),className:"w-full btn-primary mt-6",disabled:!O,children:"Continue to Delivery"})]}),"delivery"===k&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Select Delivery Slot"}),0===D.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(o.Z,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Standard delivery will be applied"})]}):r.jsx("div",{className:"space-y-3",children:D.map(e=>r.jsx("label",{className:`block p-4 border-2 rounded-lg cursor-pointer transition-colors ${T===e.id?"border-primary-600 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"radio",name:"slot",value:e.id,checked:T===e.id,onChange:()=>_(e.id)}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.startTime," - ",e.endTime]})]})]})},e.id))}),(0,r.jsxs)("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Notes (Optional)"}),r.jsx("textarea",{value:W,onChange:e=>H(e.target.value),placeholder:"Any special instructions for delivery...",className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:3})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>P("address"),className:"btn-outline",children:"Back"}),r.jsx("button",{onClick:()=>P("payment"),className:"flex-1 btn-primary",children:"Continue to Payment"})]})]}),"payment"===k&&(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Select Payment Method"}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("label",{className:`block p-4 border-2 rounded-lg cursor-pointer transition-colors ${"cod"===L?"border-primary-600 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"radio",name:"payment",value:"cod",checked:"cod"===L,onChange:()=>I("cod")}),r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCB5"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Cash on Delivery"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Pay when you receive"})]})]})}),A&&A.balance>0&&r.jsx("label",{className:`block p-4 border-2 rounded-lg cursor-pointer transition-colors ${"wallet"===L?"border-primary-600 bg-primary-50":A.balance<em?"border-gray-200 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"radio",name:"payment",value:"wallet",checked:"wallet"===L,onChange:()=>I("wallet"),disabled:A.balance<em}),r.jsx(f.Z,{className:"w-6 h-6 text-primary-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Pay from Wallet"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Balance: ₹",A.balance]})]}),A.balance<em&&r.jsx("span",{className:"text-xs text-red-500",children:"Insufficient balance"})]})}),r.jsx("label",{className:`block p-4 border-2 rounded-lg cursor-pointer transition-colors ${"online"===L?"border-primary-600 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"radio",name:"payment",value:"online",checked:"online"===L,onChange:()=>I("online")}),r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCB3"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Pay Online"}),r.jsx("p",{className:"text-sm text-gray-500",children:"UPI, Cards, Net Banking"})]})]})})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>P("delivery"),className:"btn-outline",children:"Back"}),r.jsx("button",{onClick:()=>P("review"),className:"flex-1 btn-primary",children:"Review Order"})]})]}),"review"===k&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Items"}),r.jsx("div",{className:"space-y-4",children:l.map(e=>(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden",children:r.jsx("img",{src:e.product.images?.[0]||"https://via.placeholder.com/100",alt:e.product.name,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-800",children:e.product.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity," \xd7 ₹",e.product.price]})]}),(0,r.jsxs)("p",{className:"font-medium",children:["₹",(e.product.price*e.quantity).toFixed(2)]})]},e.product.id))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Delivery Address"}),r.jsx("button",{onClick:()=>P("address"),className:"text-primary-600 text-sm font-medium",children:"Change"})]}),C.find(e=>e.id===O)&&(0,r.jsxs)("div",{className:"text-gray-600",children:[r.jsx("p",{className:"font-medium text-gray-800",children:C.find(e=>e.id===O)?.name}),r.jsx("p",{children:C.find(e=>e.id===O)?.addressLine1}),(0,r.jsxs)("p",{children:[C.find(e=>e.id===O)?.city,","," ",C.find(e=>e.id===O)?.state," -"," ",C.find(e=>e.id===O)?.pincode]}),(0,r.jsxs)("p",{className:"mt-1",children:["Phone: ",C.find(e=>e.id===O)?.phone]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Payment Method"}),r.jsx("button",{onClick:()=>P("payment"),className:"text-primary-600 text-sm font-medium",children:"Change"})]}),(0,r.jsxs)("p",{className:"text-gray-800",children:["cod"===L&&"\uD83D\uDCB5 Cash on Delivery","wallet"===L&&"\uD83D\uDC5B Wallet Payment","online"===L&&"\uD83D\uDCB3 Online Payment"]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>P("payment"),className:"btn-outline",children:"Back"}),r.jsx("button",{onClick:eu,disabled:M,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p.Z,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):`Place Order • ₹${em.toFixed(2)}`})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-24",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),r.jsx("div",{className:"mb-4",children:K?(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(x.Z,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{className:"text-green-700 font-medium",children:K})]}),r.jsx("button",{onClick:()=>{U(null),J(0),v.ZP.success("Coupon removed")},className:"text-gray-500 hover:text-gray-700",children:r.jsx(b.Z,{size:18})})]}):(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:B,onChange:e=>R(e.target.value),placeholder:"Coupon code",className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),r.jsx("button",{onClick:ex,className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700",children:"Apply"})]})}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",l.length," items)"]}),(0,r.jsxs)("span",{children:["₹",ec.toFixed(2)]})]}),G>0&&(0,r.jsxs)("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Coupon Discount"}),(0,r.jsxs)("span",{children:["-₹",G.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Delivery"}),r.jsx("span",{className:0===eo?"text-green-600":"",children:0===eo?"FREE":`₹${eo}`})]}),r.jsx("div",{className:"border-t pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-primary-600",children:["₹",em.toFixed(2)]})]})})]}),ec<499&&(0,r.jsxs)("p",{className:"mt-4 text-xs text-gray-500 text-center",children:["Add ₹",(499-ec).toFixed(0)," more for FREE delivery"]}),(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-2 text-gray-500 text-sm",children:[r.jsx("span",{children:"\uD83D\uDD12"}),r.jsx("span",{children:"Secure checkout powered by SSL"})]})]})})]})]}),Y&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Q(!1)}),(0,r.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white p-4 border-b flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Add New Address"}),r.jsx("button",{onClick:()=>Q(!1),children:r.jsx(b.Z,{size:24})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Type"}),r.jsx("div",{className:"flex gap-3",children:["HOME","WORK","OTHER"].map(e=>r.jsx("button",{onClick:()=>X({...V,type:e}),className:`px-4 py-2 rounded-lg border ${V.type===e?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300"}`,children:e.charAt(0)+e.slice(1).toLowerCase()},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),r.jsx("input",{type:"text",value:V.name,onChange:e=>X({...V,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Enter full name"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",value:V.phone,onChange:e=>X({...V,phone:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Enter phone number"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),r.jsx("input",{type:"text",value:V.addressLine1,onChange:e=>X({...V,addressLine1:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"House/Flat no., Building name"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),r.jsx("input",{type:"text",value:V.addressLine2,onChange:e=>X({...V,addressLine2:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Street, Area"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),r.jsx("input",{type:"text",value:V.city,onChange:e=>X({...V,city:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"City"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),r.jsx("input",{type:"text",value:V.state,onChange:e=>X({...V,state:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"State"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),r.jsx("input",{type:"text",value:V.pincode,onChange:e=>X({...V,pincode:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Pincode"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landmark"}),r.jsx("input",{type:"text",value:V.landmark,onChange:e=>X({...V,landmark:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Nearby landmark"})]}),r.jsx("button",{onClick:ep,disabled:ee,className:"w-full btn-primary flex items-center justify-center gap-2",children:ee?(0,r.jsxs)(r.Fragment,{children:[r.jsx(p.Z,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):"Save Address"})]})]})]})]})}},4123:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>t,default:()=>l});let r=(0,a(86843).createProxy)(String.raw`c:\Users\basan\Desktop\karim123\KarimTraders\src\app\checkout\page.tsx`),{__esModule:t,$$typeof:i}=r,l=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[1638,7861,4150],()=>a(17355));module.exports=r})();