"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3494],{9670:function(e,t,s){s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7368:function(e,t,s){s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]])},3494:function(e,t,s){s.d(t,{Z:function(){return w}});var r=s(7437),a=s(2265),i=s(1396),n=s.n(i),o=s(6691),d=s.n(o),c=s(9883),l=s(7368),u=s(2369),m=s(7810),p=s(9670),x=s(6141),h=s(2245),f=s(3523),g=s(4891),y=s(3505),b=s(2749),v=s(7039),j=s(5925);function w(e){var t;let{product:s,showQuickAdd:i=!0,variant:o="default"}=e,{data:w}=(0,b.useSession)(),N=null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.id,[k,S]=(0,a.useState)(!1),[C,O]=(0,a.useState)(1),[Z,P]=(0,a.useState)(!1),[M,z]=(0,a.useState)(s.unit||"1 kg"),{addItem:q,syncAddItem:I,items:A}=(0,v.xS)(),{addItem:D,removeItem:F,isInWishlist:E}=(0,v.Yl)(),U=E(s.id),R=A.find(e=>e.product.id===s.id),T=async e=>{e.preventDefault(),e.stopPropagation(),N?await I(s,C,N)?(j.ZP.success("".concat(s.name," added to cart!")),P(!0)):j.ZP.error("Failed to add to cart"):(q(s,C),j.ZP.success("".concat(s.name," added to cart!")),P(!0))};return"compact"===o?(0,r.jsx)(n(),{href:"/products/".concat(s.slug),children:(0,r.jsxs)("div",{className:"card group relative bg-white rounded-xl overflow-hidden border border-gray-100 hover:border-primary-200 hover:shadow-lg transition-all",children:[(0,r.jsx)("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:s.discount>0&&(0,r.jsxs)("span",{className:"bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded",children:[s.discount,"% OFF"]})}),(0,r.jsx)("div",{className:"relative aspect-square overflow-hidden bg-gray-50 p-2",children:(0,r.jsx)(d(),{src:s.images[0]||"/placeholder-product.png",alt:s.name,fill:!0,sizes:"(max-width: 640px) 50vw, 25vw",className:"object-contain transition-transform duration-300 group-hover:scale-105"})}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-800 text-sm line-clamp-1 mb-1",children:s.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:s.unit}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-bold text-primary-600",children:["₹",s.price]}),(0,r.jsx)("button",{onClick:T,className:"w-8 h-8 bg-primary-600 text-white rounded-lg flex items-center justify-center hover:bg-primary-700",children:(0,r.jsx)(c.Z,{size:16})})]})]})]})}):(0,r.jsx)(n(),{href:"/products/".concat(s.slug),children:(0,r.jsxs)("div",{className:"card card-hover group relative bg-white rounded-xl overflow-hidden border border-gray-100 hover:border-primary-200 transition-all",onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:[(0,r.jsxs)("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 z-10 flex flex-col gap-1",children:[s.discount>0&&(0,r.jsxs)("span",{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:[s.discount,"% OFF"]}),s.isOrganic&&(0,r.jsxs)("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5 shadow-sm",children:[(0,r.jsx)(l.Z,{size:10})," Organic"]}),s.isNewArrival&&(0,r.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-[10px] sm:text-xs font-bold px-2 py-0.5 rounded-full shadow-sm",children:"NEW"})]}),(0,r.jsx)("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10",children:(0,r.jsxs)("span",{className:"bg-yellow-400 text-yellow-900 text-[9px] font-bold px-2 py-0.5 rounded-full flex items-center gap-0.5 shadow-sm",children:[(0,r.jsx)(u.Z,{size:10})," EXPRESS"]})}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),U?(F(s.id),j.ZP.success("Removed from wishlist")):(D(s),j.ZP.success("Added to wishlist!"))},className:"absolute top-2 sm:top-3 right-2 sm:right-3 z-10 w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center transition-all duration-200 shadow-md ".concat(U?"bg-red-500 text-white scale-110":"bg-white text-gray-400 hover:text-red-500 hover:scale-110"),children:(0,r.jsx)(m.Z,{size:16,className:"sm:w-[18px] sm:h-[18px]",fill:U?"currentColor":"none"})}),(0,r.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-b from-gray-50 to-white p-3 sm:p-4",children:[(0,r.jsx)(d(),{src:s.images[0]||"/placeholder-product.png",alt:s.name,fill:!0,sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",className:"object-contain transition-transform duration-500 group-hover:scale-110"}),(0,r.jsx)("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 transition-all duration-300 ".concat(k?"opacity-100 translate-y-0":"opacity-0 translate-y-2"),children:(0,r.jsxs)("button",{className:"bg-white/95 backdrop-blur-sm text-gray-700 px-3 py-1.5 rounded-full text-xs font-medium flex items-center gap-1 shadow-lg hover:bg-primary-600 hover:text-white transition-colors",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,r.jsx)(p.Z,{size:14})," Quick View"]})}),"out-of-stock"===s.stockStatus&&(0,r.jsx)("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center backdrop-blur-sm",children:(0,r.jsx)("span",{className:"bg-gray-800 text-white px-4 py-2 rounded-lg font-semibold text-sm",children:"Out of Stock"})})]}),(0,r.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-primary-600 text-[10px] sm:text-xs font-medium mb-1.5",children:[(0,r.jsx)(x.Z,{size:12}),(0,r.jsx)("span",{children:"Delivery in 10-30 mins"})]}),(0,r.jsx)("p",{className:"text-[10px] sm:text-xs text-gray-400 font-medium mb-0.5 uppercase tracking-wide",children:s.category.name}),(0,r.jsx)("h3",{className:"font-semibold text-gray-800 mb-1.5 line-clamp-2 min-h-[36px] sm:min-h-[44px] text-sm sm:text-base group-hover:text-primary-600 transition-colors leading-tight",children:s.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 bg-green-600 text-white px-1.5 py-0.5 rounded text-[10px] sm:text-xs font-bold",children:[(0,r.jsx)("span",{children:s.rating}),(0,r.jsx)(h.Z,{size:10,fill:"currentColor"})]}),(0,r.jsxs)("span",{className:"text-[10px] sm:text-xs text-gray-400",children:["(",s.reviewCount," reviews)"]})]}),(0,r.jsx)("div",{className:"relative mb-2",children:(0,r.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"w-full flex items-center justify-between px-3 py-1.5 border border-gray-200 rounded-lg text-xs sm:text-sm text-gray-700 hover:border-primary-300 transition-colors",children:[(0,r.jsx)("span",{children:M}),(0,r.jsx)(f.Z,{size:14,className:"text-gray-400"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsxs)("span",{className:"text-lg sm:text-xl font-bold text-gray-800",children:["₹",s.price]}),s.discount>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-400 line-through",children:["₹",s.originalPrice]}),(0,r.jsxs)("span",{className:"text-xs text-green-600 font-semibold",children:["Save ₹",s.originalPrice-s.price]})]})]}),i&&"out-of-stock"!==s.stockStatus&&(0,r.jsx)(r.Fragment,{children:R||Z?(0,r.jsxs)("div",{className:"flex items-center justify-center border-2 border-primary-600 rounded-lg overflow-hidden",children:[(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),C>1?O(C-1):P(!1)},className:"flex-1 py-2.5 bg-primary-50 hover:bg-primary-100 text-primary-600 font-bold transition-colors",children:(0,r.jsx)(g.Z,{size:18,className:"mx-auto"})}),(0,r.jsx)("span",{className:"flex-1 py-2.5 text-center font-bold text-primary-600 text-lg",children:(null==R?void 0:R.quantity)||C}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),O(Math.min(s.maxQuantity||10,C+1))},className:"flex-1 py-2.5 bg-primary-50 hover:bg-primary-100 text-primary-600 font-bold transition-colors",children:(0,r.jsx)(c.Z,{size:18,className:"mx-auto"})})]}):(0,r.jsxs)("button",{onClick:T,className:"w-full bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white py-2.5 sm:py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all shadow-md hover:shadow-lg active:scale-[0.98]",children:[(0,r.jsx)(y.Z,{size:18}),(0,r.jsx)("span",{children:"Add to Cart"})]})}),"limited"===s.stockStatus&&(0,r.jsxs)("p",{className:"text-center text-orange-600 text-xs font-medium mt-2 flex items-center justify-center gap-1",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),"Only few left in stock!"]})]})]})})}},7039:function(e,t,s){s.d(t,{HB:function(){return d},Rp:function(){return o},Yl:function(){return n},xS:function(){return i}});var r=s(4660),a=s(4810);let i=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],isOpen:!1,isSyncing:!1,setItems:t=>e({items:t}),setSyncing:t=>e({isSyncing:t}),addItem:(t,s)=>{e(e=>e.items.find(e=>e.product.id===t.id)?{items:e.items.map(e=>e.product.id===t.id?{...e,quantity:e.quantity+s}:e)}:{items:[...e.items,{product:t,quantity:s,selectedUnit:t.unit}]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.product.id!==t)}))},updateQuantity:(t,s)=>{e(e=>({items:e.items.map(e=>e.product.id===t?{...e,quantity:Math.max(0,s)}:e).filter(e=>e.quantity>0)}))},clearCart:()=>e({items:[]}),toggleCart:()=>e(e=>({isOpen:!e.isOpen})),getSubtotal:()=>t().items.reduce((e,t)=>e+t.product.price*t.quantity,0),getItemCount:()=>t().items.reduce((e,t)=>e+t.quantity,0),getDeliveryCharge:()=>t().getSubtotal()>=500?0:40,getTotal:()=>t().getSubtotal()+t().getDeliveryCharge(),syncAddItem:async(e,s,r)=>{if(!r)return t().addItem(e,s),!0;try{if((await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,quantity:s})})).ok)return t().addItem(e,s),!0;return!1}catch(e){return console.error("Sync add item error:",e),!1}},syncUpdateQuantity:async(e,s,r)=>{if(!r)return t().updateQuantity(e,s),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:s})})).ok)return t().updateQuantity(e,s),!0;return!1}catch(e){return console.error("Sync update quantity error:",e),!1}},syncRemoveItem:async(e,s)=>{if(!s)return t().removeItem(e),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:0})})).ok)return t().removeItem(e),!0;return!1}catch(e){return console.error("Sync remove item error:",e),!1}},syncClearCart:async e=>{if(!e)return t().clearCart(),!0;try{if((await fetch("/api/cart",{method:"DELETE"})).ok)return t().clearCart(),!0;return!1}catch(e){return console.error("Sync clear cart error:",e),!1}},loadFromDatabase:async s=>{if(s){e({isSyncing:!0});try{let s=await fetch("/api/cart");if(s.ok){let r=((await s.json()).items||[]).map(e=>{var t,s;return{product:{id:e.product.id,name:e.product.name,slug:e.product.slug,price:Number(e.product.price),originalPrice:e.product.originalPrice?Number(e.product.originalPrice):Number(e.product.price),discount:e.product.discount||0,unit:e.product.unit,images:(null===(t=e.product.images)||void 0===t?void 0:t.map(e=>e.url))||[],category:(null===(s=e.product.category)||void 0===s?void 0:s.name)||"",stockCount:e.product.stockCount,stockStatus:e.product.stockStatus,rating:e.product.rating||0,reviewCount:e.product.reviewCount||0},quantity:e.quantity,selectedUnit:e.product.unit}}),a=t().items,i=new Map;for(let e of(r.forEach(e=>{i.set(e.product.id,e)}),a))i.has(e.product.id)||(i.set(e.product.id,e),await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.product.id,quantity:e.quantity})}));e({items:Array.from(i.values())})}}catch(e){console.error("Load from database error:",e)}finally{e({isSyncing:!1})}}}}),{name:"karim-cart"})),n=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],addItem:t=>{e(e=>e.items.find(e=>e.id===t.id)?e:{items:[...e.items,t]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},isInWishlist:e=>t().items.some(t=>t.id===e),clearWishlist:()=>e({items:[]})}),{name:"karim-wishlist"}));(0,r.Ue)()((0,a.tJ)((e,t)=>({user:null,isAuthenticated:!1,addresses:[],login:t=>{e({user:t,isAuthenticated:!0,addresses:t.addresses})},logout:()=>{e({user:null,isAuthenticated:!1,addresses:[]})},updateProfile:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))},addAddress:t=>{e(e=>({addresses:[...e.addresses,t]}))},updateAddress:(t,s)=>{e(e=>({addresses:e.addresses.map(e=>e.id===t?{...e,...s}:e)}))},removeAddress:t=>{e(e=>({addresses:e.addresses.filter(e=>e.id!==t)}))},setDefaultAddress:t=>{e(e=>({addresses:e.addresses.map(e=>({...e,isDefault:e.id===t}))}))}}),{name:"karim-user"}));let o=(0,r.Ue)()((0,a.tJ)((e,t)=>({query:"",recentSearches:[],isOpen:!1,setQuery:t=>e({query:t}),addRecentSearch:t=>{e(e=>{let s=e.recentSearches.filter(e=>e!==t);return{recentSearches:[t,...s].slice(0,10)}})},clearRecentSearches:()=>e({recentSearches:[]}),toggleSearch:()=>e(e=>({isOpen:!e.isOpen}))}),{name:"karim-search"}));(0,r.Ue)()((0,a.tJ)((e,t)=>({notifications:[],unreadCount:0,addNotification:t=>{e(e=>({notifications:[t,...e.notifications],unreadCount:e.unreadCount+1}))},markAsRead:t=>{e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,isRead:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)}))},markAllAsRead:()=>{e(e=>({notifications:e.notifications.map(e=>({...e,isRead:!0})),unreadCount:0}))},clearNotifications:()=>e({notifications:[],unreadCount:0})}),{name:"karim-notifications"}));let d=(0,r.Ue)(e=>({isMobileMenuOpen:!1,isFilterOpen:!1,viewMode:"grid",toggleMobileMenu:()=>e(e=>({isMobileMenuOpen:!e.isMobileMenuOpen})),toggleFilter:()=>e(e=>({isFilterOpen:!e.isFilterOpen})),setViewMode:t=>e({viewMode:t})}))}}]);