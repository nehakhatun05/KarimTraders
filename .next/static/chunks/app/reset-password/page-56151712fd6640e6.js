(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2363],{3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7216:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5589:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2104:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5755:function(e,t,s){Promise.resolve().then(s.bind(s,7078))},7078:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),n=s(4033),i=s(1396),l=s.n(i),c=s(6264),o=s(2104),d=s(3067),m=s(3008),x=s(5589),u=s(7216),h=s(9670);function f(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),s=(null==t?void 0:t.get("token"))||null,[i,f]=(0,a.useState)(""),[p,y]=(0,a.useState)(""),[g,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[k,Z]=(0,a.useState)(!0),[S,C]=(0,a.useState)(""),[P,L]=(0,a.useState)(!1),[z,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!s){Z(!1),C("Invalid or missing reset token");return}fetch("/api/auth/verify-reset-token?token=".concat(s)).then(e=>e.json()).then(e=>{e.valid?L(!0):C(e.error||"Invalid or expired reset token")}).catch(()=>{C("Failed to verify token")}).finally(()=>{Z(!1)})},[s]);let M=async t=>{if(t.preventDefault(),C(""),i.length<6){C("Password must be at least 6 characters");return}if(i!==p){C("Passwords do not match");return}v(!0);try{let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:i})}),r=await t.json();if(!t.ok)throw Error(r.error||"Something went wrong");E(!0),setTimeout(()=>{e.push("/login")},3e3)}catch(e){C(e.message)}finally{v(!1)}};return k?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Verifying reset link..."})]})}):P||z?z?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,r.jsx)(m.Z,{className:"h-12 w-12 text-green-600"})})}),(0,r.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Password Reset!"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been successfully reset. Redirecting you to login..."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)(l(),{href:"/login",className:"inline-flex items-center text-sm font-medium text-primary hover:text-primary/80",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Go to Login"]})})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(l(),{href:"/login",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Back to Login"]}),(0,r.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Set new password"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Your new password must be at least 6 characters long."})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:M,children:[S&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:S}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"password",name:"password",type:g?"text":"password",required:!0,value:i,onChange:e=>f(e.target.value),className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Enter new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>j(!g),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:g?(0,r.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:w?"text":"password",required:!0,value:p,onChange:e=>y(e.target.value),className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"Confirm new password"}),(0,r.jsx)("button",{type:"button",onClick:()=>N(!w),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:w?(0,r.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})})]})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:b,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 animate-spin mr-2"}),"Resetting..."]}):"Reset Password"})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"rounded-full bg-red-100 p-3",children:(0,r.jsx)(o.Z,{className:"h-12 w-12 text-red-600"})})}),(0,r.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Invalid Reset Link"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:S||"This password reset link is invalid or has expired."}),(0,r.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,r.jsx)(l(),{href:"/forgot-password",className:"inline-flex items-center justify-center w-full py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary/90",children:"Request New Reset Link"}),(0,r.jsxs)(l(),{href:"/login",className:"inline-flex items-center justify-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[6221,2971,4938,1744],function(){return e(e.s=5755)}),_N_E=e.O()}]);