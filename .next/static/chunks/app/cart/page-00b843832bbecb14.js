(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{8291:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},4891:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},6678:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3505:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},3673:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1961:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},9900:function(e,t,s){Promise.resolve().then(s.bind(s,8726))},8726:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),i=s(1396),n=s.n(i),a=s(3505),c=s(4891),d=s(9883),o=s(1138),l=s(3673),u=s(8291),m=s(1961),p=s(6678),h=s(2749),x=s(7039),y=s(5925),f=s(2265);function g(){var e;let{data:t}=(0,h.useSession)(),s=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id,{items:i,removeItem:g,updateQuantity:j,getSubtotal:v,getDeliveryCharge:N,getTotal:b,clearCart:k,syncUpdateQuantity:C,syncRemoveItem:w,syncClearCart:S}=(0,x.xS)(),[Z,M]=(0,f.useState)(""),[q,O]=(0,f.useState)(null),[F,E]=(0,f.useState)(0),P=v(),I=N(),A=b()-F,T=async(e,t)=>{s?await C(e,t,s):j(e,t)},U=async e=>{s?await w(e,s):g(e),y.ZP.success("Item removed")},z=async()=>{s?await S(s):k(),y.ZP.success("Cart cleared")};return 0===i.length?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"container-custom",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center max-w-lg mx-auto",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(a.Z,{className:"text-gray-400",size:48})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Add items to your cart to continue shopping"}),(0,r.jsx)(n(),{href:"/products",className:"btn-primary",children:"Continue Shopping"})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"container-custom",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Shopping Cart"}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[P<500&&(0,r.jsxs)("div",{className:"bg-primary-50 rounded-xl p-4",children:[(0,r.jsxs)("p",{className:"text-primary-700 mb-2",children:["Add ",(0,r.jsxs)("strong",{children:["₹",(500-P).toFixed(0)]})," more for FREE delivery!"]}),(0,r.jsx)("div",{className:"w-full bg-primary-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(P/500*100,100),"%")}})})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm divide-y",children:i.map(e=>(0,r.jsx)("div",{className:"p-4 md:p-6",children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(n(),{href:"/products/".concat(e.product.slug),className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)("img",{src:e.product.images[0],alt:e.product.name,className:"w-full h-full object-cover"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)(n(),{href:"/products/".concat(e.product.slug),children:(0,r.jsx)("h3",{className:"font-medium text-gray-800 hover:text-primary-600 transition-colors",children:e.product.name})}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.product.unit}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsxs)("span",{className:"text-lg font-semibold text-primary-600",children:["₹",e.product.price]}),e.product.discount>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:["₹",e.product.originalPrice]}),(0,r.jsxs)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded",children:[e.product.discount,"% off"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-4 md:hidden",children:[(0,r.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>T(e.product.id,e.quantity-1),className:"p-2 hover:bg-gray-100 transition-colors",children:(0,r.jsx)(c.Z,{size:16})}),(0,r.jsx)("span",{className:"w-10 text-center font-medium",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>T(e.product.id,e.quantity+1),className:"p-2 hover:bg-gray-100 transition-colors",children:(0,r.jsx)(d.Z,{size:16})})]}),(0,r.jsx)("button",{onClick:()=>U(e.product.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(o.Z,{size:20})})]})]}),(0,r.jsxs)("div",{className:"hidden md:flex flex-col items-end justify-between",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-800",children:["₹",(e.product.price*e.quantity).toFixed(2)]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>T(e.product.id,e.quantity-1),className:"p-2 hover:bg-gray-100 transition-colors",children:(0,r.jsx)(c.Z,{size:16})}),(0,r.jsx)("span",{className:"w-10 text-center font-medium",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>T(e.product.id,e.quantity+1),className:"p-2 hover:bg-gray-100 transition-colors",children:(0,r.jsx)(d.Z,{size:16})})]}),(0,r.jsx)("button",{onClick:()=>U(e.product.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(o.Z,{size:20})})]})]})]})},e.product.id))}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(n(),{href:"/products",className:"text-primary-600 font-medium hover:text-primary-700 flex items-center gap-2",children:"← Continue Shopping"}),(0,r.jsx)("button",{onClick:z,className:"text-red-600 font-medium hover:text-red-700",children:"Clear Cart"})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-24",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"mb-6",children:[q?(0,r.jsxs)("div",{className:"flex items-center justify-between bg-green-50 p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,r.jsx)(l.Z,{size:18}),(0,r.jsx)("span",{className:"font-medium",children:q})]}),(0,r.jsx)("button",{onClick:()=>{O(null),E(0),y.ZP.success("Coupon removed")},className:"text-red-500 text-sm hover:text-red-600",children:"Remove"})]}):(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:Z,onChange:e=>M(e.target.value),placeholder:"Enter coupon code",className:"flex-1 input-field"}),(0,r.jsx)("button",{onClick:()=>{if("WELCOME20"===Z.toUpperCase()){let e=Math.min(.2*P,200);E(e),O(Z.toUpperCase()),y.ZP.success("Coupon applied! You save ₹".concat(e.toFixed(0)))}else"FRESH50"===Z.toUpperCase()?(E(50),O(Z.toUpperCase()),y.ZP.success("Coupon applied! You save ₹50")):y.ZP.error("Invalid coupon code");M("")},className:"btn-outline",children:"Apply"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Try: WELCOME20, FRESH50"})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",i.length," items)"]}),(0,r.jsxs)("span",{children:["₹",P.toFixed(2)]})]}),F>0&&(0,r.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,r.jsx)("span",{children:"Coupon Discount"}),(0,r.jsxs)("span",{children:["-₹",F.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Delivery"}),(0,r.jsx)("span",{className:0===I?"text-green-600":"",children:0===I?"FREE":"₹".concat(I)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold pt-3 border-t",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-primary-600",children:["₹",A.toFixed(2)]})]})]}),(F>0||i.some(e=>e.product.discount>0))&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:(0,r.jsxs)("p",{className:"text-green-700 text-sm font-medium",children:["\uD83C\uDF89 You're saving ₹",(i.reduce((e,t)=>e+(t.product.originalPrice-t.product.price)*t.quantity,0)+F).toFixed(0)," on this order!"]})}),(0,r.jsxs)(n(),{href:"/checkout",className:"w-full btn-primary flex items-center justify-center gap-2 mt-6",children:["Proceed to Checkout",(0,r.jsx)(u.Z,{size:18})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,r.jsx)(m.Z,{size:18,className:"text-primary-600"}),(0,r.jsx)("span",{children:"Free delivery on orders above ₹500"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,r.jsx)(p.Z,{size:18,className:"text-primary-600"}),(0,r.jsx)("span",{children:"100% secure payment"})]})]})]})})]})]})})}},7039:function(e,t,s){"use strict";s.d(t,{HB:function(){return d},Rp:function(){return c},Yl:function(){return a},xS:function(){return n}});var r=s(4660),i=s(4810);let n=(0,r.Ue)()((0,i.tJ)((e,t)=>({items:[],isOpen:!1,isSyncing:!1,setItems:t=>e({items:t}),setSyncing:t=>e({isSyncing:t}),addItem:(t,s)=>{e(e=>e.items.find(e=>e.product.id===t.id)?{items:e.items.map(e=>e.product.id===t.id?{...e,quantity:e.quantity+s}:e)}:{items:[...e.items,{product:t,quantity:s,selectedUnit:t.unit}]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.product.id!==t)}))},updateQuantity:(t,s)=>{e(e=>({items:e.items.map(e=>e.product.id===t?{...e,quantity:Math.max(0,s)}:e).filter(e=>e.quantity>0)}))},clearCart:()=>e({items:[]}),toggleCart:()=>e(e=>({isOpen:!e.isOpen})),getSubtotal:()=>t().items.reduce((e,t)=>e+t.product.price*t.quantity,0),getItemCount:()=>t().items.reduce((e,t)=>e+t.quantity,0),getDeliveryCharge:()=>t().getSubtotal()>=500?0:40,getTotal:()=>t().getSubtotal()+t().getDeliveryCharge(),syncAddItem:async(e,s,r)=>{if(!r)return t().addItem(e,s),!0;try{if((await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,quantity:s})})).ok)return t().addItem(e,s),!0;return!1}catch(e){return console.error("Sync add item error:",e),!1}},syncUpdateQuantity:async(e,s,r)=>{if(!r)return t().updateQuantity(e,s),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:s})})).ok)return t().updateQuantity(e,s),!0;return!1}catch(e){return console.error("Sync update quantity error:",e),!1}},syncRemoveItem:async(e,s)=>{if(!s)return t().removeItem(e),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:0})})).ok)return t().removeItem(e),!0;return!1}catch(e){return console.error("Sync remove item error:",e),!1}},syncClearCart:async e=>{if(!e)return t().clearCart(),!0;try{if((await fetch("/api/cart",{method:"DELETE"})).ok)return t().clearCart(),!0;return!1}catch(e){return console.error("Sync clear cart error:",e),!1}},loadFromDatabase:async s=>{if(s){e({isSyncing:!0});try{let s=await fetch("/api/cart");if(s.ok){let r=((await s.json()).items||[]).map(e=>{var t,s;return{product:{id:e.product.id,name:e.product.name,slug:e.product.slug,price:Number(e.product.price),originalPrice:e.product.originalPrice?Number(e.product.originalPrice):Number(e.product.price),discount:e.product.discount||0,unit:e.product.unit,images:(null===(t=e.product.images)||void 0===t?void 0:t.map(e=>e.url))||[],category:(null===(s=e.product.category)||void 0===s?void 0:s.name)||"",stockCount:e.product.stockCount,stockStatus:e.product.stockStatus,rating:e.product.rating||0,reviewCount:e.product.reviewCount||0},quantity:e.quantity,selectedUnit:e.product.unit}}),i=t().items,n=new Map;for(let e of(r.forEach(e=>{n.set(e.product.id,e)}),i))n.has(e.product.id)||(n.set(e.product.id,e),await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.product.id,quantity:e.quantity})}));e({items:Array.from(n.values())})}}catch(e){console.error("Load from database error:",e)}finally{e({isSyncing:!1})}}}}),{name:"karim-cart"})),a=(0,r.Ue)()((0,i.tJ)((e,t)=>({items:[],addItem:t=>{e(e=>e.items.find(e=>e.id===t.id)?e:{items:[...e.items,t]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},isInWishlist:e=>t().items.some(t=>t.id===e),clearWishlist:()=>e({items:[]})}),{name:"karim-wishlist"}));(0,r.Ue)()((0,i.tJ)((e,t)=>({user:null,isAuthenticated:!1,addresses:[],login:t=>{e({user:t,isAuthenticated:!0,addresses:t.addresses})},logout:()=>{e({user:null,isAuthenticated:!1,addresses:[]})},updateProfile:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))},addAddress:t=>{e(e=>({addresses:[...e.addresses,t]}))},updateAddress:(t,s)=>{e(e=>({addresses:e.addresses.map(e=>e.id===t?{...e,...s}:e)}))},removeAddress:t=>{e(e=>({addresses:e.addresses.filter(e=>e.id!==t)}))},setDefaultAddress:t=>{e(e=>({addresses:e.addresses.map(e=>({...e,isDefault:e.id===t}))}))}}),{name:"karim-user"}));let c=(0,r.Ue)()((0,i.tJ)((e,t)=>({query:"",recentSearches:[],isOpen:!1,setQuery:t=>e({query:t}),addRecentSearch:t=>{e(e=>{let s=e.recentSearches.filter(e=>e!==t);return{recentSearches:[t,...s].slice(0,10)}})},clearRecentSearches:()=>e({recentSearches:[]}),toggleSearch:()=>e(e=>({isOpen:!e.isOpen}))}),{name:"karim-search"}));(0,r.Ue)()((0,i.tJ)((e,t)=>({notifications:[],unreadCount:0,addNotification:t=>{e(e=>({notifications:[t,...e.notifications],unreadCount:e.unreadCount+1}))},markAsRead:t=>{e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,isRead:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)}))},markAllAsRead:()=>{e(e=>({notifications:e.notifications.map(e=>({...e,isRead:!0})),unreadCount:0}))},clearNotifications:()=>e({notifications:[],unreadCount:0})}),{name:"karim-notifications"}));let d=(0,r.Ue)(e=>({isMobileMenuOpen:!1,isFilterOpen:!1,viewMode:"grid",toggleMobileMenu:()=>e(e=>({isMobileMenuOpen:!e.isMobileMenuOpen})),toggleFilter:()=>e(e=>({isFilterOpen:!e.isFilterOpen})),setViewMode:t=>e({viewMode:t})}))}},function(e){e.O(0,[6221,2749,4356,2971,4938,1744],function(){return e(e.s=9900)}),_N_E=e.O()}]);