(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7847],{3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7158:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2482:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4322:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1961:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]])},2104:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6049:function(e,t,s){Promise.resolve().then(s.bind(s,7340))},7340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),l=s(2265),a=s(1396),n=s.n(a),c=s(2749),i=s(4033),d=s(6141),o=s(4322),x=s(1961),u=s(3008),h=s(2104),m=s(6264),p=s(7158),g=s(1827),y=s(2482),f=s(5817),j=s(9670);let v={PENDING:{label:"Pending",icon:d.Z,color:"text-yellow-600 bg-yellow-100"},CONFIRMED:{label:"Confirmed",icon:o.Z,color:"text-blue-600 bg-blue-100"},PROCESSING:{label:"Processing",icon:o.Z,color:"text-blue-600 bg-blue-100"},SHIPPED:{label:"Shipped",icon:x.Z,color:"text-purple-600 bg-purple-100"},OUT_FOR_DELIVERY:{label:"Out for Delivery",icon:x.Z,color:"text-orange-600 bg-orange-100"},DELIVERED:{label:"Delivered",icon:u.Z,color:"text-green-600 bg-green-100"},CANCELLED:{label:"Cancelled",icon:h.Z,color:"text-red-600 bg-red-100"}};function b(){let{data:e,status:t}=(0,c.useSession)(),s=(0,i.useRouter)(),[a,d]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0),[h,b]=(0,l.useState)("all"),[N,w]=(0,l.useState)("");(0,l.useEffect)(()=>{if("unauthenticated"===t){s.push("/login?callbackUrl=/account/orders");return}"authenticated"===t&&k()},[t,s]);let k=async()=>{try{u(!0);let e=await fetch("/api/orders");if(e.ok){let t=await e.json();d(t.orders||[])}}catch(e){console.error("Error fetching orders:",e)}finally{u(!1)}},Z=a.filter(e=>{var t;return!!(("all"===h||e.status===h.toUpperCase())&&(!N||(null===(t=e.orderNumber)||void 0===t?void 0:t.toLowerCase().includes(N.toLowerCase()))||e.id.toLowerCase().includes(N.toLowerCase())))});return"loading"===t||x?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"w-8 h-8 animate-spin text-primary-600"})}):"unauthenticated"===t?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b",children:(0,r.jsxs)("div",{className:"container-custom py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[(0,r.jsx)(n(),{href:"/",className:"hover:text-primary-600",children:"Home"}),(0,r.jsx)(p.Z,{size:16}),(0,r.jsx)(n(),{href:"/account",className:"hover:text-primary-600",children:"Account"}),(0,r.jsx)(p.Z,{size:16}),(0,r.jsx)("span",{className:"text-gray-800",children:"My Orders"})]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"})]})}),(0,r.jsxs)("div",{className:"container-custom py-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(g.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,r.jsx)("input",{type:"text",placeholder:"Search by order ID...",value:N,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{size:18,className:"text-gray-400"}),(0,r.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,r.jsx)("option",{value:"all",children:"All Orders"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]})}),Z.length>0?(0,r.jsx)("div",{className:"space-y-4",children:Z.map(e=>{let t=v[e.status]||v.PENDING,s=t.icon,l=new Date(e.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"});return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-4 border-b bg-gray-50 flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Order ID"}),(0,r.jsx)("p",{className:"font-semibold text-gray-800",children:e.orderNumber||e.id.slice(-8).toUpperCase()})]}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Order Date"}),(0,r.jsx)("p",{className:"font-medium text-gray-800",children:l})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ".concat(t.color),children:[(0,r.jsx)(s,{size:16}),t.label]})})]}),(0,r.jsx)("div",{className:"p-4",children:e.items.map((e,t)=>{var s,l,a,n,c;return(0,r.jsxs)("div",{className:"flex items-center gap-4 py-3 border-b last:border-0",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)("img",{src:(null===(a=e.product)||void 0===a?void 0:null===(l=a.images)||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:s.url)||"https://via.placeholder.com/100",alt:(null===(n=e.product)||void 0===n?void 0:n.name)||"Product",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-gray-800 truncate",children:(null===(c=e.product)||void 0===c?void 0:c.name)||"Product"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]})]}),(0,r.jsxs)("p",{className:"font-semibold text-gray-800",children:["₹",e.price*e.quantity]})]},e.id||t)})}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 border-t flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Total Amount:"}),(0,r.jsxs)("span",{className:"ml-2 text-lg font-bold text-gray-800",children:["₹",e.total]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["DELIVERED"===e.status&&(0,r.jsxs)("button",{className:"flex items-center gap-1 text-sm text-gray-600 hover:text-primary-600",children:[(0,r.jsx)(f.Z,{size:16}),"Invoice"]}),(0,r.jsxs)(n(),{href:"/account/orders/".concat(e.id),className:"flex items-center gap-1 px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700",children:[(0,r.jsx)(j.Z,{size:16}),"View Details"]})]})]})]},e.id)})}):(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[(0,r.jsx)(o.Z,{size:64,className:"mx-auto text-gray-300 mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:N||"all"!==h?"Try adjusting your filters":"You haven't placed any orders yet. Start shopping to place your first order!"}),(0,r.jsx)(n(),{href:"/products",className:"btn-primary inline-block",children:"Start Shopping"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:a.length}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Orders"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:a.filter(e=>"DELIVERED"===e.status).length}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Delivered"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 text-center",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:a.filter(e=>"SHIPPED"===e.status||"OUT_FOR_DELIVERY"===e.status).length}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"In Transit"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 text-center",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold text-gray-600",children:["₹",a.filter(e=>"DELIVERED"===e.status).reduce((e,t)=>e+t.total,0)]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Spent"})]})]})]})]})}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[6221,2749,2971,4938,1744],function(){return e(e.s=6049)}),_N_E=e.O()}]);