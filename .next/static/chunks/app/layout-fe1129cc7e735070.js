(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{1981:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9917:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]])},3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8291:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},9863:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Carrot",[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7158:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1016:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},1813:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},3445:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]])},7480:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},6264:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5883:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6142:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},8004:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},268:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Nut",[["path",{d:"M12 4V2",key:"1k5q1u"}],["path",{d:"M5 10v4a7.004 7.004 0 0 0 5.277 6.787c.412.104.802.292 1.102.592L12 22l.621-.621c.3-.3.69-.488 1.102-.592A7.003 7.003 0 0 0 19 14v-4",key:"1tgyif"}],["path",{d:"M12 4C8 4 4.5 6 4 8c-.243.97-.919 1.952-2 3 1.31-.082 1.972-.29 3-1 .54.92.982 1.356 2 2 1.452-.647 1.954-1.098 2.5-2 .595.995 1.151 1.427 2.5 2 1.31-.621 1.862-1.058 2.5-2 .629.977 1.162 1.423 2.5 2 1.209-.548 1.68-.967 2-2 1.032.916 1.683 1.157 3 1-1.297-1.036-1.758-2.03-2-3-.5-2-4-4-8-4Z",key:"tnsqj"}]])},2741:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},6712:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},3673:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},5790:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},7972:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8905:function(e,t,s){Promise.resolve().then(s.t.bind(s,5250,23)),Promise.resolve().then(s.t.bind(s,3385,23)),Promise.resolve().then(s.bind(s,8101)),Promise.resolve().then(s.bind(s,6172)),Promise.resolve().then(s.bind(s,5692))},8101:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ef}});var r=s(7437),a=s(2265),i=s(1396),n=s.n(i),l=s(2749),c=s(2369),o=s(6141),d=s(2741),m=s(3445),x=s(1961),u=s(2549),h=s(8004),p=s(7810),g=s(3523),f=s(7972),y=s(4322),j=s(5883),b=s(3505),v=s(7039),N=s(3770),w=s(1827),k=s(6264),C=s(3673),S=s(8291),Z=s(5790);function z(){let{query:e,setQuery:t,recentSearches:s,addRecentSearch:i,toggleSearch:l}=(0,v.Rp)(),[c,d]=(0,a.useState)({products:[],categories:[],suggestions:[]}),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),g=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.focus(),y()},[]);let y=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let t=await e.json(),s=Array.isArray(t)?t:t.categories||[];p(s.slice(0,8).map(e=>{var t;return{id:e.id,name:e.name,slug:e.slug,image:e.image,productCount:e.productCount||(null===(t=e._count)||void 0===t?void 0:t.products)||0}}))}}catch(e){console.error("Error fetching categories:",e)}},j=(0,a.useCallback)(async e=>{if(e.length<2){d({products:[],categories:[],suggestions:[]});return}x(!0);try{let t=await fetch("/api/search?q=".concat(encodeURIComponent(e),"&limit=8"));if(t.ok){let e=await t.json();d({products:e.products||[],categories:e.categories||[],suggestions:e.suggestions||[]})}}catch(e){console.error("Search error:",e)}finally{x(!1)}},[]);(0,a.useEffect)(()=>(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{j(e)},300),()=>{f.current&&clearTimeout(f.current)}),[e,j]);let b=e=>{i(e),l(),window.location.href="/products?search=".concat(encodeURIComponent(e))};return(0,r.jsx)("div",{className:"fixed inset-0 z-[100] bg-black/50 animate-fade-in",children:(0,r.jsxs)("div",{className:"bg-white w-full max-w-3xl mx-auto mt-0 md:mt-20 md:rounded-xl shadow-2xl max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b",children:[(0,r.jsx)(w.Z,{className:"text-gray-400",size:24}),(0,r.jsx)("input",{ref:g,type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search for fruits, vegetables, spices...",className:"flex-1 text-lg outline-none",onKeyDown:t=>{"Enter"===t.key&&e&&b(e)}}),m&&(0,r.jsx)(k.Z,{className:"animate-spin text-gray-400",size:20}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,r.jsx)(u.Z,{size:24,className:"text-gray-500"})})]}),(0,r.jsxs)("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:[e.length>=2&&(c.products.length>0||c.categories.length>0)&&(0,r.jsxs)("div",{className:"p-4",children:[c.categories.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 mb-3 flex items-center gap-2",children:[(0,r.jsx)(C.Z,{size:16}),"Categories"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.categories.map(e=>(0,r.jsxs)(n(),{href:"/products?category=".concat(e.slug),onClick:()=>{i(e.name),l()},className:"px-4 py-2 bg-primary-50 hover:bg-primary-100 rounded-full text-sm font-medium text-primary-700 transition-colors",children:[e.name," (",e.productCount,")"]},e.id))})]}),c.products.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Products"}),(0,r.jsx)("div",{className:"space-y-2",children:c.products.slice(0,6).map(e=>(0,r.jsxs)(n(),{href:"/products/".concat(e.slug),onClick:()=>{i(e.name),l()},className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,r.jsx)("div",{className:"w-14 h-14 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,r.jsx)(w.Z,{size:20})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-gray-800 truncate",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.category||"Uncategorized"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-semibold text-primary-600",children:["₹",e.price]}),e.discount>0&&e.originalPrice&&(0,r.jsxs)("p",{className:"text-xs text-gray-400 line-through",children:["₹",e.originalPrice]})]})]},e.id))}),c.products.length>6&&(0,r.jsxs)("button",{onClick:()=>b(e),className:"w-full mt-3 py-3 text-primary-600 font-medium hover:bg-primary-50 rounded-lg transition-colors flex items-center justify-center gap-2",children:["View all ",c.products.length," results",(0,r.jsx)(S.Z,{size:18})]})]})]}),e.length>=2&&!m&&0===c.products.length&&0===c.categories.length&&(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsxs)("p",{className:"text-gray-500",children:['No products found for "',e,'"']}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try searching with different keywords"})]}),e.length>=2&&m&&0===c.products.length&&(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)(k.Z,{className:"animate-spin mx-auto text-primary-600 mb-2",size:32}),(0,r.jsx)("p",{className:"text-gray-500",children:"Searching..."})]}),e.length<2&&(0,r.jsxs)(r.Fragment,{children:[s.length>0&&(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 mb-3 flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:16}),"Recent Searches"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.slice(0,5).map((e,t)=>(0,r.jsx)("button",{onClick:()=>b(e),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full text-sm font-medium text-gray-700 transition-colors",children:e},t))})]}),(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-500 mb-3 flex items-center gap-2",children:[(0,r.jsx)(Z.Z,{size:16}),"Popular Searches"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["Fruits","Vegetables","Dry Fruits","Spices","Organic"].map(e=>(0,r.jsx)("button",{onClick:()=>b(e),className:"px-4 py-2 bg-primary-50 hover:bg-primary-100 rounded-full text-sm font-medium text-primary-700 transition-colors",children:e},e))})]}),h.length>0&&(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-3",children:"Browse Categories"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:h.map(e=>(0,r.jsxs)(n(),{href:"/products?category=".concat(e.slug),onClick:l,className:"flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:[e.image?(0,r.jsx)("img",{src:e.image,alt:e.name,className:"w-8 h-8 rounded object-cover"}):(0,r.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded flex items-center justify-center",children:(0,r.jsx)(C.Z,{size:16,className:"text-primary-600"})}),(0,r.jsx)("span",{className:"font-medium text-gray-700 text-sm truncate",children:e.name})]},e.id))})]})]})]})]})})}var M=s(6712),A=s(4891),E=s(9883),R=s(1138),P=s(5925);function D(){var e;let{data:t}=(0,l.useSession)(),s=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id,{items:a,toggleCart:i,removeItem:c,updateQuantity:o,getSubtotal:d,getDeliveryCharge:m,getTotal:x,clearCart:h,syncUpdateQuantity:p,syncRemoveItem:g,syncClearCart:f}=(0,v.xS)(),y=d(),j=m(),b=x(),N=async(e,t)=>{s?await p(e,t,s):o(e,t)},w=async e=>{s?await g(e,s):c(e),P.ZP.success("Item removed from cart")},k=async()=>{s?await f(s):h(),P.ZP.success("Cart cleared")};return(0,r.jsxs)("div",{className:"fixed inset-0 z-[100]",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:i}),(0,r.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl flex flex-col animate-slide-in-right",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(M.Z,{className:"text-primary-600",size:24}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Your Cart"}),(0,r.jsxs)("span",{className:"bg-primary-100 text-primary-700 px-2 py-0.5 rounded-full text-sm font-medium",children:[a.length," items"]})]}),(0,r.jsx)("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,r.jsx)(u.Z,{size:24})})]}),a.length>0&&y<500&&(0,r.jsxs)("div",{className:"px-4 py-3 bg-primary-50 border-b",children:[(0,r.jsxs)("p",{className:"text-sm text-primary-700 mb-2",children:["Add ",(0,r.jsxs)("strong",{children:["₹",(500-y).toFixed(0)]})," more for FREE delivery"]}),(0,r.jsx)("div",{className:"w-full bg-primary-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(y/500*100,100),"%")}})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===a.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(M.Z,{size:40,className:"text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Your cart is empty"}),(0,r.jsx)("p",{className:"text-gray-500 mb-6",children:"Add items to your cart to continue shopping"}),(0,r.jsx)("button",{onClick:i,className:"btn-primary",children:"Continue Shopping"})]}):(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsxs)("div",{className:"flex gap-4 bg-gray-50 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-white rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)("img",{src:e.product.images[0],alt:e.product.name,className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 truncate",children:e.product.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.product.unit}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsxs)("span",{className:"font-semibold text-primary-600",children:["₹",e.product.price]}),e.product.discount>0&&(0,r.jsxs)("span",{className:"text-xs text-gray-400 line-through",children:["₹",e.product.originalPrice]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>N(e.product.id,e.quantity-1),className:"w-8 h-8 flex items-center justify-center bg-white border rounded-full hover:bg-gray-100 transition-colors",children:(0,r.jsx)(A.Z,{size:16})}),(0,r.jsx)("span",{className:"w-8 text-center font-medium",children:e.quantity}),(0,r.jsx)("button",{onClick:()=>N(e.product.id,e.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-white border rounded-full hover:bg-gray-100 transition-colors",children:(0,r.jsx)(E.Z,{size:16})})]}),(0,r.jsx)("button",{onClick:()=>w(e.product.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-full transition-colors",children:(0,r.jsx)(R.Z,{size:18})})]})]})]},e.product.id))})}),a.length>0&&(0,r.jsxs)("div",{className:"border-t p-4 space-y-4 bg-gray-50",children:[(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsxs)("span",{children:["₹",y.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,r.jsx)("span",{children:"Delivery"}),(0,r.jsx)("span",{className:0===j?"text-green-600 font-medium":"",children:0===j?"FREE":"₹".concat(j)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsxs)("span",{className:"text-primary-600",children:["₹",b.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(n(),{href:"/checkout",onClick:i,className:"w-full btn-primary flex items-center justify-center gap-2",children:["Proceed to Checkout",(0,r.jsx)(S.Z,{size:18})]}),(0,r.jsx)("button",{onClick:i,className:"w-full btn-outline",children:"Continue Shopping"})]}),(0,r.jsx)("button",{onClick:k,className:"w-full text-sm text-red-600 hover:text-red-700",children:"Clear Cart"})]})]})]})}var O=s(6142),L=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let F=(0,L.Z)("MapPinOff",[["path",{d:"M5.43 5.43A8.06 8.06 0 0 0 4 10c0 6 8 12 8 12a29.94 29.94 0 0 0 5-5",key:"12a8pk"}],["path",{d:"M19.18 13.52A8.66 8.66 0 0 0 20 10a8 8 0 0 0-8-8 7.88 7.88 0 0 0-3.52.82",key:"1r9f6y"}],["path",{d:"M9.13 9.13A2.78 2.78 0 0 0 9 10a3 3 0 0 0 3 3 2.78 2.78 0 0 0 .87-.13",key:"erynq7"}],["path",{d:"M14.9 9.25a3 3 0 0 0-2.15-2.16",key:"1hwwmx"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var T=s(1981);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let I=(0,L.Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var U=s(3008),q=s(3021),V=s(3067);function J(e){let{isOpen:t,onClose:s,location:i,pincode:n}=e,[l,c]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1);if(!t)return null;let h=async e=>{if(e.preventDefault(),!l){P.ZP.error("Please enter your email");return}d(!0);try{await new Promise(e=>setTimeout(e,1e3)),x(!0),P.ZP.success("We'll notify you when we launch in your area!")}catch(e){P.ZP.error("Failed to register. Please try again.")}finally{d(!1)}};return(0,r.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors z-10",children:(0,r.jsx)(u.Z,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 px-6 pt-8 pb-16 text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 rounded-full mb-4 backdrop-blur-sm",children:(0,r.jsx)(F,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h2",{className:"text-xl font-bold text-white mb-1",children:"Oops! We're Not Here Yet"}),(0,r.jsx)("p",{className:"text-white/90 text-sm",children:"But we're expanding fast!"})]}),(0,r.jsxs)("div",{className:"px-6 pb-6 -mt-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-5",children:[(0,r.jsxs)("div",{className:"text-center mb-5",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-700 mb-3",children:[(0,r.jsx)(F,{className:"w-4 h-4 text-gray-500"}),i||n?(0,r.jsx)("span",{children:i||"Pincode: ".concat(n)}):(0,r.jsx)("span",{children:"Your location"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Sorry, KARIM TRADERS is currently not available at your location. We're working hard to expand our services to serve you better."})]}),m?(0,r.jsxs)("div",{className:"border-t pt-4 text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mb-3",children:(0,r.jsx)(q.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsx)("p",{className:"text-green-700 font-medium text-sm",children:"You're on the list! We'll notify you soon."})]}):(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[(0,r.jsx)(q.Z,{className:"w-4 h-4 text-primary"}),"Get notified when we launch in your area"]}),(0,r.jsxs)("form",{onSubmit:h,className:"flex gap-2",children:[(0,r.jsx)("input",{type:"email",value:l,onChange:e=>c(e.target.value),placeholder:"Enter your email",className:"flex-1 px-4 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2.5 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors disabled:opacity-50",children:o?"...":"Notify Me"})]})]})]}),(0,r.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,r.jsxs)("button",{onClick:s,className:"w-full py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)(V.Z,{className:"w-4 h-4"}),"Change Location"]})}),(0,r.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Currently serving select areas in India. Check back soon!"})]})]})]})}function W(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(""),[n,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[f,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)(null),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("userLocation");e&&l(JSON.parse(e))},[]),(0,a.useEffect)(()=>{function e(e){v.current&&!v.current.contains(e.target)&&t(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let N=async e=>{try{let t=await fetch("/api/service-areas?pincode=".concat(e));return await t.json()}catch(e){return console.error("Error checking service area:",e),{isServiceable:!1,serviceArea:null}}},C=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!s&&e.pincode&&"Detected"!==e.pincode&&"N/A"!==e.pincode){let s=await N(e.pincode);if(!s.isServiceable){b({location:"".concat(e.area,", ").concat(e.city),pincode:e.pincode}),y(!0);let s={...e,isServiceable:!1};l(s),localStorage.setItem("userLocation",JSON.stringify(s)),t(!1),i("");return}s.serviceArea&&(e={...e,deliveryTime:s.serviceArea.deliveryTime,isServiceable:!0})}let r={...e,isServiceable:!0};l(r),localStorage.setItem("userLocation",JSON.stringify(r)),t(!1),i(""),p(null)},S=async()=>{if(6===s.length){d(!0),p(null);try{var e,r,a,n;let c=await N(s),o=await fetch("https://api.postalpincode.in/pincode/".concat(s)),d=await o.json();if((null===(e=d[0])||void 0===e?void 0:e.Status)==="Success"&&(null===(a=d[0])||void 0===a?void 0:null===(r=a.PostOffice)||void 0===r?void 0:r.length)>0){let e=d[0].PostOffice[0],r={pincode:s,area:e.Name,city:e.District,state:e.State,deliveryTime:(null===(n=c.serviceArea)||void 0===n?void 0:n.deliveryTime)||"30 mins",isServiceable:c.isServiceable};c.isServiceable?await C(r,!0):(b({location:"".concat(r.area,", ").concat(r.city),pincode:s}),y(!0),l(r),localStorage.setItem("userLocation",JSON.stringify(r)),t(!1),i(""))}else p("Pincode not found. Please try another.")}catch(e){console.error("Pincode search error:",e),p("Unable to verify pincode. Please try again.")}d(!1)}},Z=async(e,t)=>{try{let s=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&addressdetails=1"),{headers:{"Accept-Language":"en"}}),r=await s.json();if(r&&r.address){let s=r.address;return{pincode:s.postcode||"N/A",area:s.suburb||s.neighbourhood||s.village||s.town||s.city_district||"Your Area",city:s.city||s.town||s.village||s.state_district||"Your City",state:s.state||"India",deliveryTime:"20-30 mins",isServiceable:!0,lat:e,lng:t}}return null}catch(e){return console.error("Reverse geocoding failed:",e),null}},z=async()=>{if(x(!0),p(null),!navigator.geolocation){p("Geolocation is not supported by your browser"),x(!1);return}try{let{latitude:e,longitude:s}=(await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})).coords,r=await Z(e,s);if(r)await C(r);else{let r={pincode:"Detected",area:"Current Location",city:"Nearby",state:"India",deliveryTime:"20-30 mins",isServiceable:!1,lat:e,lng:s};l(r),localStorage.setItem("userLocation",JSON.stringify(r)),t(!1),b({location:"Current Location"}),y(!0)}}catch(t){console.error("Location detection error:",t);let e="Unable to detect location. Please try again.";1===t.code?e="Location access denied. Please enable location in browser settings.":2===t.code?e="Location unavailable. Please try again.":3===t.code&&(e="Location request timed out. Please try again."),p(e)}x(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",ref:v,children:[(0,r.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1.5 sm:py-2 hover:bg-gray-100 rounded-lg transition-colors group",children:[(0,r.jsx)(O.Z,{size:18,className:"flex-shrink-0 ".concat((null==n?void 0:n.isServiceable)===!1?"text-red-500":"text-primary-600")}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight hidden sm:block",children:"Deliver to"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("p",{className:"text-xs sm:text-sm font-semibold truncate max-w-[80px] sm:max-w-[100px] lg:max-w-[150px] ".concat((null==n?void 0:n.isServiceable)===!1?"text-red-600":"text-gray-800"),children:n?n.area:"Location"}),(null==n?void 0:n.isServiceable)===!1&&(0,r.jsx)(F,{size:12,className:"text-red-500"})]})]}),(0,r.jsx)(g.Z,{size:16,className:"text-gray-400 transition-transform ".concat(e?"rotate-180":"")})]}),e&&(0,r.jsxs)("div",{className:"absolute top-full left-0 mt-2 w-80 sm:w-96 bg-white rounded-xl shadow-2xl border border-gray-100 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Select Delivery Location"}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"hover:bg-white/20 p-1 rounded",children:(0,r.jsx)(u.Z,{size:18})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(w.Z,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>{i(e.target.value.replace(/\D/g,"").slice(0,6)),p(null)},placeholder:"Enter pincode",className:"w-full pl-10 pr-20 py-2.5 rounded-lg bg-white text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-300",onKeyDown:e=>"Enter"===e.key&&S()}),(0,r.jsx)("button",{onClick:S,disabled:6!==s.length||c,className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,r.jsx)(k.Z,{size:16,className:"animate-spin"}):"Check"})]})]}),h&&(0,r.jsxs)("div",{className:"px-4 py-3 bg-red-50 border-b border-red-100 flex items-start gap-2",children:[(0,r.jsx)(T.Z,{size:16,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:h})]}),n&&!1===n.isServiceable&&(0,r.jsxs)("div",{className:"px-4 py-3 bg-orange-50 border-b border-orange-100 flex items-start gap-2",children:[(0,r.jsx)(F,{size:16,className:"text-orange-500 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-orange-800",children:"Location not serviceable"}),(0,r.jsx)("p",{className:"text-xs text-orange-600 mt-0.5",children:"Please select a different location to place orders"})]})]}),(0,r.jsxs)("button",{onClick:z,disabled:m,className:"w-full flex items-center gap-3 px-4 py-4 hover:bg-primary-50 border-b border-gray-100 transition-colors group",children:[m?(0,r.jsx)("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(k.Z,{size:20,className:"text-primary-600 animate-spin"})}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow",children:(0,r.jsx)(I,{size:18,className:"text-white"})}),(0,r.jsxs)("div",{className:"text-left flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800 group-hover:text-primary-600 transition-colors",children:m?"Detecting your location...":"Use Current Location"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:m?"Please wait":"Using GPS for accurate delivery"})]}),!m&&(0,r.jsx)("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded-full font-medium",children:"Recommended"})]}),n&&!1!==n.isServiceable&&(0,r.jsxs)("div",{className:"px-4 py-3 bg-green-50 border-b border-green-100",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(U.Z,{size:16,className:"text-green-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Delivery Location"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[n.area,", ",n.city," ","Detected"!==n.pincode&&"N/A"!==n.pincode?"- ".concat(n.pincode):""]}),(0,r.jsxs)("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[(0,r.jsx)(o.Z,{size:12}),"Delivery in ",n.deliveryTime]})]})]})]}),(0,r.jsx)(J,{isOpen:f,onClose:()=>{y(!1),b(null)},location:null==j?void 0:j.location,pincode:null==j?void 0:j.pincode})]})}var H=s(9917),B=s(9863),Y=s(268),_=s(1016),G=s(2245),K=s(9676),Q=s(1813),X=s(7158);let $=[{id:"fresh-fruits",name:"Fresh Fruits",icon:(0,r.jsx)(H.Z,{size:20}),color:"bg-red-500",featured:"/categories/fruits.jpg",subcategories:[{name:"Seasonal Fruits",href:"/products?category=cat-1&sub=seasonal"},{name:"Exotic Fruits",href:"/products?category=cat-1&sub=exotic"},{name:"Citrus Fruits",href:"/products?category=cat-1&sub=citrus"},{name:"Berries",href:"/products?category=cat-1&sub=berries"},{name:"Tropical Fruits",href:"/products?category=cat-1&sub=tropical"},{name:"View All Fruits",href:"/products?category=cat-1"}]},{id:"fresh-vegetables",name:"Fresh Vegetables",icon:(0,r.jsx)(B.Z,{size:20}),color:"bg-green-500",subcategories:[{name:"Leafy Vegetables",href:"/products?category=cat-2&sub=leafy"},{name:"Root Vegetables",href:"/products?category=cat-2&sub=root"},{name:"Gourds & Squashes",href:"/products?category=cat-2&sub=gourds"},{name:"Onions & Potatoes",href:"/products?category=cat-2&sub=onion-potato"},{name:"Exotic Vegetables",href:"/products?category=cat-2&sub=exotic"},{name:"View All Vegetables",href:"/products?category=cat-2"}]},{id:"dry-fruits",name:"Dry Fruits & Nuts",icon:(0,r.jsx)(Y.Z,{size:20}),color:"bg-amber-500",subcategories:[{name:"Almonds",href:"/products?category=cat-3&sub=almonds"},{name:"Cashews",href:"/products?category=cat-3&sub=cashews"},{name:"Walnuts",href:"/products?category=cat-3&sub=walnuts"},{name:"Pistachios",href:"/products?category=cat-3&sub=pistachios"},{name:"Raisins & Dates",href:"/products?category=cat-3&sub=raisins-dates"},{name:"View All Dry Fruits",href:"/products?category=cat-3"}]},{id:"spices",name:"Spices & Seasonings",icon:(0,r.jsx)(_.Z,{size:20}),color:"bg-orange-500",subcategories:[{name:"Whole Spices",href:"/products?category=cat-4&sub=whole"},{name:"Ground Spices",href:"/products?category=cat-4&sub=ground"},{name:"Blended Spices",href:"/products?category=cat-4&sub=blended"},{name:"Herbs & Seasonings",href:"/products?category=cat-4&sub=herbs"},{name:"Exotic Spices",href:"/products?category=cat-4&sub=exotic"},{name:"View All Spices",href:"/products?category=cat-4"}]}],ee=[{name:"Best Sellers",href:"/products?sort=bestseller",icon:(0,r.jsx)(Z.Z,{size:16}),color:"text-orange-600"},{name:"New Arrivals",href:"/products?sort=newest",icon:(0,r.jsx)(G.Z,{size:16}),color:"text-blue-600"},{name:"Offers",href:"/products?offers=true",icon:(0,r.jsx)(K.Z,{size:16}),color:"text-red-600"}];function et(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(null),l=(0,a.useRef)(null),c=(0,a.useRef)(null);(0,a.useEffect)(()=>()=>{c.current&&clearTimeout(c.current)},[]);let o=$.find(e=>e.id===s);return(0,r.jsxs)("div",{className:"relative",ref:l,onMouseEnter:()=>{c.current&&clearTimeout(c.current),t(!0)},onMouseLeave:()=>{c.current=setTimeout(()=>{t(!1),i(null)},200)},children:[(0,r.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2.5 font-semibold text-sm transition-all rounded-lg ".concat(e?"bg-primary-600 text-white shadow-lg":"bg-primary-50 text-primary-700 hover:bg-primary-100"),children:[(0,r.jsx)(Q.Z,{size:18}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Shop by Category"}),(0,r.jsx)(g.Z,{size:16,className:"transition-transform ".concat(e?"rotate-180":"")})]}),e&&(0,r.jsxs)("div",{className:"absolute top-full left-0 mt-2 flex bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden z-50",style:{minWidth:"700px"},children:[(0,r.jsxs)("div",{className:"w-64 bg-gray-50 border-r border-gray-100",children:[(0,r.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,r.jsx)("div",{className:"flex gap-2",children:ee.map(e=>(0,r.jsxs)(n(),{href:e.href,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-white shadow-sm hover:shadow-md transition-shadow ".concat(e.color),children:[e.icon,e.name]},e.name))})}),(0,r.jsx)("div",{className:"py-2",children:$.map(e=>(0,r.jsxs)("div",{onMouseEnter:()=>i(e.id),className:"flex items-center justify-between px-4 py-2.5 cursor-pointer transition-colors ".concat(s===e.id?"bg-white border-r-2 border-primary-600":"hover:bg-gray-100"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 ".concat(e.color," rounded-lg flex items-center justify-center text-white"),children:e.icon}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-800",children:e.name})]}),(0,r.jsx)(X.Z,{size:16,className:"text-gray-400"})]},e.id))})]}),(0,r.jsx)("div",{className:"flex-1 p-6",children:o?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:o.name}),(0,r.jsx)(n(),{href:"/products?category=".concat(o.id),className:"text-primary-600 text-sm font-medium hover:underline",children:"View All →"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3",children:o.subcategories.map(e=>(0,r.jsx)(n(),{href:e.href,className:"text-sm text-gray-600 hover:text-primary-600 hover:translate-x-1 transition-all py-1",children:e.name},e.name))}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary-50 to-green-50 rounded-xl",children:[(0,r.jsx)("p",{className:"text-xs text-primary-600 font-semibold uppercase mb-1",children:"Featured"}),(0,r.jsxs)("p",{className:"text-sm text-gray-800 font-medium",children:["Up to 30% off on ",o.name]}),(0,r.jsx)(n(),{href:"/products?category=".concat(o.id,"&offers=true"),className:"inline-block mt-2 text-xs font-semibold text-primary-700 hover:text-primary-800",children:"Shop Now →"})]})]}):(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,r.jsx)(Q.Z,{size:48,className:"mb-3 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"Hover over a category to explore"})]})})]})]})}var es=s(6691),er=s.n(es),ea=s(4033);let ei=["Fresh apples","Organic vegetables","Almonds","Turmeric powder","Bananas","Mixed dry fruits"],en=[{name:"Fresh Fruits",href:"/products?category=cat-1",color:"bg-red-100 text-red-700"},{name:"Fresh Vegetables",href:"/products?category=cat-2",color:"bg-green-100 text-green-700"},{name:"Dry Fruits & Nuts",href:"/products?category=cat-3",color:"bg-amber-100 text-amber-700"},{name:"Spices & Seasonings",href:"/products?category=cat-4",color:"bg-orange-100 text-orange-700"}];function el(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[f,j]=(0,a.useState)(-1),b=(0,a.useRef)(null),v=(0,a.useRef)(null),N=(0,ea.useRouter)(),z=function(e,t){let[s,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let s=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}(e,300);(0,a.useEffect)(()=>{let e=localStorage.getItem("recentSearches");e&&g(JSON.parse(e))},[]),(0,a.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{(async function(){if(z.length<2){h([]);return}m(!0);try{let e=await fetch("/api/search?q=".concat(encodeURIComponent(z),"&limit=6"));if(e.ok){let t=((await e.json()).products||[]).map(e=>({type:"product",id:e.id,name:e.name,image:e.image,price:e.price,originalPrice:e.originalPrice,category:e.category,href:"/products/".concat(e.slug)}));h(t)}}catch(e){console.error("Search error:",e)}m(!1)})()},[z]);let M=e=>{let t=[e,...p.filter(t=>t!==e)].slice(0,5);g(t),localStorage.setItem("recentSearches",JSON.stringify(t))},A=t=>{let s=t||e;s.trim()&&(M(s),i(!1),N.push("/products?search=".concat(encodeURIComponent(s))))};return(0,r.jsxs)("div",{ref:b,className:"relative flex-1 max-w-2xl",children:[(0,r.jsxs)("div",{className:"relative flex items-center transition-all ".concat(l?"ring-2 ring-primary-500 shadow-lg":"ring-1 ring-gray-200 hover:ring-gray-300"," bg-white rounded-xl overflow-hidden"),children:[(0,r.jsx)(w.Z,{size:20,className:"absolute left-4 text-gray-400"}),(0,r.jsx)("input",{ref:v,type:"text",value:e,onChange:e=>{t(e.target.value),j(-1)},onFocus:()=>{c(!0),i(!0)},onBlur:()=>c(!1),onKeyDown:e=>{if("Escape"===e.key){var t;i(!1),null===(t=v.current)||void 0===t||t.blur()}else"Enter"===e.key?f>=0&&x[f]?(N.push(x[f].href),i(!1)):A():"ArrowDown"===e.key?(e.preventDefault(),j(e=>Math.min(e+1,x.length-1))):"ArrowUp"===e.key&&(e.preventDefault(),j(e=>Math.max(e-1,-1)))},placeholder:"Search for groceries, fruits, vegetables...",className:"w-full py-3 pl-12 pr-24 text-sm text-gray-800 placeholder-gray-400 focus:outline-none"}),(0,r.jsxs)("div",{className:"absolute right-2 flex items-center gap-2",children:[e&&(0,r.jsx)("button",{onClick:()=>{var e;t(""),null===(e=v.current)||void 0===e||e.focus()},className:"p-1.5 hover:bg-gray-100 rounded-full",children:(0,r.jsx)(u.Z,{size:16,className:"text-gray-400"})}),(0,r.jsx)("button",{onClick:()=>A(),className:"px-4 py-1.5 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors",children:"Search"})]})]}),s&&(0,r.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-gray-100 overflow-hidden z-50",children:[d&&(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(k.Z,{size:24,className:"animate-spin text-primary-600"})}),!d&&x.length>0&&(0,r.jsxs)("div",{className:"py-2",children:[(0,r.jsx)("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Products"}),x.map((e,t)=>(0,r.jsxs)(n(),{href:e.href,onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 transition-colors ".concat(t===f?"bg-gray-50":""),children:[e.image?(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(er(),{src:e.image,alt:e.name,width:48,height:48,className:"w-full h-full object-cover"})}):(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(y.Z,{size:20,className:"text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-gray-800 truncate",children:e.name}),e.category&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["in ",e.category]})]}),e.price&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-800",children:["₹",e.price]}),e.originalPrice&&e.originalPrice>e.price&&(0,r.jsxs)("p",{className:"text-xs text-gray-400 line-through",children:["₹",e.originalPrice]})]})]},e.id)),(0,r.jsxs)(n(),{href:"/products?search=".concat(encodeURIComponent(e)),onClick:()=>i(!1),className:"flex items-center justify-center gap-2 px-4 py-3 text-primary-600 font-medium hover:bg-primary-50 border-t border-gray-100",children:['View all results for "',e,'"',(0,r.jsx)(S.Z,{size:16})]})]}),!d&&0===x.length&&(0,r.jsxs)("div",{className:"py-4",children:[p.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-2",children:[(0,r.jsxs)("p",{className:"text-xs font-semibold text-gray-500 uppercase flex items-center gap-1",children:[(0,r.jsx)(o.Z,{size:14}),"Recent Searches"]}),(0,r.jsx)("button",{onClick:()=>{g([]),localStorage.removeItem("recentSearches")},className:"text-xs text-gray-400 hover:text-gray-600",children:"Clear all"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 px-4",children:p.map(e=>(0,r.jsx)("button",{onClick:()=>{t(e),A(e)},className:"px-3 py-1.5 bg-gray-100 text-gray-700 text-sm rounded-full hover:bg-gray-200 transition-colors",children:e},e))})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase flex items-center gap-1",children:[(0,r.jsx)(Z.Z,{size:14}),"Trending Searches"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 px-4",children:ei.map(e=>(0,r.jsx)("button",{onClick:()=>{t(e),A(e)},className:"px-3 py-1.5 bg-orange-50 text-orange-700 text-sm rounded-full hover:bg-orange-100 transition-colors",children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase flex items-center gap-1",children:[(0,r.jsx)(C.Z,{size:14}),"Popular Categories"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 px-4 pb-2",children:en.map(e=>(0,r.jsx)(n(),{href:e.href,onClick:()=>i(!1),className:"px-3 py-1.5 text-sm rounded-full ".concat(e.color," hover:opacity-80 transition-opacity"),children:e.name},e.name))})]})]})]})]})}var ec=s(6643),eo=s(1738),ed=s(4822),em=s(4056),ex=s(690),eu=s(2442),eh=s(4656),ep=s(573);function eg(){let{data:e}=(0,l.useSession)(),[t,s]=(0,a.useState)(!1),[i,c]=(0,a.useState)(!1),[o,d]=(0,a.useState)("all"),m=(0,a.useRef)(null),{notifications:h,unreadCount:p,setNotifications:g,markAsRead:f,markAllAsRead:j,removeNotification:b}=(0,eh.G)(),v=async()=>{if(null==e?void 0:e.user){c(!0);try{let e=await fetch("/api/user/notifications");if(e.ok){let t=await e.json();g(t.notifications||[])}}catch(e){console.error("Failed to fetch notifications:",e)}finally{c(!1)}}};(0,a.useEffect)(()=>{(null==e?void 0:e.user)&&v()},[e]),(0,a.useEffect)(()=>{t&&(null==e?void 0:e.user)&&v()},[t]),(0,a.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&s(!1)};return t&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[t]);let N=async e=>{try{(await fetch("/api/user/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds:[e]})})).ok&&f(e)}catch(e){console.error("Failed to mark notification as read:",e)}},w=async()=>{try{(await fetch("/api/user/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAll:!0})})).ok&&j()}catch(e){console.error("Failed to mark all notifications as read:",e)}},k=async e=>{try{(await fetch("/api/user/notifications?id=".concat(e),{method:"DELETE"})).ok&&b(e)}catch(e){console.error("Failed to delete notification:",e)}},C=e=>{switch(e){case"ORDER":return(0,r.jsx)(y.Z,{size:18,className:"text-blue-500"});case"PROMOTION":return(0,r.jsx)(ec.Z,{size:18,className:"text-pink-500"});case"DELIVERY":return(0,r.jsx)(x.Z,{size:18,className:"text-green-500"});case"PAYMENT":return(0,r.jsx)(eo.Z,{size:18,className:"text-purple-500"});case"WALLET":return(0,r.jsx)(ed.Z,{size:18,className:"text-amber-500"});default:return(0,r.jsx)(em.Z,{size:18,className:"text-gray-500"})}},S=e=>{var t,s;switch(e.type){case"ORDER":case"DELIVERY":return(null===(t=e.data)||void 0===t?void 0:t.orderId)?"/account/orders/".concat(e.data.orderId):"/account/orders";case"WALLET":return"/account/wallet";case"PROMOTION":return(null===(s=e.data)||void 0===s?void 0:s.promoLink)||"/offers";default:return null}},Z="unread"===o?h.filter(e=>!e.isRead):h;return(0,r.jsxs)("div",{className:"relative",ref:m,children:[(0,r.jsxs)("button",{onClick:()=>s(!t),className:"p-2 hover:bg-gray-100 rounded-full relative group transition-colors",children:[(0,r.jsx)(q.Z,{size:22,className:"transition-colors ".concat(t?"text-primary-600":"text-gray-600 group-hover:text-primary-600")}),p>0&&(0,r.jsx)("span",{className:"absolute -top-0.5 -right-0.5 min-w-[20px] h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1 animate-pulse",children:p>99?"99+":p})]}),t&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(q.Z,{size:20,className:"text-white"}),(0,r.jsx)("h3",{className:"font-semibold text-white",children:"Notifications"}),p>0&&(0,r.jsxs)("span",{className:"bg-white/20 text-white text-xs px-2 py-0.5 rounded-full",children:[p," new"]})]}),(0,r.jsx)("button",{onClick:()=>s(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,r.jsx)(u.Z,{size:18,className:"text-white"})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-100 bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>d("all"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("all"===o?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-200"),children:"All"}),(0,r.jsxs)("button",{onClick:()=>d("unread"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("unread"===o?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-200"),children:["Unread (",p,")"]})]}),p>0&&(0,r.jsxs)("button",{onClick:w,className:"text-xs text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1",children:[(0,r.jsx)(ex.Z,{size:14}),"Mark all read"]})]}),(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:i?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-gray-500",children:"Loading notifications..."})]}):0===Z.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(q.Z,{size:32,className:"text-gray-400"})}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"No notifications yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1 text-center",children:"unread"===o?"You're all caught up!":"We'll notify you about orders, offers & more"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:Z.map(e=>{let t=S(e),s=(0,r.jsx)("div",{className:"px-4 py-3 hover:bg-gray-50 transition-colors cursor-pointer ".concat(e.isRead?"":"bg-primary-50/50"),onClick:()=>!e.isRead&&N(e.id),children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat(e.isRead?"bg-gray-100":"bg-white shadow-sm"),children:C(e.type)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-sm ".concat(e.isRead?"text-gray-700":"text-gray-900 font-medium"),children:e.title}),!e.isRead&&(0,r.jsx)("span",{className:"flex-shrink-0 w-2 h-2 bg-primary-500 rounded-full mt-1.5"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 mt-0.5",children:e.message}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-400",children:(0,ep.Q)(new Date(e.createdAt),{addSuffix:!0})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[!e.isRead&&(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),N(e.id)},className:"p-1 text-gray-400 hover:text-primary-600 transition-colors",title:"Mark as read",children:(0,r.jsx)(eu.Z,{size:14})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e.id)},className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Delete",children:(0,r.jsx)(R.Z,{size:14})}),t&&(0,r.jsx)(X.Z,{size:14,className:"text-gray-400"})]})]})]})]})});return t?(0,r.jsx)(n(),{href:t,children:s},e.id):(0,r.jsx)("div",{children:s},e.id)})})}),h.length>0&&(0,r.jsx)("div",{className:"border-t border-gray-100 px-4 py-3 bg-gray-50",children:(0,r.jsxs)(n(),{href:"/account/notifications",className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center justify-center gap-1",onClick:()=>s(!1),children:["View all notifications",(0,r.jsx)(X.Z,{size:16})]})})]})]})}function ef(){var e,t,s,i,w,k,C,S,Z,M,A,E,R,P;let{data:O,status:L}=(0,l.useSession)(),[F,T]=(0,a.useState)(!1),[I,U]=(0,a.useState)(!1),{items:q,toggleCart:V,isOpen:J}=(0,v.xS)(),{items:H}=(0,v.Yl)(),{isMobileMenuOpen:B,toggleMobileMenu:Y}=(0,v.HB)(),{isOpen:_,toggleSearch:G}=(0,v.Rp)();(0,a.useEffect)(()=>{let e=()=>{T(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let K=q.reduce((e,t)=>e+t.quantity,0),Q=q.reduce((e,t)=>e+t.product.price*t.quantity,0),X="authenticated"===L&&(null==O?void 0:O.user);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-primary-600 via-primary-700 to-primary-600 text-white py-2 hidden md:block",children:(0,r.jsx)("div",{className:"container-custom",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-8 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 animate-pulse",children:[(0,r.jsx)(c.Z,{size:16,className:"text-yellow-300"}),(0,r.jsx)("span",{className:"font-medium",children:"Free Delivery on orders above ₹499"})]}),(0,r.jsx)("span",{className:"text-white/40",children:"|"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:16}),(0,r.jsx)("span",{children:"Express delivery in 10-30 mins"})]}),(0,r.jsx)("span",{className:"text-white/40",children:"|"}),(0,r.jsxs)(n(),{href:"/offers",className:"flex items-center gap-2 hover:text-yellow-300 transition-colors",children:[(0,r.jsx)("span",{className:"bg-yellow-400 text-primary-800 text-xs px-2 py-0.5 rounded font-bold",children:"HOT"}),(0,r.jsx)("span",{children:"Today's Deals: Up to 50% Off"})]})]})})}),(0,r.jsxs)("header",{className:"sticky top-0 z-50 bg-white transition-all duration-300 ".concat(F?"shadow-lg":"shadow-sm"),children:[(0,r.jsx)("div",{className:"hidden md:block border-b border-gray-100",children:(0,r.jsx)("div",{className:"container-custom py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)(d.Z,{size:14}),(0,r.jsx)("span",{children:"+91 98765 43210"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,r.jsx)(m.Z,{size:14}),(0,r.jsx)(n(),{href:"/help",className:"hover:text-primary-600",children:"24/7 Support"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)(n(),{href:"/track-order",className:"flex items-center gap-2 text-gray-600 hover:text-primary-600",children:[(0,r.jsx)(x.Z,{size:14}),"Track Order"]}),(0,r.jsx)(n(),{href:"/help",className:"text-gray-600 hover:text-primary-600",children:"Help Center"})]})]})})}),(0,r.jsx)("div",{className:"md:hidden bg-gray-50 border-b border-gray-100 py-2 px-3",children:(0,r.jsx)(W,{})}),(0,r.jsx)("div",{className:"container-custom !px-2 sm:!px-4 md:!px-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 h-16 md:h-20",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-3",children:[(0,r.jsx)("button",{className:"md:hidden p-1.5",onClick:Y,children:B?(0,r.jsx)(u.Z,{size:22}):(0,r.jsx)(h.Z,{size:22})}),(0,r.jsxs)(n(),{href:"/",className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,r.jsx)("div",{className:"w-9 h-9 sm:w-11 sm:h-11 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/30",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg sm:text-2xl",children:"K"})}),(0,r.jsxs)("div",{className:"hidden xs:block",children:[(0,r.jsx)("h1",{className:"font-display font-bold text-lg sm:text-xl text-gray-800 leading-tight",children:"KARIM"}),(0,r.jsx)("p",{className:"text-[10px] sm:text-xs text-primary-600 font-semibold leading-tight tracking-wide",children:"TRADERS"})]})]}),(0,r.jsx)("div",{className:"hidden lg:block ml-4 border-l border-gray-200 pl-4",children:(0,r.jsx)(W,{})})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-3 flex-1 max-w-3xl",children:[(0,r.jsx)(et,{}),(0,r.jsx)(el,{})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3",children:[(0,r.jsx)("button",{className:"md:hidden p-2 hover:bg-gray-100 rounded-full",onClick:G,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)(eg,{})}),(0,r.jsxs)(n(),{href:"/wishlist",className:"hidden md:flex p-2 hover:bg-gray-100 rounded-full relative group",children:[(0,r.jsx)(p.Z,{size:22,className:"text-gray-600 group-hover:text-red-500 transition-colors"}),H.length>0&&(0,r.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:H.length})]}),X?(0,r.jsxs)("div",{className:"hidden md:block relative",children:[(0,r.jsxs)("button",{onClick:()=>U(!I),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-xl transition-colors",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center shadow-md",children:(0,r.jsx)("span",{className:"text-sm font-bold text-white",children:(null===(t=O.user)||void 0===t?void 0:null===(e=t.name)||void 0===e?void 0:e.charAt(0))||"U"})}),(0,r.jsxs)("div",{className:"text-left hidden lg:block",children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"Welcome back,"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:(null===(i=O.user)||void 0===i?void 0:null===(s=i.name)||void 0===s?void 0:s.split(" ")[0])||"User"})]}),(0,r.jsx)(g.Z,{size:16,className:"text-gray-400 hidden lg:block"})]}),I&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-2xl border border-gray-100 py-2 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gradient-to-r from-primary-50 to-green-50 border-b border-gray-100",children:[(0,r.jsx)("p",{className:"font-medium text-gray-800",children:null===(w=O.user)||void 0===w?void 0:w.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null===(k=O.user)||void 0===k?void 0:k.email})]}),((null===(C=O.user)||void 0===C?void 0:C.role)==="ADMIN"||(null===(S=O.user)||void 0===S?void 0:S.role)==="SUPER_ADMIN")&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{href:"/admin",className:"flex items-center gap-3 px-4 py-2.5 hover:bg-primary-50 text-primary-600 font-medium",onClick:()=>U(!1),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Admin Dashboard"]}),(0,r.jsx)("hr",{className:"my-1 border-gray-100"})]}),(0,r.jsxs)(n(),{href:"/account",className:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 text-gray-700",onClick:()=>U(!1),children:[(0,r.jsx)(f.Z,{size:18}),"My Account"]}),(0,r.jsxs)(n(),{href:"/account/orders",className:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 text-gray-700",onClick:()=>U(!1),children:[(0,r.jsx)(y.Z,{size:18}),"My Orders"]}),(0,r.jsxs)(n(),{href:"/wishlist",className:"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 text-gray-700",onClick:()=>U(!1),children:[(0,r.jsx)(p.Z,{size:18}),"Wishlist"]}),(0,r.jsx)("hr",{className:"my-1 border-gray-100"}),(0,r.jsxs)("button",{onClick:()=>{U(!1),(0,l.signOut)({callbackUrl:"/"})},className:"flex items-center gap-3 px-4 py-2.5 hover:bg-red-50 text-red-600 w-full",children:[(0,r.jsx)(j.Z,{size:18}),"Sign Out"]})]})]}):(0,r.jsxs)(n(),{href:"/login",className:"hidden md:flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-xl transition-colors",children:[(0,r.jsx)(f.Z,{size:22,className:"text-gray-600"}),(0,r.jsxs)("div",{className:"text-left hidden lg:block",children:[(0,r.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"Sign in"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:"Account"})]})]}),(0,r.jsxs)("button",{onClick:V,className:"flex items-center gap-2 bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white px-3 py-2 md:px-4 md:py-2.5 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(b.Z,{size:22}),K>0&&(0,r.jsx)("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-yellow-400 text-primary-800 text-[10px] rounded-full flex items-center justify-center font-bold shadow",children:K>99?"99+":K})]}),(0,r.jsxs)("div",{className:"hidden md:block text-left",children:[(0,r.jsx)("p",{className:"text-[10px] text-primary-200 leading-tight",children:"My Cart"}),(0,r.jsxs)("p",{className:"text-sm font-bold",children:["₹",Q.toFixed(0)]})]})]})]})]})}),B&&(0,r.jsx)("div",{className:"md:hidden bg-white border-t shadow-xl animate-slide-down max-h-[80vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-4",children:[X&&(0,r.jsx)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-primary-50 rounded-xl",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-lg font-bold text-white",children:(null===(M=O.user)||void 0===M?void 0:null===(Z=M.name)||void 0===Z?void 0:Z.charAt(0))||"U"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800",children:null===(A=O.user)||void 0===A?void 0:A.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null===(E=O.user)||void 0===E?void 0:E.email})]})]})}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase px-2 mb-2",children:"Categories"}),N.bd.map(e=>(0,r.jsxs)(n(),{href:"/products?category=".concat(e.slug),className:"flex items-center gap-3 px-3 py-3 hover:bg-gray-50 rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)("span",{className:"text-2xl",children:e.icon}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e.name})]},e.id))]}),(0,r.jsxs)("div",{className:"border-t border-gray-100 pt-4 mt-4 space-y-1",children:[(0,r.jsxs)(n(),{href:"/offers",className:"flex items-center gap-3 px-3 py-3 text-red-600 hover:bg-red-50 rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD25"}),(0,r.jsx)("span",{className:"font-semibold",children:"Today's Deals"})]}),X?(0,r.jsxs)(r.Fragment,{children:[((null===(R=O.user)||void 0===R?void 0:R.role)==="ADMIN"||(null===(P=O.user)||void 0===P?void 0:P.role)==="SUPER_ADMIN")&&(0,r.jsxs)(n(),{href:"/admin",className:"flex items-center gap-3 px-3 py-3 hover:bg-primary-50 rounded-xl transition-colors text-primary-600",onClick:Y,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,r.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]}),(0,r.jsx)("span",{className:"font-semibold",children:"Admin Dashboard"})]}),(0,r.jsxs)(n(),{href:"/account",className:"flex items-center gap-3 px-3 py-3 hover:bg-gray-50 rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)(f.Z,{size:24,className:"text-gray-600"}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:"My Account"})]}),(0,r.jsxs)(n(),{href:"/account/orders",className:"flex items-center gap-3 px-3 py-3 hover:bg-gray-50 rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)(y.Z,{size:24,className:"text-gray-600"}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:"My Orders"})]}),(0,r.jsxs)(n(),{href:"/wishlist",className:"flex items-center gap-3 px-3 py-3 hover:bg-gray-50 rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)(p.Z,{size:24,className:"text-gray-600"}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:"Wishlist"})]}),(0,r.jsxs)("button",{onClick:()=>{Y(),(0,l.signOut)({callbackUrl:"/"})},className:"flex items-center gap-3 px-3 py-3 hover:bg-red-50 rounded-xl transition-colors w-full text-red-600",children:[(0,r.jsx)(j.Z,{size:24}),(0,r.jsx)("span",{className:"font-semibold",children:"Sign Out"})]})]}):(0,r.jsxs)(n(),{href:"/login",className:"flex items-center gap-3 px-3 py-3 bg-primary-600 text-white rounded-xl transition-colors",onClick:Y,children:[(0,r.jsx)(f.Z,{size:24}),(0,r.jsx)("span",{className:"font-semibold",children:"Login / Sign Up"})]})]})]})})]}),_&&(0,r.jsx)(z,{}),J&&(0,r.jsx)(D,{})]})}},6172:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),i=s(1396),n=s.n(i),l=s(4033),c=s(2749),o=s(7480),d=s(1813),m=s(1827),x=s(3505),u=s(7972),h=s(2549),p=s(7039);function g(){let e=(0,l.usePathname)(),{status:t}=(0,c.useSession)(),{items:s,toggleCart:i}=(0,p.xS)(),{items:g}=(0,p.Yl)(),[f,y]=(0,a.useState)(!0),[j,b]=(0,a.useState)(0),[v,N]=(0,a.useState)(!1),w=s.reduce((e,t)=>e+t.quantity,0),k="authenticated"===t;(0,a.useEffect)(()=>{let e=()=>{let e=window.scrollY;e>j&&e>100?y(!1):y(!0),b(e)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[j]);let C=[{href:"/",icon:o.Z,label:"Home"},{href:"/products",icon:d.Z,label:"Categories"},{href:"#search",icon:m.Z,label:"Search",onClick:()=>N(!0)},{href:"#cart",icon:x.Z,label:"Cart",count:w,onClick:i},{href:k?"/account":"/login",icon:u.Z,label:k?"Account":"Login"}];return(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsxs)("div",{className:"fixed inset-0 z-[60] bg-white md:hidden animate-slide-up",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b border-gray-100 bg-white",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full",children:(0,r.jsx)(h.Z,{size:24,className:"text-gray-600"})}),(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(m.Z,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search for groceries, fruits...",className:"w-full py-3 pl-10 pr-4 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white",onKeyDown:e=>{if("Enter"===e.key){let t=e.target.value;t.trim()&&(N(!1),window.location.href="/products?search=".concat(encodeURIComponent(t)))}}})]})]}),(0,r.jsxs)("div",{className:"p-4 overflow-y-auto h-[calc(100%-72px)]",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Popular Searches"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:["Fresh vegetables","Milk","Bread","Rice","Fruits","Eggs","Oil"].map(e=>(0,r.jsx)("button",{onClick:()=>{N(!1),window.location.href="/products?search=".concat(encodeURIComponent(e))},className:"px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-700 hover:bg-primary-50 hover:text-primary-600 transition-colors",children:e},e))}),(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-400 uppercase mb-3",children:"Browse Categories"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{name:"Fresh Fruits",emoji:"\uD83C\uDF4E",href:"/products?category=cat-1"},{name:"Fresh Vegetables",emoji:"\uD83E\uDD6C",href:"/products?category=cat-2"},{name:"Dry Fruits & Nuts",emoji:"\uD83E\uDD5C",href:"/products?category=cat-3"},{name:"Spices & Seasonings",emoji:"\uD83C\uDF36️",href:"/products?category=cat-4"}].map(e=>(0,r.jsxs)(n(),{href:e.href,onClick:()=>N(!1),className:"flex items-center gap-2 p-3 bg-gray-50 rounded-xl hover:bg-primary-50 transition-colors",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name})]},e.name))})]})]}),(0,r.jsx)("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl z-50 transition-transform duration-300 ".concat(f?"translate-y-0":"translate-y-full"),style:{paddingBottom:"env(safe-area-inset-bottom)"},children:(0,r.jsx)("div",{className:"flex items-center justify-around py-2",children:C.map(t=>{let s=e===t.href,a=t.icon;return t.onClick?(0,r.jsxs)("button",{onClick:t.onClick,className:"flex flex-col items-center gap-0.5 px-4 py-1.5 relative group",children:[(0,r.jsxs)("div",{className:"relative p-1.5 rounded-xl transition-colors ".concat(s?"bg-primary-50":"group-hover:bg-gray-100"),children:[(0,r.jsx)(a,{size:22,className:s?"text-primary-600":"text-gray-500"}),t.count&&t.count>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1",children:t.count>99?"99+":t.count})]}),(0,r.jsx)("span",{className:"text-[10px] font-medium ".concat(s?"text-primary-600":"text-gray-500"),children:t.label})]},t.label):(0,r.jsxs)(n(),{href:t.href,className:"flex flex-col items-center gap-0.5 px-4 py-1.5 relative group",children:[(0,r.jsxs)("div",{className:"relative p-1.5 rounded-xl transition-colors ".concat(s?"bg-primary-50":"group-hover:bg-gray-100"),children:[(0,r.jsx)(a,{size:22,className:s?"text-primary-600":"text-gray-500"}),t.count&&t.count>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1",children:t.count>99?"99+":t.count})]}),(0,r.jsx)("span",{className:"text-[10px] font-medium ".concat(s?"text-primary-600":"text-gray-500"),children:t.label}),s&&(0,r.jsx)("span",{className:"absolute -top-0.5 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-600 rounded-full"})]},t.href)})})})]})}},5692:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(5925),i=s(2749);function n(e){let{children:t}=e;return(0,r.jsx)(i.SessionProvider,{children:t})}var l=s(2265),c=s(7039);function o(e){var t;let{children:s}=e,{data:a,status:n}=(0,i.useSession)(),{loadFromDatabase:o,isSyncing:d}=(0,c.xS)(),m=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{var e;"authenticated"===n&&(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.id)&&!m.current&&!d&&(m.current=!0,o(a.user.id)),"unauthenticated"===n&&(m.current=!1)},[n,null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.id,o,d]),(0,r.jsx)(r.Fragment,{children:s})}function d(e){let{children:t}=e;return(0,r.jsxs)(n,{children:[(0,r.jsx)(o,{children:t}),(0,r.jsx)(a.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},success:{style:{background:"#22c55e"},iconTheme:{primary:"#fff",secondary:"#22c55e"}},error:{style:{background:"#ef4444"},iconTheme:{primary:"#fff",secondary:"#ef4444"}}}})]})}},7039:function(e,t,s){"use strict";s.d(t,{HB:function(){return c},Rp:function(){return l},Yl:function(){return n},xS:function(){return i}});var r=s(4660),a=s(4810);let i=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],isOpen:!1,isSyncing:!1,setItems:t=>e({items:t}),setSyncing:t=>e({isSyncing:t}),addItem:(t,s)=>{e(e=>e.items.find(e=>e.product.id===t.id)?{items:e.items.map(e=>e.product.id===t.id?{...e,quantity:e.quantity+s}:e)}:{items:[...e.items,{product:t,quantity:s,selectedUnit:t.unit}]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.product.id!==t)}))},updateQuantity:(t,s)=>{e(e=>({items:e.items.map(e=>e.product.id===t?{...e,quantity:Math.max(0,s)}:e).filter(e=>e.quantity>0)}))},clearCart:()=>e({items:[]}),toggleCart:()=>e(e=>({isOpen:!e.isOpen})),getSubtotal:()=>t().items.reduce((e,t)=>e+t.product.price*t.quantity,0),getItemCount:()=>t().items.reduce((e,t)=>e+t.quantity,0),getDeliveryCharge:()=>t().getSubtotal()>=500?0:40,getTotal:()=>t().getSubtotal()+t().getDeliveryCharge(),syncAddItem:async(e,s,r)=>{if(!r)return t().addItem(e,s),!0;try{if((await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.id,quantity:s})})).ok)return t().addItem(e,s),!0;return!1}catch(e){return console.error("Sync add item error:",e),!1}},syncUpdateQuantity:async(e,s,r)=>{if(!r)return t().updateQuantity(e,s),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:s})})).ok)return t().updateQuantity(e,s),!0;return!1}catch(e){return console.error("Sync update quantity error:",e),!1}},syncRemoveItem:async(e,s)=>{if(!s)return t().removeItem(e),!0;try{if((await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:0})})).ok)return t().removeItem(e),!0;return!1}catch(e){return console.error("Sync remove item error:",e),!1}},syncClearCart:async e=>{if(!e)return t().clearCart(),!0;try{if((await fetch("/api/cart",{method:"DELETE"})).ok)return t().clearCart(),!0;return!1}catch(e){return console.error("Sync clear cart error:",e),!1}},loadFromDatabase:async s=>{if(s){e({isSyncing:!0});try{let s=await fetch("/api/cart");if(s.ok){let r=((await s.json()).items||[]).map(e=>{var t,s;return{product:{id:e.product.id,name:e.product.name,slug:e.product.slug,price:Number(e.product.price),originalPrice:e.product.originalPrice?Number(e.product.originalPrice):Number(e.product.price),discount:e.product.discount||0,unit:e.product.unit,images:(null===(t=e.product.images)||void 0===t?void 0:t.map(e=>e.url))||[],category:(null===(s=e.product.category)||void 0===s?void 0:s.name)||"",stockCount:e.product.stockCount,stockStatus:e.product.stockStatus,rating:e.product.rating||0,reviewCount:e.product.reviewCount||0},quantity:e.quantity,selectedUnit:e.product.unit}}),a=t().items,i=new Map;for(let e of(r.forEach(e=>{i.set(e.product.id,e)}),a))i.has(e.product.id)||(i.set(e.product.id,e),await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e.product.id,quantity:e.quantity})}));e({items:Array.from(i.values())})}}catch(e){console.error("Load from database error:",e)}finally{e({isSyncing:!1})}}}}),{name:"karim-cart"})),n=(0,r.Ue)()((0,a.tJ)((e,t)=>({items:[],addItem:t=>{e(e=>e.items.find(e=>e.id===t.id)?e:{items:[...e.items,t]})},removeItem:t=>{e(e=>({items:e.items.filter(e=>e.id!==t)}))},isInWishlist:e=>t().items.some(t=>t.id===e),clearWishlist:()=>e({items:[]})}),{name:"karim-wishlist"}));(0,r.Ue)()((0,a.tJ)((e,t)=>({user:null,isAuthenticated:!1,addresses:[],login:t=>{e({user:t,isAuthenticated:!0,addresses:t.addresses})},logout:()=>{e({user:null,isAuthenticated:!1,addresses:[]})},updateProfile:t=>{e(e=>({user:e.user?{...e.user,...t}:null}))},addAddress:t=>{e(e=>({addresses:[...e.addresses,t]}))},updateAddress:(t,s)=>{e(e=>({addresses:e.addresses.map(e=>e.id===t?{...e,...s}:e)}))},removeAddress:t=>{e(e=>({addresses:e.addresses.filter(e=>e.id!==t)}))},setDefaultAddress:t=>{e(e=>({addresses:e.addresses.map(e=>({...e,isDefault:e.id===t}))}))}}),{name:"karim-user"}));let l=(0,r.Ue)()((0,a.tJ)((e,t)=>({query:"",recentSearches:[],isOpen:!1,setQuery:t=>e({query:t}),addRecentSearch:t=>{e(e=>{let s=e.recentSearches.filter(e=>e!==t);return{recentSearches:[t,...s].slice(0,10)}})},clearRecentSearches:()=>e({recentSearches:[]}),toggleSearch:()=>e(e=>({isOpen:!e.isOpen}))}),{name:"karim-search"}));(0,r.Ue)()((0,a.tJ)((e,t)=>({notifications:[],unreadCount:0,addNotification:t=>{e(e=>({notifications:[t,...e.notifications],unreadCount:e.unreadCount+1}))},markAsRead:t=>{e(e=>({notifications:e.notifications.map(e=>e.id===t?{...e,isRead:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)}))},markAllAsRead:()=>{e(e=>({notifications:e.notifications.map(e=>({...e,isRead:!0})),unreadCount:0}))},clearNotifications:()=>e({notifications:[],unreadCount:0})}),{name:"karim-notifications"}));let c=(0,r.Ue)(e=>({isMobileMenuOpen:!1,isFilterOpen:!1,viewMode:"grid",toggleMobileMenu:()=>e(e=>({isMobileMenuOpen:!e.isMobileMenuOpen})),toggleFilter:()=>e(e=>({isFilterOpen:!e.isFilterOpen})),setViewMode:t=>e({viewMode:t})}))},4656:function(e,t,s){"use strict";s.d(t,{G:function(){return r}});let r=(0,s(4660).Ue)((e,t)=>({notifications:[],unreadCount:0,setNotifications:t=>e({notifications:t,unreadCount:t.filter(e=>!e.isRead).length}),setUnreadCount:t=>e({unreadCount:t}),addNotification:t=>e(e=>({notifications:[t,...e.notifications],unreadCount:e.unreadCount+(t.isRead?0:1)})),markAsRead:t=>e(e=>{let s=e.notifications.find(e=>e.id===t);return!s||s.isRead?e:{notifications:e.notifications.map(e=>e.id===t?{...e,isRead:!0}:e),unreadCount:Math.max(0,e.unreadCount-1)}}),markAllAsRead:()=>e(e=>({notifications:e.notifications.map(e=>({...e,isRead:!0})),unreadCount:0})),removeNotification:t=>e(e=>{let s=e.notifications.find(e=>e.id===t);return{notifications:e.notifications.filter(e=>e.id!==t),unreadCount:s&&!s.isRead?Math.max(0,e.unreadCount-1):e.unreadCount}}),clearNotifications:()=>e({notifications:[],unreadCount:0})}))},3385:function(){}},function(e){e.O(0,[6221,2749,4356,1084,4548,5594,2971,4938,1744],function(){return e(e.s=8905)}),_N_E=e.O()}]);