(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5286],{2482:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1813:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},6264:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2549:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1708:function(e,s,t){Promise.resolve().then(t.bind(t,733))},733:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(7437),r=t(2265),l=t(4033),i=t(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,i.Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var c=t(1813);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,i.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var d=t(2549),x=t(6264),u=t(2482),m=t(3494);function h(e){return{id:e.id,name:e.name,slug:e.slug,description:e.description||"",shortDescription:e.shortDescription||"",category:{id:e.category.id,name:e.category.name,slug:e.category.slug,description:"",image:"",icon:"",productCount:0,subcategories:[]},subcategory:"",price:e.price,originalPrice:e.originalPrice||e.price,discount:e.discount,unit:e.unit,minQuantity:1,maxQuantity:10,stockStatus:"IN_STOCK"===e.stockStatus?"in-stock":"LOW_STOCK"===e.stockStatus?"limited":"out-of-stock",stockCount:e.stockCount,images:e.images.length>0?e.images.map(e=>e.url):["https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500&h=500&fit=crop"],rating:e.averageRating||e.rating||0,reviewCount:e.reviewCount||0,isOrganic:e.isOrganic,isFeatured:e.isFeatured,isNewArrival:e.isNew,isBestSeller:e.isBestSeller,brand:"KARIM TRADERS",origin:"India",tags:e.tags||[],createdAt:e.createdAt,updatedAt:e.updatedAt}}function p(){var e,s,t,i,p;let g=(0,l.useSearchParams)(),y=(0,l.useRouter)(),j=null!==(e=null==g?void 0:g.get("category"))&&void 0!==e?e:null,b=null!==(s=null==g?void 0:g.get("search"))&&void 0!==s?s:null,f=null!==(t=null==g?void 0:g.get("featured"))&&void 0!==t?t:null,N=null!==(i=null==g?void 0:g.get("bestseller"))&&void 0!==i?i:null,v=null!==(p=null==g?void 0:g.get("new"))&&void 0!==p?p:null,[k,w]=(0,r.useState)([]),[C,S]=(0,r.useState)([]),[Z,P]=(0,r.useState)(!0),[A,M]=(0,r.useState)(null),[O,z]=(0,r.useState)("grid"),[F,R]=(0,r.useState)("relevance"),[E,B]=(0,r.useState)(!1),[_,L]=(0,r.useState)(1),[I,T]=(0,r.useState)(1),[D,q]=(0,r.useState)(0),[H,K]=(0,r.useState)(j?[j]:[]),[Q,U]=(0,r.useState)([0,1e4]),[G,W]=(0,r.useState)(null),[X,J]=(0,r.useState)(0),[V,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/categories");if(e.ok){let s=await e.json();S(s)}}catch(e){console.error("Error fetching categories:",e)}})()},[]);let $=(0,r.useCallback)(async()=>{P(!0),M(null);try{let e=new URLSearchParams;e.set("page",_.toString()),e.set("limit","12"),H.length>0&&e.set("category",H[0]),b&&e.set("search",b),Q[0]>0&&e.set("minPrice",Q[0].toString()),Q[1]<1e4&&e.set("maxPrice",Q[1].toString()),!0===G&&e.set("organic","true"),V&&e.set("inStock","true"),"true"===f&&e.set("featured","true"),"true"===N&&e.set("bestseller","true"),"price-low-high"===F?(e.set("sortBy","price"),e.set("sortOrder","asc")):"price-high-low"===F?(e.set("sortBy","price"),e.set("sortOrder","desc")):"newest"===F?(e.set("sortBy","createdAt"),e.set("sortOrder","desc")):"discount"===F&&e.set("sortBy","discount");let s=await fetch("/api/products?".concat(e.toString()));if(!s.ok)throw Error("Failed to fetch products");let t=await s.json(),a=t.products.map(h);X>0&&(a=a.filter(e=>e.rating>=X)),"rating"===F?a.sort((e,s)=>s.rating-e.rating):"popularity"===F&&a.sort((e,s)=>s.reviewCount-e.reviewCount),w(a),T(t.pagination.totalPages),q(t.pagination.total)}catch(e){console.error("Error fetching products:",e),M("Failed to load products. Please try again.")}finally{P(!1)}},[_,H,b,Q,G,V,F,X,f,N]);(0,r.useEffect)(()=>{$()},[$]),(0,r.useEffect)(()=>{L(1)},[H,Q,G,V,F,b]);let ee=e=>{K(s=>s.includes(e)?s.filter(s=>s!==e):[e])},es=()=>{K([]),U([0,1e4]),W(null),J(0),Y(!1),y.push("/products")},et=[H.length>0,Q[0]>0||Q[1]<1e4,null!==G,X>0,V].filter(Boolean).length;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsxs)("div",{className:"container-custom py-6",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-display text-gray-800",children:(()=>{if(b)return'Search Results for "'.concat(b,'"');if("true"===f)return"Featured Products";if("true"===N)return"Best Sellers";if("true"===v)return"New Arrivals";if(j){let e=C.find(e=>e.slug===j);return(null==e?void 0:e.name)||"Products"}return"All Products"})()}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:Z?"Loading...":"".concat(D," products found")})]})}),(0,a.jsx)("div",{className:"container-custom py-6",children:(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 sticky top-24",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Filters"}),et>0&&(0,a.jsx)("button",{onClick:es,className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear all"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Categories"}),(0,a.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:H.includes(e.slug),onChange:()=>ee(e.slug),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:e.name}),(0,a.jsxs)("span",{className:"text-gray-400 text-sm ml-auto",children:["(",e.productCount,")"]})]},e.id))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Price Range"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"number",value:Q[0],onChange:e=>U([Number(e.target.value),Q[1]]),className:"w-24 px-3 py-2 border rounded-lg text-sm",placeholder:"Min"}),(0,a.jsx)("span",{className:"text-gray-400",children:"to"}),(0,a.jsx)("input",{type:"number",value:Q[1],onChange:e=>U([Q[0],Number(e.target.value)]),className:"w-24 px-3 py-2 border rounded-lg text-sm",placeholder:"Max"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Product Type"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"organic",checked:null===G,onChange:()=>W(null),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:"All Products"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"organic",checked:!0===G,onChange:()=>W(!0),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:"Organic Only"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"organic",checked:!1===G,onChange:()=>W(!1),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:"Conventional"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Minimum Rating"}),(0,a.jsx)("div",{className:"space-y-2",children:[4,3,2,1].map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"rating",checked:X===e,onChange:()=>J(e),className:"filter-checkbox"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[[void 0,void 0,void 0,void 0,void 0].map((s,t)=>(0,a.jsx)("span",{className:t<e?"text-yellow-400":"text-gray-300",children:"â˜…"},t)),(0,a.jsx)("span",{className:"text-gray-700 ml-1",children:"& Up"})]})]},e))})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:V,onChange:e=>Y(e.target.checked),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:"In Stock Only"})]})})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("button",{onClick:()=>B(!0),className:"lg:hidden flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(n,{size:18}),"Filters",et>0&&(0,a.jsx)("span",{className:"bg-primary-600 text-white text-xs px-2 py-0.5 rounded-full",children:et})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-600 text-sm",children:"Sort by:"}),(0,a.jsxs)("select",{value:F,onChange:e=>R(e.target.value),className:"px-4 py-2 border rounded-lg bg-white text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"relevance",children:"Relevance"}),(0,a.jsx)("option",{value:"price-low-high",children:"Price: Low to High"}),(0,a.jsx)("option",{value:"price-high-low",children:"Price: High to Low"}),(0,a.jsx)("option",{value:"popularity",children:"Popularity"}),(0,a.jsx)("option",{value:"newest",children:"Newest First"}),(0,a.jsx)("option",{value:"discount",children:"Discount"}),(0,a.jsx)("option",{value:"rating",children:"Rating"})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-2 border rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>z("grid"),className:"p-2 rounded ".concat("grid"===O?"bg-primary-600 text-white":"text-gray-600 hover:bg-gray-100"),children:(0,a.jsx)(c.Z,{size:18})}),(0,a.jsx)("button",{onClick:()=>z("list"),className:"p-2 rounded ".concat("list"===O?"bg-primary-600 text-white":"text-gray-600 hover:bg-gray-100"),children:(0,a.jsx)(o,{size:18})})]})]}),et>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[H.map(e=>{var s;return(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[null===(s=C.find(s=>s.slug===e))||void 0===s?void 0:s.name,(0,a.jsx)("button",{onClick:()=>ee(e),children:(0,a.jsx)(d.Z,{size:14})})]},e)}),null!==G&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[G?"Organic":"Conventional",(0,a.jsx)("button",{onClick:()=>W(null),children:(0,a.jsx)(d.Z,{size:14})})]}),X>0&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[X,"+ Stars",(0,a.jsx)("button",{onClick:()=>J(0),children:(0,a.jsx)(d.Z,{size:14})})]}),V&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:["In Stock",(0,a.jsx)("button",{onClick:()=>Y(!1),children:(0,a.jsx)(d.Z,{size:14})})]})]}),Z&&(0,a.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,a.jsx)(x.Z,{className:"w-8 h-8 animate-spin text-primary-600"})}),A&&!Z&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(d.Z,{size:40,className:"text-red-500"})}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:A}),(0,a.jsx)("button",{onClick:$,className:"btn-primary mt-4",children:"Try Again"})]}),!Z&&!A&&k.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid"===O?"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:k.map(e=>(0,a.jsx)(m.Z,{product:e},e.id))}),I>1&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:()=>L(e=>Math.max(1,e-1)),disabled:1===_,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,I))].map((e,s)=>{let t;return t=I<=5?s+1:_<=3?s+1:_>=I-2?I-4+s:_-2+s,(0,a.jsx)("button",{onClick:()=>L(t),className:"w-10 h-10 rounded-lg ".concat(_===t?"bg-primary-600 text-white":"border hover:bg-gray-50"),children:t},t)}),(0,a.jsx)("button",{onClick:()=>L(e=>Math.min(I,e+1)),disabled:_===I,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),!Z&&!A&&0===k.length&&(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Z,{size:40,className:"text-gray-400"})}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-800 mb-2",children:"No products found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search terms"}),(0,a.jsx)("button",{onClick:es,className:"btn-primary",children:"Clear All Filters"})]})]})]})}),E&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>B(!1)}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white p-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Filters"}),(0,a.jsx)("button",{onClick:()=>B(!1),children:(0,a.jsx)(d.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Categories"}),(0,a.jsx)("div",{className:"space-y-2",children:C.map(e=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:H.includes(e.slug),onChange:()=>ee(e.slug),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"Price Range"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"number",value:Q[0],onChange:e=>U([Number(e.target.value),Q[1]]),className:"flex-1 px-3 py-2 border rounded-lg text-sm",placeholder:"Min"}),(0,a.jsx)("span",{className:"text-gray-400",children:"to"}),(0,a.jsx)("input",{type:"number",value:Q[1],onChange:e=>U([Q[0],Number(e.target.value)]),className:"flex-1 px-3 py-2 border rounded-lg text-sm",placeholder:"Max"})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:V,onChange:e=>Y(e.target.checked),className:"filter-checkbox"}),(0,a.jsx)("span",{className:"text-gray-700",children:"In Stock Only"})]})})]}),(0,a.jsxs)("div",{className:"sticky bottom-0 bg-white p-4 border-t flex gap-3",children:[(0,a.jsx)("button",{onClick:es,className:"flex-1 btn-outline",children:"Clear All"}),(0,a.jsx)("button",{onClick:()=>B(!1),className:"flex-1 btn-primary",children:"Apply Filters"})]})]})]})]})}function g(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-8 h-8 animate-spin text-primary-600"})}),children:(0,a.jsx)(p,{})})}},4033:function(e,s,t){e.exports=t(5313)}},function(e){e.O(0,[6221,2749,4356,1084,3494,2971,4938,1744],function(){return e(e.s=1708)}),_N_E=e.O()}]);